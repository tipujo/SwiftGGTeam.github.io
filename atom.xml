<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[SwiftGG]]></title>
  <subtitle><![CDATA[èµ°å¿ƒçš„ Swift ç¿»è¯‘ç»„]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://swiftggteam.github.io/"/>
  <updated>2015-11-19T02:33:17.287Z</updated>
  <id>http://swiftggteam.github.io/</id>
  
  <author>
    <name><![CDATA[SwiftGG]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[3D Touchä»‹ç»ï¼šç”µå­ç§¤Appä¸å¿«æ·æ“ä½œ]]></title>
    <link href="http://swiftggteam.github.io/2015/11/19/3d-touch-tutorial/"/>
    <id>http://swiftggteam.github.io/2015/11/19/3d-touch-tutorial/</id>
    <published>2015-11-19T02:31:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šMaxime Defauwï¼Œ<a href="http://www.appcoda.com/3d-touch-tutorial/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015/11/09<br>è¯‘è€…ï¼š<a href="http://www.brighttj.com" target="_blank" rel="external">saitjr</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>éšç€ iPhone6s ä¸ 6s plus çš„åˆ°æ¥ï¼Œè‹¹æœç»™æˆ‘ä»¬å±•ç°äº†ä¸€ç§å…¨æ–°çš„äº¤äº’æ–¹å¼ï¼šé‡æŒ‰æ‰‹åŠ¿ã€‚ä½ å¯èƒ½çŸ¥é“ï¼Œè¿™ä¸ªç‰¹æ€§å·²ç»åœ¨ Apple Watch å’Œ MacBook ä¸Šæ¨å‡ºäº†ï¼Œä¸è¿‡é‚£æ—¶å« Force Touchï¼Œå°±æ˜¯å­—é¢ä¸Šçš„æ„æ€ï¼Œç»™ç”¨æˆ·çš„äº¤äº’æ·»åŠ ä¸€ç§æ–°çš„ç»´åº¦ã€‚</p>
<p>å¦‚æœä½ å¾ˆå¥½å¥‡ iPhone çš„ Force Touch ä¸ºå•¥è¦æ›´åä¸º 3D Touchï¼Œé‚£å‘Šè¯‰ä½ å§ï¼Œyouâ€™re not aloneï¼ˆè¯‘è€…æ³¨ï¼šè¯·ç”¨ MJ çš„è°ƒå­å”±å‡ºæ¥â€¦ï¼‰ã€‚ä¸ä¹…å‰ï¼Œä¹‹å‰ä¹Ÿå¯¹è¿™åå­—çº ç»“ä¸å·²çš„ Craig Federighiï¼ˆè¯‘è€…æ³¨ï¼šApple é«˜çº§å‰¯æ€»è£ï¼‰ä»‹ç»äº†è¿™ä¸ªæ–°ç‰¹æ€§ï¼Œç¬¬ä¸€æ¡å¾®åšå°±è¿™æ ·äº§ç”Ÿäº†ã€‚ä¹Ÿä¸çŸ¥é“ Force Touch è¿™åå­—æœ‰å•¥ä¸å¥½çš„ï¼Œå°±å› ä¸ºæœ‰å¤ªå¤šæ˜Ÿçƒå¤§æˆ˜çš„æ¢—ï¼Ÿï¼ˆè¯‘è€…æ³¨ï¼šå…¶å®æˆ‘ä¸çŸ¥é“è¿™æ¢—â€¦ï¼‰ï¼ˆæ ¡å¯¹æ³¨ï¼šè¯‘è€…æ˜¯ä¸ªå¦¹å­ï¼‰ï¼ˆå®šç¨¿æ³¨ï¼šè¿˜æ˜¯å•èº«ï¼‰</p>
<a id="more"></a>
<p>ä½†æ˜¯ï¼ŒForce Touch å’Œ 3d Touch ç¡®å®ä¸ä¸€æ ·ï¼Force Touch åªèƒ½è¯†åˆ«é‡æŒ‰ã€‚è¿™æ–¹é¢ 3D Touch è¦çµæ•å¤šäº†ï¼Œå®ƒèƒ½å¤Ÿè¯†åˆ«æŒ‰å‹çš„åŠ›åº¦ã€‚</p>
<p><img src="http://www.appcoda.com/wp-content/uploads/2015/11/3dtouch-intro.jpg" alt=""></p>
<p>è™½ç„¶è¯´ï¼Œè¿™ç‚¹ä¸åŒçœ‹èµ·æ¥æ— è¶³è½»é‡ï¼Œä½†æ˜¯è¿™ä½¿å¼€å‘è€…èƒ½å¼€å‘æ›´å¤šç²¾ç¡®è®¡é‡æ–¹é¢çš„ Appã€‚æ¯”å¦‚è¿™ä¸€æ¬¾åä¸º<a href="https://medium.com/swlh/turning-the-iphone-6s-into-a-digital-scale-f2197dc2b6e7" target="_blank" rel="external">Gravity</a>çš„åº”ç”¨ï¼Œå®ƒåˆ©ç”¨ Force Touch è®©ä½ çš„ iPhone æˆä¸ºäº†ä¸€ä¸ªç”µå­ç§¤ã€‚è™½ç„¶è¿™æ¬¾ App è¢« Apple æ‹’äº†ï¼Œä½†æ˜¯è¿™åˆ›æ„ç®€ç›´å¤ªæ£’äº†ã€‚ä¸ºäº†å±•ç¤º 3D Touch çš„å·¥ä½œæµç¨‹ï¼Œæˆ‘ä»¬æ¥åšä¸€ä¸ªç®€å•çš„ Appã€‚</p>
<p>å…ˆå»ä¸‹è½½è¿™ä¸ª<a href="https://www.dropbox.com/s/i3xwostpd87rqci/ScaleStarter.zip?dl=0" target="_blank" rel="external">åˆå§‹æ¡ˆä¾‹</a>ã€‚åˆå§‹æ¡ˆä¾‹ä¸­åªæœ‰ä¸€ä¸ªç©ºçš„ Single Viewã€‚æˆ‘åœ¨é‡Œé¢åˆ›å»ºäº† App å¿…è¦çš„ UI å…ƒç´ ï¼ˆ<code>UILabel</code>å’Œ<code>UIImage</code>ï¼‰ï¼Œå¹¶å…³è”äº†<code>ViewController.swift</code>ã€‚</p>
<p><img src="http://www.appcoda.com/wp-content/uploads/2015/11/3dtouch-storyboard.png" alt=""></p>
<p>è¿™ä¸ª App çš„è®¾è®¡å¾ˆç®€å•ï¼šViewController ä¸Šæœ‰ä¸¤ä¸ª Labelï¼šä¸€ä¸ªæ ‡é¢˜å’Œä¸€ä¸ªæ˜¾ç¤ºæŒ‰å‹ç™¾åˆ†æ¯”çš„æ–‡æœ¬ã€‚</p>
<p>é‚£â€¦å¼€å§‹å†™ä»£ç å§ï¼åœ¨ iPhone6s å’Œ 6s Plus ä¸Šï¼Œ<code>UITouch</code>å¯¹è±¡å¤šäº†ä¸¤ä¸ª<code>CGFloat</code>ç±»å‹çš„å±æ€§ï¼Œåˆ†åˆ«æ˜¯<code>force</code>å’Œ<code>maximumPossibleForce</code>ã€‚<code>force</code>è¡¨ç¤ºæŒ‰å¾—æœ‰å¤šé‡ï¼Œ<code>1.0</code>è¡¨ç¤ºå¸¸è§„çŠ¶æ€çš„å€¼ã€‚<code>maximumPossibleForce</code>è¡¨ç¤ºèƒ½æ‰¿å—çš„æœ€å¤§å‹åŠ›å€¼ã€‚</p>
<p>æ— è®ºä»€ä¹ˆæƒ…å†µï¼Œå½“ç”¨æˆ·è§¦æ‘¸å±å¹•æ—¶ï¼Œ<code>touchesBegan</code>æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œæ¥ç€å°±æ˜¯<code>touchesMoved</code>ï¼ˆå¦‚æœç”¨æˆ·æ‰‹æŒ‡åœ¨å±å¹•ä¸Šæ»‘åŠ¨ï¼Œé‚£ä¹ˆ<code>touchedCancelled</code>ä¸<code>TouchesEnded</code>ä¹Ÿä¼šè¢«è°ƒç”¨ï¼‰ã€‚åœ¨è¿™ä¸ªAppä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨<code>touchesMoved</code>æ–¹æ³•ã€‚<code>touchesMoved</code>æœ‰ä¸¤ä¸ªå‚æ•°ï¼š<code>touches</code>å’Œ<code>event</code>ã€‚<code>touches</code>æ˜¯ä¸€ä¸ªè£…ç€<code>UITouch</code>å¯¹è±¡çš„<code>NSSet</code>ç±»å‹é›†åˆï¼ˆé›†åˆæ— åºï¼Œå¹¶ä¸”æ— é‡å¤ï¼‰ã€‚æˆ‘ä»¬å¿…é¡»è¦ç¡®ä¿åœ¨<code>touches</code>ä¸­åªæœ‰ä¸€ä¸ª<code>UITouch</code>å¯¹è±¡ï¼Œä½†ä¹Ÿæœ‰è€ƒè™‘ä¸å®Œå…¨çš„æ—¶å€™ï¼Œæ‰€ä»¥å¼ºçƒˆå»ºè®®å¤§å®¶å…ˆåˆ©ç”¨å¯é€‰ç»‘å®šæ¥åˆ¤æ–­<code>touches.first</code>ï¼ˆ<code>touches</code>ä¸­çš„ç¬¬ä¸€ä¸ª<code>UITouch</code>å¯¹è±¡ï¼‰æ˜¯å¦æ˜¯ç©ºã€‚åœ¨<code>ViewController.swift</code>ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">touchesMoved</span><span class="params">(touches: Set&lt;UITouch&gt;, withEvent event: UIEvent?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> touch = touches.first &#123;</span><br><span class="line">        <span class="keyword">if</span> #available(iOS <span class="number">9.0</span>, *) &#123;</span><br><span class="line">            <span class="keyword">if</span> traitCollection.forceTouchCapability == <span class="type">UIForceTouchCapability</span>.<span class="type">Available</span> &#123;</span><br><span class="line">                <span class="comment">// 3D Touch capable</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ª<code>if</code>åˆ¤æ–­ä¸­ï¼Œè¿˜éœ€è¦æ·»åŠ åˆ¤æ–­å½“å‰è®¾å¤‡æ˜¯å¦æ”¯æŒ 3D Touch çš„ä»£ç ã€‚å¦‚æœä½ åªæ˜¯åšæ¥ç©ï¼Œé‚£å°±æ²¡å¿…è¦éªŒè¯ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ˜¯è¦ä¸Šæ¶çš„ Appï¼Œé‚£å°±å¿…é¡»è¦åˆ¤æ–­ï¼Œæ¯•ç«Ÿåƒ iPhone6 è¿™äº›æ—§è®¾å¤‡ä¸æ”¯æŒ 3D Touchã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘è¿˜ä½¿ç”¨äº†<code>#available</code>è¯­å¥ï¼ˆSwift 2.0ï¼‰å¯¹å½“å‰ç³»ç»Ÿæ˜¯å¦æ˜¯ iOS9+ åšäº†åˆ¤æ–­ã€‚ï¼ˆå¦‚æœä½ æƒ³å­¦ä¹ æ›´å¤š Swift 2.0 ç›¸å…³çš„çŸ¥è¯†ï¼Œæˆ‘å°±æ›´åŠ æ¨èä½ é˜…è¯»è¿™ç¯‡æ–‡ç« äº†ã€‚ï¼‰åŒæ ·ï¼Œå¦‚æœä½ çš„ç¼–è¯‘ç¯å¢ƒæ˜¯ iOS9.0+ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ¤æ–­å¯ä»¥çœç•¥ã€‚</p>
<p>è¦å¾—åˆ°æŒ‰å‹ç™¾åˆ†æ¯”ï¼Ÿé‚£å¤ªç®€å•äº†ï¼Œåªéœ€è¦ç”¨<code>force</code>å±æ€§é™¤ä»¥<code>maximumPossibleForce</code>å°±å¯ä»¥äº†ï¼ˆä¾‹å¦‚ï¼š<code>touch.maximumPossibleForce</code>ï¼‰ï¼Œ<code>maximumPossibleForce</code>è¡¨ç¤ºèƒ½æ‰¿å—çš„æœ€å¤§å‹åŠ›å€¼ã€‚ç„¶åï¼Œæ›´æ–°æ–‡æœ¬ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">touchesMoved</span><span class="params">(touches: Set&lt;UITouch&gt;, withEvent event: UIEvent?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> touch = touches.first &#123;</span><br><span class="line">        <span class="keyword">if</span> #available(iOS <span class="number">9.0</span>, *) &#123;</span><br><span class="line">            <span class="keyword">if</span> traitCollection.forceTouchCapability == <span class="type">UIForceTouchCapability</span>.<span class="type">Available</span> &#123;</span><br><span class="line">                <span class="comment">// 3D Touch capable</span></span><br><span class="line">                <span class="keyword">let</span> force = touch.force/touch.maximumPossibleForce</span><br><span class="line">                forceLabel.text = <span class="string">"<span class="subst">\(force)</span>% force"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ åœ¨ iPhone6s/6s Plus ä¸Šè·‘è¿™ä¸ªç¨‹åºï¼ŒæŒ‰å±å¹•æ—¶å°±èƒ½çœ‹åˆ°å‹åŠ›ç™¾åˆ†æ¯”äº†ã€‚ä½†æ˜¯ï¼Œå…¶å®æˆ‘ä»¬æ›´æƒ³çŸ¥é“æ”¾åœ¨ iPhone ä¸Šç‰©ä½“çš„é‡é‡ï¼Œè€Œä¸æ˜¯ç™¾åˆ†æ¯”ã€‚æ ¹æ®<a href="https://medium.com/swlh/turning-the-iphone-6s-into-a-digital-scale-f2197dc2b6e7" target="_blank" rel="external">Ryan McLeod</a>çš„ App å¯ä»¥çŸ¥é“ï¼Œä¼ æ„Ÿå™¨çš„è®¡é‡èŒƒå›´çš„æœ€å¤§å€¼æ˜¯ 385gã€‚å› æ­¤ï¼Œ<code>maximumPossibleForce</code>å°±ç›¸å½“äº 385gï¼ˆç›¸å½“äº3.8Nï¼‰ã€‚é€šè¿‡ç®€å•çš„è®¡ç®—ï¼Œå°±å¯ä»¥æŠŠå‹åŠ›ç™¾åˆ†æ¯”è½¬ä¸ºå…‹ã€‚éœ€è¦åšçš„ä»…ä»…æ˜¯ç”¨ç™¾åˆ†æ¯”*385ã€‚å¯¹äºé‡äº 385g çš„ç‰©ä½“ï¼Œå°±æŠŠ  label æ”¹æˆç±»ä¼¼äºâ€œ385+ gramsâ€è¿™æ ·çš„æ–‡æœ¬å¥½äº†ã€‚</p>
<p>åˆ°æ­¤ï¼Œ<code>touchesMoved</code>æ–¹æ³•ä¸­çš„ä»£ç æ›´æ–°ä¸ºï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">touchesMoved</span><span class="params">(touches: Set&lt;UITouch&gt;, withEvent event: UIEvent?)</span></span> &#123;        </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> touch = touches.first &#123;</span><br><span class="line">        <span class="keyword">if</span> #available(iOS <span class="number">9.0</span>, *) &#123;</span><br><span class="line">            <span class="keyword">if</span> traitCollection.forceTouchCapability == <span class="type">UIForceTouchCapability</span>.<span class="type">Available</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> touch.force &gt;= touch.maximumPossibleForce &#123;</span><br><span class="line">                    forceLabel.text = <span class="string">"385+ grams"</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> force = touch.force/touch.maximumPossibleForce</span><br><span class="line">                    <span class="keyword">let</span> grams = force * <span class="number">385</span></span><br><span class="line">                    <span class="keyword">let</span> roundGrams = <span class="type">Int</span>(grams)</span><br><span class="line">                    forceLabel.text = <span class="string">"<span class="subst">\(roundGrams)</span> grams"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åâ€¦ä½ å°±æœ‰äº†ä¸€ä¸ªç”µå­ç§¤ Appâ€¦</p>
<p><img src="http://www.appcoda.com/wp-content/uploads/2015/11/3d-touch-scale-app-492x1024.png" alt=""></p>
<p>è¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼šå½“ç‰©ä½“æˆ–è€…è§¦æ‘¸äº‹ä»¶ç»“æŸä¹‹åï¼Œæ–‡æœ¬æ²¡æœ‰é‡ç½®ã€‚ä½ å¯ä»¥å®ç°<code>touchesEnded</code>æ–¹æ³•æ¥è¾¾åˆ°æ•ˆæœï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">touchesEnded</span><span class="params">(touches: Set&lt;UITouch&gt;, withEvent event: UIEvent?)</span></span> &#123;</span><br><span class="line">    forceLabel.text = <span class="string">"0 gram"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸»å±å¹•ä¸Šçš„å¿«æ·æ“ä½œ">ä¸»å±å¹•ä¸Šçš„å¿«æ·æ“ä½œ</h2><p>å¦ä¸€ä¸ª 3D Touch çš„ç”¨æ³•æ˜¯ä¸»å±å¹•ä¸Šçš„å¿«æ·æ“ä½œã€‚å¿«æ·æ“ä½œå¯ä»¥è®©ç”¨æˆ·ä»å¿«æ·æ–¹å¼ç›´æ¥è·³è½¬åˆ° App çš„æŸä¸ªåœ°æ–¹ã€‚æŒ‰å‹ App icon å¿«æ·æ–¹å¼å°±ä¼šå‡ºç°ã€‚åœ¨ä»‹ç» 3D Touch çš„æ—¶å€™ï¼ŒTwitterã€Instagram ç­‰ App å°±å±•ç¤ºäº†è¿™ä¸ªæ–°ç‰¹æ€§ã€‚</p>
<p><img src="http://www.appcoda.com/wp-content/uploads/2015/11/3d-touch-quick-action.png" alt=""></p>
<p>è®©æˆ‘ä»¬æ¥ç»™åˆšæ‰çš„ç”µå­ç§¤ App æ·»åŠ ä¸€ä¸ªå¿«æ·æ“ä½œå§ï¼ˆæŠŠç™½è‰²èƒŒæ™¯æ¢æˆè“è‰²ï¼‰ã€‚è¦æ·»åŠ å¿«æ·æ“ä½œï¼Œå…ˆæ‰“å¼€å·¥ç¨‹ç›®å½•ä¸­çš„<code>info.plist</code>ï¼ˆåœ¨å¯¼èˆªæ ä¸Šç‚¹å‡»å·¥ç¨‹åï¼Œåœ¨<code>TARTGET</code>ä¸­æ‰¾åˆ°<code>info</code>é€‰é¡¹å¡ï¼‰ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæ·»åŠ <code>UIApplicationShortcutItems</code>æ•°ç»„ã€‚æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯åŒ…å«ä¸€ä¸ªå¿«æ·æ“ä½œé…ç½®çš„å­—å…¸ï¼š</p>
<ul>
<li><code>UIApplicationShortcutItemType</code>(å¿…å¡«)ï¼šå¿«æ·æ“ä½œçš„<strong>å”¯ä¸€</strong>æ ‡è¯†ç¬¦ï¼ˆString ç±»å‹ï¼‰ã€‚å»ºè®®å°† bundle ID æˆ–è€…å…¶ä»–å”¯ä¸€å­—ç¬¦ä¸²ä½œä¸ºæ ‡è¯†ç¬¦å‰ç¼€ã€‚</li>
<li><code>UIApplicationShortcutItemTitle</code>ï¼ˆå¿…å¡«ï¼‰ï¼šç›¸å½“äºå¿«æ·æ“ä½œçš„ titleï¼ˆString ç±»å‹ï¼‰ï¼Œç”¨æˆ·å¯ä»¥çœ‹åˆ°ã€‚ä¾‹å¦‚â€œæ˜¾ç¤ºæœ€è¿‘ä¸€å¼ ç…§ç‰‡â€ä¹‹ç±»çš„æ–‡æœ¬ã€‚</li>
<li><code>UIApplicationShortcutItemSubtitle</code>ï¼ˆå¯é€‰ï¼‰ï¼šå¿«æ·æ“ä½œçš„å‰¯æ ‡é¢˜ï¼ˆString ç±»å‹ï¼‰ã€‚ä¾‹å¦‚â€œæ˜¨å¤©æ‹æ‘„çš„ç…§ç‰‡â€ã€‚å¦‚æœä½ æƒ³è¦ç»™å¿«æ·æ“ä½œæ·»åŠ ä¸€ä¸ª iconï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ã€‚</li>
<li><code>UIApplicationShortcutItemIconType</code>ï¼ˆå¯é€‰ï¼‰ï¼šè¡¨ç¤ºä½ è¦é€‰æ‹©å“ªç§ç³»ç»Ÿå›¾æ ‡ä½œä¸ºå¿«æ·æ“ä½œçš„ iconï¼ˆString ç±»å‹ï¼‰ã€‚</li>
<li><code>UIApplicationShortcutItemIconFile</code>ï¼ˆå¯é€‰ï¼‰ï¼šè¡¨ç¤ºç»™å¿«æ·æ“ä½œæ·»åŠ è‡ªå®šä¹‰ iconï¼ˆString ç±»å‹ï¼‰ã€‚</li>
<li><code>UIApplicationShortcutItemUserInfo</code>ï¼ˆå¯é€‰ï¼‰ï¼šåœ¨å¿«æ·æ“ä½œäº¤äº’æ—¶ä¼ é€’çš„é¢å¤–ä¿¡æ¯ï¼ˆè¯‘è€…æ³¨ï¼šç±»ä¼¼äºé€šçŸ¥çš„ UserInfo å‚æ•°ï¼‰ï¼ˆDictionary ç±»å‹ï¼‰ã€‚</li>
</ul>
<p>åœ¨è¿™ä¸ªæ•°ç»„ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šç»™è‡ªå®šä¹‰çš„å¿«æ·æ“ä½œæ·»åŠ  4 ä¸ªé…ç½®ã€‚ç„¶åï¼Œä½ çš„<code>info.plist</code>æ–‡ä»¶çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·æ»´ï¼š</p>
<p><img src="http://www.appcoda.com/wp-content/uploads/2015/11/3d-touch-infoplist-600x102.png" alt=""></p>
<blockquote>
  <figure class="highlight autohotkey"><table><tr><td class="code"><pre><span class="line">&gt;   æ³¨æ„ï¼Œæˆ‘ç”¨åˆ°äº†<span class="escape">`$</span>(PRODUCT_BUNDLE_IDENTIFIER)<span class="escape">`æ¥</span>ä»£æ›¿<span class="escape">`c</span>om.appcoda.Scale<span class="escape">`ï¼ˆ</span>å°±æ˜¯æ›¿ä»£çš„ bundle IDï¼‰ã€‚è¿™æ˜¯å‡ºäºå®‰å…¨è€ƒè™‘ï¼šæ— è®ºåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘åœ¨<span class="escape">`G</span>eneral<span class="escape">`ä¸­</span>ä¿®æ”¹äº† bundle IDï¼Œé‚£æ•´ä¸ªå·¥ç¨‹çš„ bundle ID å°±éƒ½å˜äº†ï¼Œè¿™åŠ¿å¿…ä¼šç»™é¡¹ç›®å¸¦æ¥ä¸æ™“å¾—å½±å“ã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘å°±éœ€è¦æ‰‹åŠ¨å»ä¿®æ”¹æ¯ä¸ª bundle IDã€‚åœ¨<span class="escape">`i</span>nfo.plist<span class="escape">`é‡Œ</span>é¢å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®æ¯ä¸ª Bundle Identifier é…ç½®é¡¹éƒ½æ˜¯ç”¨çš„<span class="escape">`$</span>(PRODUCT_BUNDLE_IDENTIFIER)<span class="escape">`æ¥</span>è¡¨ç¤º bundle ID åœ¨å·¥ç¨‹ä¸­çš„è·¯å¾„ã€‚</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>æœ€åä¸€ä»¶äº‹ï¼Œå°±æ˜¯å®ç°ç”¨æˆ·è§¦å‘å¿«æ·æ“ä½œçš„å¤„ç†æµç¨‹ã€‚å¿«æ·æ–¹å¼éœ€è¦åœ¨<code>AppDelegate.swift</code>çš„<code>performActionForShortcutItem</code>æ–¹æ³•ä¸­å¤„ç†ã€‚å½“ä½¿ç”¨å¿«æ·æ“ä½œå¯åŠ¨æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚æ‰€ä»¥ï¼Œå®ç°è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶åœ¨æ–¹æ³•ä¸­å¤„ç†å¿«æ·æ“ä½œï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">application</span><span class="params">(application: UIApplication, performActionForShortcutItem shortcutItem: UIApplicationShortcutItem, completionHandler: <span class="params">(Bool)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Handle quick actions</span></span><br><span class="line">    completionHandler(handleQuickAction(shortcutItem))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•éœ€è¦è°ƒç”¨<code>completionHandler</code>ï¼Œå¹¶ä¼ å…¥å¸ƒå°”å€¼ï¼Œè¿™ä¸ªå¸ƒå°”å€¼å–å†³äºå¿«æ·æ“ä½œæˆåŠŸä¸å¦ã€‚è¿™é‡Œæˆ‘ä»¬å°è£…äº†ä¸€ä¸ª<code>handleQuickAction</code>æ–¹æ³•æ¥å¤„ç†å¿«æ·æ–¹å¼ã€‚å¦‚æœæœ‰å¤šä¸ªå¿«æ·æ“ä½œï¼Œæœ€å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨æšä¸¾ï¼Œ<code>UIApplicationShortcutItemType</code>ä½œä¸ºæšä¸¾çš„<code>rawValue</code>ï¼ˆè¯‘è€…æ³¨ï¼šå¯¹æšä¸¾ä¸ç†Ÿæ‚‰å¯ä»¥å‚è€ƒ<a href="http://wiki.jikexueyuan.com/project/swift/chapter2/08_Enumerations.html" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a>ï¼‰ã€‚å®šä¹‰ä¸€ä¸ªæšä¸¾ï¼Œå¹¶å®ç°<code>handleQuickAction</code>æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸­ä¿®æ”¹èƒŒæ™¯è‰²ä¸ºè“è‰²ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Shortcut</span>: <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> openBlue = <span class="string">"OpenBlue"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">handleQuickAction</span><span class="params">(shortcutItem: UIApplicationShortcutItem)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> quickActionHandled = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">let</span> type = shortcutItem.type.componentsSeparatedByString(<span class="string">"."</span>).last!</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> shortcutType = <span class="type">Shortcut</span>.<span class="keyword">init</span>(rawValue: type) &#123;</span><br><span class="line">        <span class="keyword">switch</span> shortcutType &#123;</span><br><span class="line">        <span class="keyword">case</span> .openBlue:</span><br><span class="line">            <span class="keyword">self</span>.window?.backgroundColor = <span class="type">UIColor</span>(red: <span class="number">151.0</span>/<span class="number">255.0</span>, green: <span class="number">187.0</span>/<span class="number">255.0</span>, blue: <span class="number">255.0</span>/<span class="number">255.0</span>, alpha: <span class="number">1.0</span>)</span><br><span class="line">            quickActionHandled = <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> quickActionHandled</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€åˆ‡éƒ½æ˜¯è¿™ä¹ˆç®€å•ã€‚ç°åœ¨æŠŠç¨‹åºè·‘èµ·æ¥ï¼Œä½¿ç”¨å¿«æ·æ“ä½œæ¥å¯åŠ¨ Appï¼Œå°±å¯ä»¥çœ‹åˆ°èƒŒæ™¯å·²ç»æ˜¯è“è‰²äº†ã€‚</p>
<p><img src="http://www.appcoda.com/wp-content/uploads/2015/11/3d-touch-scale-blue.png" alt=""></p>
<h2 id="è¿˜æœ‰ä¸€ä»¶äº‹">è¿˜æœ‰ä¸€ä»¶äº‹</h2><p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ä½ åˆ«å¿˜äº†â€¦åœ¨ç¨‹åºå¯åŠ¨é¡ºåºæ–¹é¢ï¼Œ<strong>å¯åŠ¨</strong>ç¨‹åºå’Œä½¿ç”¨å¿«æ·æ“ä½œ<strong>å”¤é†’</strong>æ˜¯æœ‰åŒºåˆ«çš„ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œç¨‹åºå¯åŠ¨ä¼šè°ƒç”¨<code>willFinishLaunchingWithOptions</code>å’Œ<code>didFinishLaunchingWithOptions</code>æ–¹æ³•ã€‚ä½†æ˜¯å½“ä½¿ç”¨å¿«æ·æ“ä½œå”¤é†’æ—¶ï¼Œåªä¼šè§¦å‘<code>performActionForShortcutItem</code>æ–¹æ³•ï¼ˆè¯‘è€…æ³¨ï¼šè¿™å°±æ„å‘³ç€ï¼Œä½¿ç”¨å¿«æ·æ“ä½œæ¥<strong>å¯åŠ¨</strong>ä¼šèµ°ä¸‰ä¸ªæ–¹æ³•ï¼Œè€Œä½¿ç”¨å¿«æ·æ“ä½œ<strong>å”¤é†’</strong>åªä¼šèµ°ä¸€ä¸ªï¼Œå…·ä½“çš„æ–¹æ³•åˆ—è¡¨å¦‚ä¸‹å›¾ï¼‰ã€‚</p>
<p><img src="http://www.appcoda.com/wp-content/uploads/2015/11/3d-touch-quickaction-methods.png" alt=""></p>
<p>å¦‚æœä½ å›å¤´çœ‹<code>didFinishLaunchingWithOptions</code>æ–¹æ³•ï¼Œä¼šå‘ç°é‡Œé¢æˆ‘å†™äº†ä¸€è¡Œè®¾ç½®èƒŒæ™¯è‰²ä¸ºç™½è‰²çš„ä»£ç ã€‚è¿™ä¸ªæ˜¯åœ¨ç›´æ¥å¯åŠ¨ç¨‹åºæ—¶ç”¨çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">application</span><span class="params">(application: UIApplication, didFinishLaunchingWithOptions launchOptions:</span><br><span class="line">    [NSObject: AnyObject]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="comment">// Override point for customization after application launch.</span></span><br><span class="line">    <span class="keyword">self</span>.window?.backgroundColor = <span class="type">UIColor</span>.whiteColor()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é—®é¢˜æ¥äº†ï¼šå½“ä½¿ç”¨å¿«æ·æ“ä½œå”¤é†’ç¨‹åºæ—¶ï¼Œ<code>willFinish</code>ï¼Œ<code>didFinish</code>å’Œ<code>performActionForShortcutItem</code>éƒ½ä¼šè¢«è°ƒç”¨ã€‚æ‰€ä»¥èƒŒæ™¯è‰²ä¼šå…ˆè®¾ç½®æˆç™½è‰²ï¼Œæ¥ç€åˆè¢«è®¾ç½®æˆäº†è“è‰²ã€‚æ˜¾ç„¶ä½ ä¸æƒ³åœ¨ä½¿ç”¨å¿«æ·æ“ä½œå¯åŠ¨æ—¶ï¼ŒèƒŒæ™¯è‰²è¢«è®¾ç½®æˆç™½è‰²ã€‚</p>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨<code>didFinishLaunchingWithOptions</code>æ–¹æ³•çš„å®ç°ä¸­æ·»åŠ æ¡ä»¶åˆ¤æ–­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">application</span><span class="params">(application: UIApplication, didFinishLaunchingWithOptions launchOptions:</span><br><span class="line">    [NSObject: AnyObject]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"didFinishLaunchingWithOptions called"</span>)</span><br><span class="line">    <span class="keyword">var</span> isLaunchedFromQuickAction = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check if it's launched from Quick Action</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> shortcutItem = launchOptions?[<span class="type">UIApplicationLaunchOptionsShortcutItemKey</span>] <span class="keyword">as</span>? <span class="type">UIApplicationShortcutItem</span> &#123;</span><br><span class="line"></span><br><span class="line">        isLaunchedFromQuickAction = <span class="literal">true</span></span><br><span class="line">        <span class="comment">// Handle the sortcutItem</span></span><br><span class="line">        handleQuickAction(shortcutItem)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.window?.backgroundColor = <span class="type">UIColor</span>.whiteColor()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Return false if the app was launched from a shortcut, so performAction... will not be called.</span></span><br><span class="line">    <span class="keyword">return</span> !isLaunchedFromQuickAction</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡åˆ¤æ–­å¯é€‰å€¼çš„<code>UIApplicationLaunchOptionsShortcutItemKey</code>å¾—åˆ°ç”¨æˆ·æ˜¯å¦æ˜¯é€šè¿‡å¿«æ·æ“ä½œå¯åŠ¨ã€‚<code>UIApplicationShortcutItem</code>å¯ä»¥ä½œä¸ºå¯é€‰å€¼çš„ç±»å‹ã€‚å¦‚æœç¨‹åºæ˜¯é€šè¿‡å¿«æ·æ“ä½œå¯åŠ¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨<code>handleQuickAction</code>æ–¹æ³•å°†èƒŒæ™¯è‰²æ”¹ä¸ºè“è‰²ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬å·²ç»åœ¨<code>didFinishLaunchingWithOption</code>æ–¹æ³•ä¸­è°ƒç”¨äº†<code>handleQuickAction</code>ï¼Œæ‰€ä»¥æ²¡å¿…è¦å†åœ¨<code>performActionForShortcutItem</code>æ–¹æ³•ä¸­è°ƒç”¨ä¸€æ¬¡ã€‚æ‰€ä»¥æœ€åæˆ‘ä»¬è¿”å›äº†ä¸€ä¸ª<code>false</code>ï¼Œå‘Šè¯‰ç³»ç»Ÿä¸è¦å†å»è°ƒç”¨<code>performActionForShortcutItem</code>æ–¹æ³•ã€‚</p>
<p>å†æ¬¡è¿è¡Œç¨‹åºï¼å®Œç¾ï¼</p>
<h2 id="æœ€å">æœ€å</h2><p>3D Touch æ˜¯ç»™ç¨‹åºæ·»åŠ å¦ä¸€ç§äº¤äº’æ–¹å¼çš„å¥½æ–¹æ³•ã€‚ä½†æ˜¯ä½ è¿˜æ˜¯ä¸è¦å¿˜äº†ï¼Œç›®å‰è¿˜ä¸æ˜¯æ‰€æœ‰è®¾å¤‡éƒ½æ”¯æŒ 3D Touchã€‚</p>
<p>é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œä½ åº”è¯¥èƒ½ç»™ä½ çš„ App æ·»åŠ å¿«æ·æ“ä½œï¼Œä¹Ÿèƒ½è®¡é‡æŒ‰å‹åŠ›åº¦äº†ã€‚</p>
<p>é¡ºä¾¿ï¼Œä½ å¯ä»¥åœ¨<a href="https://www.dropbox.com/s/yf8nkupi9yt01hk/ScaleFinal.zip?dl=0" target="_blank" rel="external">è¿™é‡Œ</a>ä¸‹è½½ç¨‹åºçš„æœ€ç»ˆç‰ˆã€‚åŒæ ·ï¼Œæ¬¢è¿å¤§å®¶ç•™è¨€ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šMaxime Defauwï¼Œ<a href="http://www.appcoda.com/3d-touch-tutorial/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015/11/09<br>è¯‘è€…ï¼š<a href="http://www.brighttj.com">saitjr</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>éšç€ iPhone6s ä¸ 6s plus çš„åˆ°æ¥ï¼Œè‹¹æœç»™æˆ‘ä»¬å±•ç°äº†ä¸€ç§å…¨æ–°çš„äº¤äº’æ–¹å¼ï¼šé‡æŒ‰æ‰‹åŠ¿ã€‚ä½ å¯èƒ½çŸ¥é“ï¼Œè¿™ä¸ªç‰¹æ€§å·²ç»åœ¨ Apple Watch å’Œ MacBook ä¸Šæ¨å‡ºäº†ï¼Œä¸è¿‡é‚£æ—¶å« Force Touchï¼Œå°±æ˜¯å­—é¢ä¸Šçš„æ„æ€ï¼Œç»™ç”¨æˆ·çš„äº¤äº’æ·»åŠ ä¸€ç§æ–°çš„ç»´åº¦ã€‚</p>
<p>å¦‚æœä½ å¾ˆå¥½å¥‡ iPhone çš„ Force Touch ä¸ºå•¥è¦æ›´åä¸º 3D Touchï¼Œé‚£å‘Šè¯‰ä½ å§ï¼Œyouâ€™re not aloneï¼ˆè¯‘è€…æ³¨ï¼šè¯·ç”¨ MJ çš„è°ƒå­å”±å‡ºæ¥â€¦ï¼‰ã€‚ä¸ä¹…å‰ï¼Œä¹‹å‰ä¹Ÿå¯¹è¿™åå­—çº ç»“ä¸å·²çš„ Craig Federighiï¼ˆè¯‘è€…æ³¨ï¼šApple é«˜çº§å‰¯æ€»è£ï¼‰ä»‹ç»äº†è¿™ä¸ªæ–°ç‰¹æ€§ï¼Œç¬¬ä¸€æ¡å¾®åšå°±è¿™æ ·äº§ç”Ÿäº†ã€‚ä¹Ÿä¸çŸ¥é“ Force Touch è¿™åå­—æœ‰å•¥ä¸å¥½çš„ï¼Œå°±å› ä¸ºæœ‰å¤ªå¤šæ˜Ÿçƒå¤§æˆ˜çš„æ¢—ï¼Ÿï¼ˆè¯‘è€…æ³¨ï¼šå…¶å®æˆ‘ä¸çŸ¥é“è¿™æ¢—â€¦ï¼‰ï¼ˆæ ¡å¯¹æ³¨ï¼šè¯‘è€…æ˜¯ä¸ªå¦¹å­ï¼‰ï¼ˆå®šç¨¿æ³¨ï¼šè¿˜æ˜¯å•èº«ï¼‰</p>]]>
    
    </summary>
    
      <category term="AppCoda" scheme="http://swiftggteam.github.io/tags/AppCoda/"/>
    
      <category term="Swift å…¥é—¨" scheme="http://swiftggteam.github.io/categories/Swift-%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[WatchConnectivityï¼šé€šè¿‡ç”¨æˆ·ä¿¡æ¯å…±äº«æ‰€æœ‰æ•°æ®]]></title>
    <link href="http://swiftggteam.github.io/2015/11/18/watchconnectivity-user-info/"/>
    <id>http://swiftggteam.github.io/2015/11/18/watchconnectivity-user-info/</id>
    <published>2015-11-17T16:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šNatasha The Robotï¼Œ<a href="http://natashatherobot.com/watchconnectivity-user-info/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-21<br>è¯‘è€…ï¼š<a href="http://daizi.me" target="_blank" rel="external">å°è¢‹å­</a>ï¼›æ ¡å¯¹ï¼š<a href="http://weibo.com/xiaoxxiao" target="_blank" rel="external">åƒå¶çŸ¥é£</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>åœ¨çœ‹è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œç¡®è®¤ä½ å·²ç»çœ‹è¿‡ä¹‹å‰å‘å¸ƒçš„å‡ ç¯‡ WatchOS 2 çš„æ–‡ç« ï¼š</p>
<ul>
<li><a href="http://natashatherobot.com/watchos-2-hello-world/" target="_blank" rel="external">WatchOS 2: Hello, World</a>(<a href="http://swift.gg/2015/10/15/watchos-2-hello-world/" target="_blank" rel="external">è¯‘æ–‡é“¾æ¥</a>)</li>
<li><a href="http://natashatherobot.com/watchconnectivity-introduction-say-goodbye-to-the-spinner/" target="_blank" rel="external">WatchConnectivity Introduction: Say Goodbye To The Spinner</a>(<a href="http://swift.gg/2015/11/03/watchconnectivity-introduction-say-goodbye-to-the-spinner/" target="_blank" rel="external">è¯‘æ–‡é“¾æ¥</a>)</li>
<li><a href="http://natashatherobot.com/watchconnectivity-say-hello-to-wcsession/" target="_blank" rel="external">WatchConnectivity: Say Hello to WCSession</a>(<a href="http://swift.gg/2015/11/02/watchconnectivity-say-hello-to-wcsession/" target="_blank" rel="external">è¯‘æ–‡é“¾æ¥</a>)</li>
</ul>
<p>é€šè¿‡ User Info å®ç°åå°æ•°æ®ä¼ è¾“åº”è¯¥åœ¨ä½ ç¡®ä¿æ‰€æœ‰æ•°æ®è¢«ä¼ è¾“çš„æƒ…å†µä¸‹ï¼ˆä¸ä»…ä»…åƒ<a href="http://natashatherobot.com/watchconnectivity-application-context/" target="_blank" rel="external">Application Context</a>ï¼‰ã€‚ç”¨æˆ·ä¿¡æ¯æ•°æ®æ˜¯åœ¨FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰é˜Ÿåˆ—ä¸­æ’é˜Ÿä¼ è¾“çš„ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰ä¸œè¥¿è¢«é‡å†™ã€‚</p>
<a id="more"></a>
<p>ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯åœ¨çŸ­ä¿¡åº”ç”¨ä¸­ä½¿ç”¨å®ƒ â€”â€” æœ€åä¸€æ¡ä¿¡æ¯è¦ç¡®ä¿èƒ½çœ‹åˆ°å®Œæ•´å¯¹è¯å’Œä¸Šä¸‹æ–‡çš„é‡è¦éƒ¨åˆ†ã€‚äº¦æˆ–è€…å¦‚æœç”¨æˆ·æ›´æ–°äº†ä»–ä»¬æ–‡ä»¶ä¿¡æ¯çš„ä¸€å°éƒ¨åˆ†ï¼Œåˆ™ä»–ä»¬çš„ä¸ªäººä¿¡æ¯å’Œæ‰€æœ‰çš„ä¿®æ”¹åº”è¯¥è¢«åŒæ­¥åˆ° Watch æ–‡ä»¶ã€‚</p>
<p>åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘å°†ä¼šæ„å»ºä¸€ä¸ªé£Ÿç‰© emoji ï¼ˆè¡¨æƒ…ç¬¦å·ï¼‰ç¤¾äº¤åº”ç”¨ï¼Œå› ä¸ºæˆ‘æ˜¯ä¸ªåƒè´§ï¼Œå¹¶ä¸”æˆ‘å–œæ¬¢ğŸ¦ï¼</p>
<p>å¦å¤–ï¼Œè¿™ä¸ªåº”ç”¨å¯ä»¥æˆä¸ºä¸€ä¸ªåŸºäºé£Ÿå“æ‚è´§åº—å±•ç¤ºçš„ Apple Watch åº”ç”¨ â€”â€” ä½ åœ¨æ‰‹æœºä¸Šé€‰æ‹©æ‰“ç®—è´­ä¹°çš„é£Ÿç‰© emoji ï¼Œç„¶åè·³è½¬åˆ°åº”ç”¨ä¸Šï¼Œè¿™æ ·ä½ å°±å¥½åƒåœ¨é£Ÿå“æ‚è´§åº—ä¸Šæµè§ˆå•†å“äº†ï¼</p>
<p><img src="/img/articles/watchconnectivity-user-info/Screen-Shot-2015-10-21-at-5.16.42-AM.png1447813695.0476735" alt=""></p>
<h2 id="å…è´£å£°æ˜">å…è´£å£°æ˜</h2><p>å¯¹äºè¿™ä¸ªåº”ç”¨éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œæˆ‘å°†ä¼šå†™å¾ˆå¤šæŠ½è±¡çš„æ•°æ®æ›´æ–°å±‚ç”¨äºæ•´ä¸ªåº”ç”¨ï¼Œå› ä¸º UI ä¸­çš„å¤šä¸ªåœ°æ–¹éœ€è¦æœ‰æ•°æ®æºæ›´æ–°ï¼Œæ‰€ä»¥åœ¨ç¤ºä¾‹åº”ç”¨ä¸­å°†ä¼šè¿‡åº¦è®¾è®¡ã€‚</p>
<p>æˆ‘åŒæ ·å°è¯•äº†ä¸åŒçš„æ¶æ„ï¼Œå°¤å…¶æ˜¯ Swiftï¼Œæ‰€ä»¥å¦‚æœä½ çŸ¥é“å¦‚ä½•åœ¨ Swift ä¸­æ›´å¥½åœ°æŠ½è±¡æ•°æ®å±‚ï¼Œè¯·åœ¨è¯„è®ºä¸­æå‡ºã€‚</p>
<h2 id="æ­¥éª¤">æ­¥éª¤</h2><p>åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘å‡è®¾ä½ å·²ç»çŸ¥é“å¦‚ä½•åœ¨<strong> Xcode åˆ›å»ºä¸€ä¸ªç®€å•çš„å•è§†å›¾åº”ç”¨</strong>ï¼Œä»¥åŠåˆ›å»ºä¸€ä¸ªç®€å•çš„<strong>é£Ÿç‰© Emoji åˆ—è¡¨çš„è¡¨è§†å›¾</strong>ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ª <a href="https://github.com/NatashaTheRobot/WatchConnectivityUserInfoDemo/blob/master/WCUserInfoDemo/FoodSelectionViewController.swift" target="_blank" rel="external">FoodSelectionViewController</a> ã€‚</p>
<p>åŒæ ·åœ°ï¼Œæˆ‘ä¹Ÿå‡è®¾ä½ çŸ¥é“å¦‚ä½•<strong>åˆ›å»ºä¸€ä¸ª Watch åº”ç”¨å¹¶ä¸”åœ¨ Interface.storyboard ä¸­åšè¿‡åŸºæœ¬çš„æ ·å¼</strong>ã€‚å¦‚æœä½ éœ€è¦å¸®åŠ©ï¼Œè¯·æŸ¥çœ‹<a href="http://natashatherobot.com/watchos-2-hello-world/" target="_blank" rel="external">WatchOS 2: Hello, World tutorial</a> å’Œ <a href="http://natashatherobot.com/watchkit-create-table/" target="_blank" rel="external">WatchKit: Letâ€™s Create a Table tutorial</a>.</p>
<p>æœ€åï¼Œä½ éœ€è¦çŸ¥é“å¦‚ä½•åˆ›å»ºåŸºç¡€çš„ç”¨äºç®¡ç† <code>WCSession</code> çš„å•ä¾‹ï¼Œä»¥åŠåœ¨ <code>AppleDelegate</code> ä¸­çš„<code>application:didFinishLaunchingWithOptions</code>å’Œåœ¨Watch æ‰©å±•ä¸­<code>ExtensionDelegate</code> çš„<code>applicationDidFinishLaunching</code>ä¸­å¯åŠ¨å®ƒã€‚å¦‚æœä½ ä¸æ¸…æ¥šï¼Œè¯·æŸ¥çœ‹ <a href="http://natashatherobot.com/watchconnectivity-say-hello-to-wcsession/" target="_blank" rel="external">WatchConnectivity: Say Hello to WCSession tutorial</a>ã€‚</p>
<p>ä½ çš„ iOS åº”ç”¨çœ‹èµ·æ¥åº”è¯¥åƒè¿™æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// in your iOS app</span></span><br><span class="line"><span class="keyword">import</span> WatchConnectivity</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WatchSessionManager</span>: <span class="title">NSObject</span>, <span class="title">WCSessionDelegate</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> sharedManager = <span class="type">WatchSessionManager</span>()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> session: <span class="type">WCSession</span>? = <span class="type">WCSession</span>.isSupported() ? <span class="type">WCSession</span>.defaultSession() : <span class="literal">nil</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> validSession: <span class="type">WCSession</span>? &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// paired - the user has to have their device paired to the watch</span></span><br><span class="line">        <span class="comment">// watchAppInstalled - the user must have your watch app installed</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Note: if the device is paired, but your watch app is not installed</span></span><br><span class="line">        <span class="comment">// consider prompting the user to install it for a better experience</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> session = session <span class="keyword">where</span> session.paired &amp;&amp; session.watchAppInstalled &#123;</span><br><span class="line">            <span class="keyword">return</span> session</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">startSession</span><span class="params">()</span></span> &#123;</span><br><span class="line">        session?.delegate = <span class="keyword">self</span></span><br><span class="line">        session?.activateSession()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å’Œåœ¨ Watch åº”ç”¨ä¸­è¿™æ ·çš„ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// in your WatchKit Extension</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> WatchConnectivity</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WatchSessionManager</span>: <span class="title">NSObject</span>, <span class="title">WCSessionDelegate</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> sharedManager = <span class="type">WatchSessionManager</span>()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> session: <span class="type">WCSession</span> = <span class="type">WCSession</span>.defaultSession()</span><br><span class="line">    </span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">startSession</span><span class="params">()</span></span> &#123;</span><br><span class="line">        session.delegate = <span class="keyword">self</span></span><br><span class="line">        session.activateSession()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œå¦‚æœä½ éœ€è¦é¢å¤–çš„æç¤ºï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ª <a href="https://github.com/NatashaTheRobot/WatchConnectivityUserInfoDemo" target="_blank" rel="external">æ•™ç¨‹çš„æºç </a>ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹æœ‰è¶£çš„éƒ¨åˆ†å§ ğŸš€ã€‚</p>
<h2 id="å‘é€æ•°æ®">å‘é€æ•°æ®</h2><p>åœ¨æˆ‘çš„åº”ç”¨ä¸­ï¼Œæ¯å½“ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªé£Ÿç‰©é¡¹ï¼Œéƒ½éœ€è¦åœ¨åå°ä¼ è¾“ç»™ Watch åº”ç”¨ã€‚è¿™æ„å‘³ç€<strong> iOS åº”ç”¨æ˜¯å‘é€è€…</strong>ã€‚æ˜¾ç„¶è¿™æ˜¯éå¸¸ç®€å•çš„ã€‚</p>
<p>åªéœ€æ‰©å±• iOS åº”ç”¨çš„ WatchSessionManager å•ä¾‹å»ä¼ è¾“ç”¨æˆ·æ•°æ®ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// in your iOS app</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: User Info</span></span><br><span class="line"><span class="comment">// use when your app needs all the data</span></span><br><span class="line"><span class="comment">// FIFO queue</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">WatchSessionManager</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Sender</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">transferUserInfo</span><span class="params">(userInfo: [String : AnyObject])</span></span> -&gt; <span class="type">WCSessionUserInfoTransfer</span>? &#123;</span><br><span class="line">        <span class="keyword">return</span> validSession?.transferUserInfo(userInfo)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ç°åœ¨ï¼Œå½“ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªé£Ÿç‰©çš„ cellï¼Œä½ åªéœ€ç®€å•åœ°è°ƒç”¨ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// FoodSelectionViewController.swift</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FoodSelectionViewController</span>: <span class="title">UITableViewController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> food = [<span class="string">"ğŸ¦"</span>, <span class="string">"ğŸ®"</span>, <span class="string">"ğŸ¤"</span>,<span class="string">"ğŸ‰"</span>, <span class="string">"ğŸ¨"</span>, <span class="string">"ğŸ"</span>, <span class="string">"ğŸŒ"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸš"</span>, <span class="string">"ğŸ“"</span>, <span class="string">"ğŸª"</span>, <span class="string">"ğŸ•"</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Table Data Source methods truncated</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// MARK: Table view delegate</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath)</span></span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> foodItem = food[indexPath.row]</span><br><span class="line">        <span class="type">WatchSessionManager</span>.sharedManager.transferUserInfo([<span class="string">"foodItem"</span> : foodItem])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°±æ˜¯é…±ç´«ï¼å·²é€‰æ‹©çš„é£Ÿç‰©é¡¹å°±åœ¨ FIFO é˜Ÿåˆ—ä¸­äº†ï¼Œå¹¶ä¸”å°†ä¼šå‘é€ç»™ Watch åº”ç”¨ï¼</p>
<h2 id="æ¥æ”¶æ•°æ®">æ¥æ”¶æ•°æ®</h2><p><strong>ç°åœ¨ Watch åº”ç”¨å¿…é¡»æ¥æ”¶æ•°æ®</strong>ã€‚è¿™ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦å®ç°<code>WCSessionDelegate</code>ä¸­çš„<code>session:didReceiveUserInfo:</code>æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// in your WatchKit Extension</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: User Info</span></span><br><span class="line"><span class="comment">// use when your app needs all the data</span></span><br><span class="line"><span class="comment">// FIFO queue</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">WatchSessionManager</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Receiver</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">session</span><span class="params">(session: WCSession, didReceiveUserInfo userInfo: [String : AnyObject])</span></span> &#123;</span><br><span class="line">        <span class="comment">// handle receiving user info</span></span><br><span class="line">        <span class="comment">// this will be filled in in the Updating Data section below</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ›´æ–°æ•°æ®">æ›´æ–°æ•°æ®</h2><p>ç°åœ¨ä½ æ¥æ”¶åˆ°äº†æ•°æ®ï¼Œæˆ‘ä»¬å¼€å§‹å¤„ç†æœ€æ£˜æ‰‹çš„éƒ¨åˆ†ã€‚å°è¯•å»æ›´æ–°ä½ çš„ Watch æ‰©å±•çš„ <code>InterfaceController</code> ä»¥åŠå…¶ä»–è§†å›¾æˆ–è€…æ•°æ®æºã€‚ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨ <code>NSNotificationCenter</code>ï¼Œä½†æ˜¯æˆ‘ä¼šå°è¯•ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ã€‚è¿™ä¸ªéƒ¨åˆ†å¯ä»¥ç”¨å¤šç§æ–¹æ³•æ¥åšï¼Œå¹¶ä¸”å¯¹äºè¿™ä¸ªåº”ç”¨æ¥è¯´æœ‰ç‚¹è¿‡åº¦è®¾è®¡ï¼Œå› æ­¤è¦å…ˆè¯´æ¸…æ¥šã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬æ­£åœ¨å†™ Swiftï¼Œæˆ‘çš„ç›®æ ‡æ˜¯å°½é‡ä½¿ç”¨å€¼ç±»å‹æ¨¡å‹ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæ­£å¦‚æˆ‘åœ¨ <code>WCSession</code> ä¸­æ‰€æåˆ°çš„ï¼Œ<code>WCSessionDelegate</code>åªèƒ½åœ¨ä¸€ä¸ª<code>NSObject</code> ä¸­å®ç°ã€‚å˜é€šä¸€ä¸‹ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªå¯ä»¥æºå¸¦ç”¨æˆ·ä¿¡æ¯æ•°æ®çš„ <code>DataSource</code> å€¼ï¼Œç„¶åæŠŠå®ƒè½¬æ¢ä¸ºå¯ä¾›å¤šä¸ªäº¤äº’æ§åˆ¶å™¨ä½¿ç”¨çš„å¯å˜çš„ä¸œè¥¿ã€‚å› ä¸ºç”¨æˆ·ä¿¡æ¯æ˜¯åœ¨ä¸€ä¸ª FIFO é˜Ÿåˆ—é¡ºåºæ¥æ”¶çš„ï¼Œ<code>DataSource</code> åº”è¯¥æŒç»­è¿½è¸ªåœ¨é˜Ÿåˆ—ä¸­æ¥æ”¶çš„æ•°æ®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">   <span class="comment">// in your WatchKit Extension</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">DataSource</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> items: [<span class="type">Item</span>]</span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="type">Food</span>(<span class="type">String</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="type">Unknown</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">init</span>(items: [<span class="type">Item</span>] = [<span class="type">Item</span>]()) &#123;</span><br><span class="line">        <span class="keyword">self</span>.items = items</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">insertItemFromData</span><span class="params">(data: [String : AnyObject])</span></span> -&gt; <span class="type">DataSource</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> updatedItems: [<span class="type">Item</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> foodItem = data[<span class="string">"foodItem"</span>] <span class="keyword">as</span>? <span class="type">String</span> &#123;</span><br><span class="line">            updatedItems = [.<span class="type">Food</span>(foodItem)] + items</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            updatedItems = [.<span class="type">Unknown</span>] + items</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">DataSource</span>(items: updatedItems)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘å¯ä»¥ç°åœ¨è®¾ç½®ä¸€ä¸ª protocol ï¼Œé€šè¿‡æ›´æ–°çš„æ•°æ®æºæ›´æ–°æ‰€æœ‰éœ€è¦çŸ¥é“æ•°æ®æ”¹å˜çš„éƒ¨åˆ†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// in your WatchKit Extension</span></span><br><span class="line"><span class="comment">//  WatchSessionManager.swift</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">DataSourceChangedDelegate</span> </span>&#123;</span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">dataSourceDidUpdate</span><span class="params">(dataSource: DataSource)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨è®©æˆ‘ä»¬è¿›å…¥æœ‰è¶£çš„éƒ¨åˆ†ï¼ä½ çš„<code>WatchSessionManager</code>å°†ä¼šä»¥æŸç§æ–¹å¼å»è¿½è¸ªæ‰€æœ‰çš„<code>dataSourceChangedDelegates</code>ã€‚è¿™å¯ä»¥é€šè¿‡ä¸€ä¸ªæ•°ç»„ä»¥åŠä¸€ç»„å¯ä»¥æ·»åŠ å’Œåˆ é™¤æ•°ç»„delegateçš„æ–¹æ³•å®ç°ã€‚<code>WatchSessionManager</code>è¿˜éœ€è¦æŒç»­è¿½è¸ªæœ€è¿‘çš„<code>DataSource</code>æ‹·è´ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨<code>DataSource</code>ä¸­çš„æ•°æ®åˆ›å»ºä¸€ä¸ªåŒ…å«æœ€æ–°æ•°æ®çš„<code>DataSource</code>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// in your WatchKit Extension</span></span><br><span class="line">   <span class="comment">//  WatchSessionManager.swift</span></span><br><span class="line">   </span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">WatchSessionManager</span>: <span class="title">NSObject</span>, <span class="title">WCSessionDelegate</span> </span>&#123;</span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">let</span> sharedManager = <span class="type">WatchSessionManager</span>()</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">       <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">let</span> session: <span class="type">WCSession</span> = <span class="type">WCSession</span>.defaultSession()</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">var</span> dataSource = <span class="type">DataSource</span>()</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">var</span> dataSourceChangedDelegates = [<span class="type">DataSourceChangedDelegate</span>]()</span><br><span class="line">   </span><br><span class="line">   <span class="func"><span class="keyword">func</span> <span class="title">startSession</span><span class="params">()</span></span> &#123;</span><br><span class="line">       session.delegate = <span class="keyword">self</span></span><br><span class="line">       session.activateSession()</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="func"><span class="keyword">func</span> <span class="title">addDataSourceChangedDelegate</span><span class="params">(delegate: T)</span></span> &#123;</span><br><span class="line">       dataSourceChangedDelegates.append(delegate)</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="func"><span class="keyword">func</span> <span class="title">removeDataSourceChangedDelegate</span><span class="params">(delegate: T)</span></span> &#123;</span><br><span class="line">       <span class="keyword">for</span> (index, dataSourceDelegate) <span class="keyword">in</span> dataSourceChangedDelegates.<span class="built_in">enumerate</span>() &#123;</span><br><span class="line">           <span class="keyword">if</span> <span class="keyword">let</span> dataSourceDelegate = dataSourceDelegate <span class="keyword">as</span>? <span class="type">T</span> <span class="keyword">where</span> dataSourceDelegate == delegate &#123;</span><br><span class="line">               dataSourceChangedDelegates.removeAtIndex(index)</span><br><span class="line">               <span class="keyword">break</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢å®ç°æ¥æ”¶ç”¨æˆ·ä¿¡æ¯çš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// in your WatchKit Extension</span></span><br><span class="line"><span class="comment">//  WatchSessionManager.swift</span></span><br><span class="line"><span class="comment">// MARK: User Info</span></span><br><span class="line"><span class="comment">// use when your app needs all the data</span></span><br><span class="line"><span class="comment">// FIFO queue</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">WatchSessionManager</span> </span>&#123;</span><br><span class="line"><span class="comment">// Receiver</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">session</span><span class="params">(session: WCSession, didReceiveUserInfo userInfo: [String : AnyObject])</span></span> &#123;</span><br><span class="line">    <span class="comment">// handle receiving user info</span></span><br><span class="line">    dispatch_async(dispatch_get_main_queue()) &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> dataSource = <span class="keyword">self</span>?.dataSource.insertItemFromData(userInfo) &#123;</span><br><span class="line">            <span class="keyword">self</span>?.dataSource = dataSource</span><br><span class="line">            <span class="keyword">self</span>?.dataSourceChangedDelegates.forEach &#123;</span><br><span class="line">                $<span class="number">0</span>.dataSourceDidUpdate(dataSource)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬åªéœ€è¦ç¡®ä¿æˆ‘ä»¬çš„<code>InterfaceController</code>ç»§æ‰¿äº†<code>DataSourceChangedDelegate</code>ï¼Œå¹¶ä¸”è¢«<code>WatchSessionManager</code>æŒç»­è¿½è¸ªï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">    <span class="comment">// in your WatchKit Extension</span></span><br><span class="line">    <span class="comment">//  InterfaceController.swift</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">InterfaceController</span>: <span class="title">WKInterfaceController</span>, <span class="title">DataSourceChangedDelegate</span> </span>&#123;</span><br><span class="line">    <span class="preprocessor">@IBOutlet</span> <span class="keyword">var</span> foodTable: <span class="type">WKInterfaceTable</span>!</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">awakeWithContext</span><span class="params">(context: AnyObject?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.awakeWithContext(context)</span><br><span class="line"></span><br><span class="line">        <span class="type">WatchSessionManager</span>.sharedManager.addDataSourceChangedDelegate(<span class="keyword">self</span>)</span><br><span class="line">        loadTableData(<span class="type">DataSource</span>())</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">didDeactivate</span><span class="params">()</span></span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// remove InterfaceController as a dataSourceChangedDelegate</span></span><br><span class="line">        <span class="comment">// to prevent memory leaks</span></span><br><span class="line">        <span class="type">WatchSessionManager</span>.sharedManager.removeDataSourceChangedDelegate(<span class="keyword">self</span>)</span><br><span class="line">        <span class="keyword">super</span>.didDeactivate()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// MARK: DataSourceUpdatedDelegate</span></span><br><span class="line">    <span class="comment">// update the table once the data is changed!</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">dataSourceDidUpdate</span><span class="params">(dataSource: DataSource)</span></span> &#123;</span><br><span class="line">        loadTableData(dataSource)</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">extension</span> <span class="title">InterfaceController</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="func"><span class="keyword">func</span> <span class="title">loadTableData</span><span class="params">(dataSource: DataSource)</span></span> &#123;</span><br><span class="line">        </span><br><span class="line">        foodTable.setNumberOfRows(dataSource.items.<span class="built_in">count</span>, withRowType: <span class="string">"FoodTableRowController"</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (index, item) <span class="keyword">in</span> dataSource.items.<span class="built_in">enumerate</span>() &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> row = foodTable.rowControllerAtIndex(index) <span class="keyword">as</span>? <span class="type">FoodTableRowController</span> &#123;</span><br><span class="line">                <span class="keyword">switch</span> item &#123;</span><br><span class="line">                <span class="keyword">case</span> .<span class="type">Food</span>(<span class="keyword">let</span> foodItem):</span><br><span class="line">                    row.foodLabel.setText(foodItem)</span><br><span class="line">                <span class="keyword">case</span> .<span class="type">Unknown</span>:</span><br><span class="line">                    row.foodLabel.setText(<span class="string">"Â¯\\_(ãƒ„)_/Â¯"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°±æ˜¯è¿™æ ·å•¦ï¼<br><a href="https://github.com/NatashaTheRobot/WatchConnectivityUserInfoDemo" target="_blank" rel="external">ä½ å¯ä»¥åœ¨Githubä¸ŠæŸ¥çœ‹å®Œæ•´æºä»£ç ï¼</a></p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šNatasha The Robotï¼Œ<a href="http://natashatherobot.com/watchconnectivity-user-info/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-21<br>è¯‘è€…ï¼š<a href="http://daizi.me">å°è¢‹å­</a>ï¼›æ ¡å¯¹ï¼š<a href="http://weibo.com/xiaoxxiao">åƒå¶çŸ¥é£</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>åœ¨çœ‹è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œç¡®è®¤ä½ å·²ç»çœ‹è¿‡ä¹‹å‰å‘å¸ƒçš„å‡ ç¯‡ WatchOS 2 çš„æ–‡ç« ï¼š</p>
<ul>
<li><a href="http://natashatherobot.com/watchos-2-hello-world/">WatchOS 2: Hello, World</a>(<a href="http://swift.gg/2015/10/15/watchos-2-hello-world/">è¯‘æ–‡é“¾æ¥</a>)</li>
<li><a href="http://natashatherobot.com/watchconnectivity-introduction-say-goodbye-to-the-spinner/">WatchConnectivity Introduction: Say Goodbye To The Spinner</a>(<a href="http://swift.gg/2015/11/03/watchconnectivity-introduction-say-goodbye-to-the-spinner/">è¯‘æ–‡é“¾æ¥</a>)</li>
<li><a href="http://natashatherobot.com/watchconnectivity-say-hello-to-wcsession/">WatchConnectivity: Say Hello to WCSession</a>(<a href="http://swift.gg/2015/11/02/watchconnectivity-say-hello-to-wcsession/">è¯‘æ–‡é“¾æ¥</a>)</li>
</ul>
<p>é€šè¿‡ User Info å®ç°åå°æ•°æ®ä¼ è¾“åº”è¯¥åœ¨ä½ ç¡®ä¿æ‰€æœ‰æ•°æ®è¢«ä¼ è¾“çš„æƒ…å†µä¸‹ï¼ˆä¸ä»…ä»…åƒ<a href="http://natashatherobot.com/watchconnectivity-application-context/">Application Context</a>ï¼‰ã€‚ç”¨æˆ·ä¿¡æ¯æ•°æ®æ˜¯åœ¨FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰é˜Ÿåˆ—ä¸­æ’é˜Ÿä¼ è¾“çš„ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰ä¸œè¥¿è¢«é‡å†™ã€‚</p>]]>
    
    </summary>
    
      <category term="Natasha The Robot" scheme="http://swiftggteam.github.io/tags/Natasha-The-Robot/"/>
    
      <category term="WatchOS 2" scheme="http://swiftggteam.github.io/categories/WatchOS-2/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Swift ä¸­çš„å‡½æ•°å¼ç¼–ç¨‹]]></title>
    <link href="http://swiftggteam.github.io/2015/11/17/functional-programming-in-swift/"/>
    <id>http://swiftggteam.github.io/2015/11/17/functional-programming-in-swift/</id>
    <published>2015-11-17T04:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šNatasha The Robotï¼Œ<a href="http://natashatherobot.com/functional-programming-in-swift/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015/11/13<br>è¯‘è€…ï¼š<a href="http://daizi.me" target="_blank" rel="external">å°è¢‹å­</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>Swift ä¸€ä¸ªå¼ºæœ‰åŠ›çš„è¯­è¨€ç‰¹æ€§å°±æ˜¯èƒ½å¤Ÿç”¨å¤šæ ·çš„å‡½æ•°å¼é£æ ¼å»ç¼–å†™ä»£ç ã€‚è¿™åœ¨ç¤¾åŒºçœ‹æ¥éå¸¸æ¿€åŠ¨äººå¿ƒã€‚</p>
<p>æˆ‘åœ¨å»å¹´å¹´åº•èŠ±è´¹äº†ä¸€äº›æ—¶é—´å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥å†™æ›´å¥½çš„ Swift ä»£ç ã€‚å› æ­¤ï¼Œæˆ‘éå¸¸æ¨èä½ ä»¬ä¹ŸèŠ±æ—¶é—´å»å­¦ä¹ ä¸€ä¸‹ï¼</p>
<p>å¦å¤–ï¼Œæˆ‘éå¸¸æ¨èæ¨èä½ ä»¬å»çœ‹ <a href="http://2014.funswiftconf.com/" target="_blank" rel="external">Functional Swift conference</a>ä¸Šçš„æ¯ä¸€ä¸ªè§†é¢‘ã€‚</p>
<p>æ‰€ä»¥åœ¨èŠ±äº†è¿™ä¹ˆå¤šæ—¶é—´åï¼Œæˆ‘æƒ³è¦æ€»ç»“ä¸€ä¸‹ä¸ªäººæœ‰å…³äºå‡½æ•°å¼ç¼–ç¨‹åœ¨ Swift åº”ç”¨çš„ä¸€äº›æ€è€ƒã€‚</p>
<a id="more"></a>
<h2 id="è·Ÿç€æ¦‚å¿µèµ°">è·Ÿç€æ¦‚å¿µèµ°</h2><p>å‡½æ•°å¼ç¼–ç¨‹æ˜¯ä»¤äººç”Ÿç•çš„ï¼Œè¿™è¦å½’å’äºå•å­ï¼ˆmonadsï¼‰å’Œ å‡½æ•°å­ï¼ˆfunctorsï¼‰ï¼ç„¶è€Œï¼Œä¸€æ—¦ä½ é¢†æ‚Ÿäº†å®ƒçš„æ ¸å¿ƒæ¦‚å¿µï¼Œé‚£ä¹ˆå‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ä¼šè¶…çº§ç®€å•ï¼š</p>
<blockquote>
<p>â€œå‡½æ•°å¼ç¼–ç¨‹æ˜¯ä¸€ä¸ªç¼–ç¨‹èŒƒä¾‹â€¦å®ƒæŠŠè®¡ç®—ä½œä¸ºæ•°å­¦å‡½æ•°çš„è¯„ä¼°ï¼Œå¹¶é¿å…æ”¹å˜çŠ¶æ€å’Œå¯å˜æ•°æ®ã€‚â€â€” <a href="https://en.wikipedia.org/wiki/Functional_programming" target="_blank" rel="external">ç»´åŸºç™¾ç§‘</a></p>
</blockquote>
<p>æ‰€ä»¥æ ¸å¿ƒå°±æ˜¯ä½ åº”è¯¥ç”¨æ•°å­¦çš„æ–¹å¼å»ç¼–å†™ä»£ç ã€‚ä½ çš„å‡½æ•°åº”è¯¥æœ‰æ¸…æ™°çš„è¾“å…¥å’Œè¾“å‡ºï¼Œå¹¶ä¸”ä¸ä¼šåƒå¯å˜å¯¹è±¡ä¸€æ ·æœ‰å…¨å±€å‰¯ä½œç”¨ã€‚è¿™å°±æ˜¯äº†ï¼</p>
<h2 id="é¿å…å¯å˜çŠ¶æ€">é¿å…å¯å˜çŠ¶æ€</h2><p>è¿™å’Œä¸Šè¿°çš„æ³¨æ„ç‚¹ç±»ä¼¼ã€‚å‡½æ•°å¼ç¼–ç¨‹è¦ç¼–å†™çš„æ˜¯æ²¡æœ‰å‰¯ä½œç”¨çš„æ•°å­¦ä»£ç ã€‚</p>
<p>åœ¨ Swift ä¸­ä½¿ç”¨ç»“æ„ä½“å’Œåè®®å¸®åŠ©ä½ é¿å…å¯å˜çŠ¶æ€ã€‚</p>
<p>æˆ‘æåº¦æ¨èè§‚çœ‹ <a href="https://twitter.com/andy_matuschak" target="_blank" rel="external">@andy_matuschak</a>çš„  <a href="https://realm.io/news/andy-matuschak-controlling-complexity/" target="_blank" rel="external">Controlling Complexity in Swift</a>ï¼Œè¿™å¯ä»¥è®©ä½ ç†è§£å¦‚ä½•å»å®ç°ä»¥åŠæœ€ç»ˆçš„ä»£ç ä¼šå¦‚ä½•åœ°å¼ºå¤§ã€‚</p>
<h2 id="å¯è¯»æ€§ç¬¬ä¸€">å¯è¯»æ€§ç¬¬ä¸€</h2><p>æˆ‘å‘ç°å¾ˆå¤šé«˜çº§çš„å‡½æ•°å¼ä»£ç ï¼Œé€šå¸¸ç”±äºäº”ä¸ªä»¥ä¸Šçš„ä¹ æƒ¯æ€§ç¼–ç¨‹è€Œå˜å¾—ç‰¹åˆ«éš¾ä»¥é˜…è¯»ã€‚å¦‚æœä½ éµä»å‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µï¼Œæœ‰å¾ˆå¤šæ–¹æ³•è®©ä½ çš„ä»£ç å˜å¾—æ›´æ¸…æ¥šã€‚</p>
<p>ä½†æ˜¯åœ¨ä»Šå¤©ç»“æŸä¹‹å‰ï¼Œè¿˜è¦å¤šè¯´ä¸€å¥ï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªå›¢é˜Ÿä¸­å·¥ä½œï¼Œæœ€é‡è¦çš„äº‹å°±æ˜¯è®©ä»£ç å¯è¯»æ€§æ›´å¼ºã€‚å¦‚æœä¸€ä¸ªå†…éƒ¨æˆ–è€…ä¸€ä¸ªæ–°çš„å¼€å‘è€…åŠ å…¥ä½ ä»¬çš„å›¢é˜Ÿï¼Œä»–ä»¬ä¼šä¸ä¼šå®Œå…¨è¿·å¤±äº†ï¼Ÿå¦‚æœä½ ä¸“æ³¨äºç¼–å†™æ˜“è¯»çš„ä»£ç ï¼ˆå–ä»£å¥½ç©å’ŒèŠ±å“¨çš„å†™æ³•ï¼‰ï¼Œä»–ä»¬å¯èƒ½ä¼šå¾ˆå¿«å°±æœ‰äº§å‡ºã€‚</p>
<p>è®°ä½ä¸€ç‚¹ï¼Œå¯è¯»æ€§çš„ä¼˜å…ˆçº§æ°¸è¿œæ¯”èŠ±å“¨çš„ä»£ç é«˜ï¼ˆé™¤éä½ çš„ç›®æ ‡å°±æ˜¯ç”¨ä¸€ä¸ªå¥½ç©çš„å‰¯ä½œç”¨å»å®ç°å¥½ç©å’ŒèŠ±å“¨çš„ç¨‹åºï¼‰ã€‚</p>
<h2 id="ä¸è¦å’Œ_framework_ä½œå¯¹">ä¸è¦å’Œ framework ä½œå¯¹</h2><p>å½“ç„¶ï¼Œåœ¨ iOS ç¼–ç¨‹ä¸­ï¼Œç”±äº Cocoa framework çš„å»ºç«‹å’Œç”¨æˆ·çš„è¾“å…¥è¾“å‡ºï¼Œæ²¡æœ‰å‰¯ä½œç”¨æ˜¾ç„¶æ˜¯ä¸å¯èƒ½çš„ï¼ˆåœ¨çº¯ç²¹çš„æ•°å­¦ä¸–ç•Œï¼Œç¡®å®å­˜åœ¨å®Œå…¨æ²¡æœ‰å¤–éƒ¨å‰¯ä½œç”¨ï¼Œä½†é‚£ä¸æ˜¯æˆ‘ä»¬ç”Ÿæ´»çš„ä¸–ç•Œï¼ï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªé€šç”¨çš„è½¬æ¢å™¨ï¼ˆformatterï¼‰ï¼ˆä¾‹å¦‚è´§å¸è½¬æ¢å™¨ï¼‰ï¼Œå¹¶ç”¨åœ¨ä»£ç ä¸­çš„ä¸€äº›åœ°æ–¹ï¼Œç”¨å•ä¾‹æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ã€‚ä½ è¿˜å¿…é¡»ä¸ºUI Layer ä½¿ç”¨ <code>UIViewControllers</code> ä»¥åŠ <code>UIViews</code>ã€‚æ€»æœ‰åŠæ³•å»è„±ç¦»ä½ çš„é€»è¾‘ï¼Œè¿›è€Œè®©å¾ˆå¥½çš„ä¸å¯å˜ç»„ä»¶å»å¸®åŠ©ä½ å¯å˜åŒ–è¿™äº›ä¸œè¥¿ï¼Œä½†æ˜¯ä¸è¦è¿‡ç«åœ°æŠŠ freamwork æ”¹å˜ä¸ºé¢ç›®å…¨éï¼ˆå¯è¯»ï¼Œä¸å¯è¯»ï¼‰çš„çŠ¶æ€ã€‚</p>
<h2 id="æ·±å…¥å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹">æ·±å…¥å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹</h2><p>å†æ¬¡å¼ºè°ƒï¼Œä½ ä¸åº”è¯¥æ‰§ç€äºåœ¨ä½ çš„ Swift ä»£ç ä¸­ä½¿ç”¨èŠ±å“¨çš„æŠ€å·§ï¼ˆé™¤éä½ åªæ˜¯ä¸ºäº†è¯•éªŒã€æˆ–è€…å¥½ç©ï¼‰ã€‚æˆ‘éå¸¸æ¨èæ·±å…¥å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ï¼Œä»è€Œç†è§£é‚£äº›é«˜çº§æ¦‚å¿µï¼Œå¹¶ä¸”æ›´å¥½åœ°åº”ç”¨åœ¨ä½ çš„ä»£ç ä¸­ã€‚</p>
<p>æ¨èé˜…è¯» <a href="https://www.objc.io/books/fpinswift/" target="_blank" rel="external">Functional Programming in Swift</a> ï¼è¿™é‡Œæœ‰<a href="http://natashatherobot.com/reading-functional-programming/" target="_blank" rel="external">æ›´å¤šçš„èµ„æº</a>å»å¸®åŠ©ä½ å¼€å§‹å­¦ä¹ ï¼</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šNatasha The Robotï¼Œ<a href="http://natashatherobot.com/functional-programming-in-swift/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015/11/13<br>è¯‘è€…ï¼š<a href="http://daizi.me">å°è¢‹å­</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>Swift ä¸€ä¸ªå¼ºæœ‰åŠ›çš„è¯­è¨€ç‰¹æ€§å°±æ˜¯èƒ½å¤Ÿç”¨å¤šæ ·çš„å‡½æ•°å¼é£æ ¼å»ç¼–å†™ä»£ç ã€‚è¿™åœ¨ç¤¾åŒºçœ‹æ¥éå¸¸æ¿€åŠ¨äººå¿ƒã€‚</p>
<p>æˆ‘åœ¨å»å¹´å¹´åº•èŠ±è´¹äº†ä¸€äº›æ—¶é—´å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥å†™æ›´å¥½çš„ Swift ä»£ç ã€‚å› æ­¤ï¼Œæˆ‘éå¸¸æ¨èä½ ä»¬ä¹ŸèŠ±æ—¶é—´å»å­¦ä¹ ä¸€ä¸‹ï¼</p>
<p>å¦å¤–ï¼Œæˆ‘éå¸¸æ¨èæ¨èä½ ä»¬å»çœ‹ <a href="http://2014.funswiftconf.com/">Functional Swift conference</a>ä¸Šçš„æ¯ä¸€ä¸ªè§†é¢‘ã€‚</p>
<p>æ‰€ä»¥åœ¨èŠ±äº†è¿™ä¹ˆå¤šæ—¶é—´åï¼Œæˆ‘æƒ³è¦æ€»ç»“ä¸€ä¸‹ä¸ªäººæœ‰å…³äºå‡½æ•°å¼ç¼–ç¨‹åœ¨ Swift åº”ç”¨çš„ä¸€äº›æ€è€ƒã€‚</p>]]>
    
    </summary>
    
      <category term="Natasha The Robot" scheme="http://swiftggteam.github.io/tags/Natasha-The-Robot/"/>
    
      <category term="Swift å…¥é—¨" scheme="http://swiftggteam.github.io/categories/Swift-%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[æ•è·ä¸Šä¸‹æ–‡ä¿¡æ¯]]></title>
    <link href="http://swiftggteam.github.io/2015/11/16/capturing-context-swiftlang/"/>
    <id>http://swiftggteam.github.io/2015/11/16/capturing-context-swiftlang/</id>
    <published>2015-11-16T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šErica Sadunï¼Œ<a href="http://ericasadun.com/2015/08/27/capturing-context-swiftlang/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-08-27<br>è¯‘è€…ï¼š<a href="https://github.com/chenmingbiao" target="_blank" rel="external">CMB</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao" target="_blank" rel="external">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>å‡è®¾ä½ æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªç±»å‹ï¼Œå½“æœ‰é”™è¯¯æ—¶å‘ç”Ÿæ—¶ä½ æƒ³è¦è¾“å‡ºå¼‚å¸¸å‘ç”Ÿæ—¶çš„ä¸Šä¸‹æ–‡ã€‚é€šå¸¸ä½ ä¼šä½¿ç”¨ä¸€äº›å†…ç½®çš„ç¼–è¯‘å™¨å…³é”®å­—ï¼š<code>__FUNCTION__</code> ï¼Œ <code>__LINE__</code> å’Œ <code>__FILE__</code> ï¼Œè¿™äº›å…³é”®è¯æä¾›äº†æœ‰å…³å‡½æ•°è°ƒç”¨è¯¦ç»†çš„æ–‡æœ¬æ’å€¼ï¼š</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">Error</span>: <span class="title">ErrorType</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> source: <span class="type">String</span>; <span class="keyword">let</span> reason: <span class="type">String</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(<span class="number">_</span> reason: <span class="type">String</span>, source: <span class="type">String</span> = <span class="keyword">__FUNCTION__</span>,</span><br><span class="line">        file: <span class="type">String</span> = <span class="keyword">__FILE__</span>, line: <span class="type">Int</span> = <span class="keyword">__LINE__</span>) &#123;</span><br><span class="line">            <span class="keyword">self</span>.reason = reason; <span class="keyword">self</span>.source = <span class="string">"<span class="subst">\(source)</span>:<span class="subst">\(file)</span>:<span class="subst">\(line)</span>"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€è¡Œå…¸å‹çš„ <code>Error</code> è¾“å‡ºå¦‚ä¸‹æ‰€ç¤º:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Error</span>(source: <span class="string">"myFunction():&lt;EXPR&gt;:14"</span>, reason: <span class="string">"An important reason"</span>)</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶è¿™ç§ç»“æ„èƒ½å¤Ÿè®©ä½ æ•è·å‡ºç°å¼‚å¸¸çš„å‡½æ•°ã€æ–‡ä»¶å’Œè¡Œå·ï¼Œä½†ä½ æ— æ³•æ•æ‰æ²¡æœ‰ç±»å‹å‚æ•°çš„åŸå§‹çˆ¶ç±»å‹ã€‚ä¸ºäº†æ•è·è¯¥ç±»å‹ï¼Œéœ€è¦åœ¨ <code>Error</code> ç»“æ„ä½“æ„é€ å™¨ä¸­åŒ…å«â€œåŸå§‹ç±»å‹â€ï¼Œå¹¶å‘æ„é€ å™¨ä¸­ä¼ é€’ <code>self.dynamicType</code> å‚æ•°ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">Error</span>: <span class="title">ErrorType</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> source: <span class="type">String</span>; <span class="keyword">let</span> reason: <span class="type">String</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(<span class="number">_</span> reason: <span class="type">String</span>, type: <span class="type">Any</span> = <span class="string">""</span>, </span><br><span class="line">        source: <span class="type">String</span> = <span class="keyword">__FUNCTION__</span>,</span><br><span class="line">        file: <span class="type">String</span> = <span class="keyword">__FILE__</span>, </span><br><span class="line">        line: <span class="type">Int</span> = <span class="keyword">__LINE__</span>) &#123;</span><br><span class="line">            <span class="keyword">self</span>.reason = reason; <span class="keyword">self</span>.source = <span class="string">"<span class="subst">\(source)</span>:<span class="subst">\(file)</span>:<span class="subst">\(line)</span>:<span class="subst">\(type)</span>"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘å¾ˆä¸å–œæ¬¢è¿™ç§é¢å¤–æ·»åŠ ç±»å‹å‚æ•°çš„æ–¹å¼ï¼Œå®ƒå”¯ä¸€çš„ä½œç”¨å°±æ˜¯ç®€åŒ–é”™è¯¯ç”Ÿæˆã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">myFunction</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="type">Error</span>(<span class="string">"An important reason"</span>, type: <span class="keyword">self</span>.<span class="keyword">dynamicType</span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> &#123;<span class="keyword">try</span> <span class="type">Parent</span>().myFunction()&#125; <span class="keyword">catch</span>&#123;<span class="built_in">print</span>(error)&#125;</span><br><span class="line"><span class="comment">// Error(source: "myFunction():&lt;EXPR&gt;:14:Parent", reason: "An important reason")</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘æ›´å–œæ¬¢æ‰©å±• <code>Contextualizable</code> æ¥å®ç°è‡ªåŠ¨æ•è·ç±»å‹ä¸Šä¸‹æ–‡ã€‚æ³¨æ„ï¼Œé»˜è®¤å®ç°çš„åè®®æ–¹æ³•ä¸­ç”¨åˆ°äº† <code>self.dynamicType</code>ï¼Œå®ƒä¸èƒ½è¢«ç”¨åœ¨æ–¹æ³•ç­¾åä¸­ï¼ˆè¯‘è€…æ³¨ï¼šä¹Ÿå°±æ˜¯è¯´ä¸èƒ½å½“åšå‡½æ•°å‚æ•°æˆ–è€…è¿”å›å€¼ï¼‰ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Contextualizable</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Contextualizable</span> </span>&#123;</span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">currentContext</span><span class="params">(file : String = <span class="keyword">__FILE__</span>, function : String = <span class="keyword">__FUNCTION__</span>, line : Int = <span class="keyword">__LINE__</span>)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"<span class="subst">\(file)</span>:<span class="subst">\(function)</span>:<span class="subst">\(line)</span>:<span class="subst">\(<span class="keyword">self</span>.<span class="keyword">dynamicType</span>)</span>"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»“åˆä¸Šè¿°ä¸¤ç§æ–¹æ³•å¯ä»¥ç®€åŒ–æ•´ä¸ªè¿‡ç¨‹è½»æ¾å®ç°æˆ‘ä»¬çš„ç›®æ ‡ã€‚å…±äº« <code>Error</code> ç±»å‹ä¹‹åå°±å¯ä»¥æŠŠå˜é‡æ”¹æˆå¸¸é‡ï¼Œå¹¶ä¸”æŠŠä¸Šä¸‹æ–‡ç›¸å…³ä»£ç ä» <code>Error</code> æ„é€ å™¨ç§»åŠ¨åˆ°éµå¾ªåè®®çš„ç±»å‹ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥è‡ªåŠ¨ç»§æ‰¿ <code>currentContext</code> æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">Error</span>: <span class="title">ErrorType</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> source: <span class="type">String</span>; <span class="keyword">let</span> reason: <span class="type">String</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(<span class="number">_</span> source: <span class="type">String</span> = <span class="keyword">__FILE__</span>, <span class="number">_</span> reason: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.reason = reason; <span class="keyword">self</span>.source = source</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">Parent</span>: <span class="title">Contextualizable</span> </span>&#123;</span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">myFunction</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="type">Error</span>(currentContext(), <span class="string">"An important reason"</span>)&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´æ–°ä¹‹åï¼Œé”™è¯¯è¾“å‡ºä¸­ä¼šåŒ…å«åŸå§‹ç±»å‹ã€‚</p>
<p>æ­£å¦‚è¯»è€… <code>Kametrixom</code> æ‰€æŒ‡å‡ºçš„ï¼Œä½ è¿˜å¯ä»¥æ‰©å±• <code>Contextualizable</code> åè®®å¹¶åˆ›å»ºä½ è‡ªå·±çš„é”™è¯¯ã€‚ï¼ˆä»–è¿˜å†™äº†ä¸€ä¸ª<a href="https://gist.github.com/Kametrixom/21da650bd7c7006a70e3" target="_blank" rel="external">éå¸¸æ£’çš„é”™è¯¯ç±»å‹</a>ï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦æ·»åŠ ä¸Šä¸‹æ–‡ã€‚ï¼‰</p>
<p>æœ¬æ–‡çš„æ‰€æœ‰ä»£ç å¯ä»¥åœ¨ <a href="https://gist.github.com/erica/b6f4884ed5d70c269107" target="_blank" rel="external">è¿™ä¸ª Gist</a> ä¸­æ‰¾åˆ°ï¼ˆè¯‘è€…æ³¨ï¼šGist å·²ç»è¢«å¢™ï¼Œéœ€è¦ç¿»å¢™æŸ¥çœ‹ï¼‰ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šErica Sadunï¼Œ<a href="http://ericasadun.com/2015/08/27/capturing-context-swiftlang/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-08-27<br>è¯‘è€…ï¼š<a href="https://github.com/chenmingbiao">CMB</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>å‡è®¾ä½ æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªç±»å‹ï¼Œå½“æœ‰é”™è¯¯æ—¶å‘ç”Ÿæ—¶ä½ æƒ³è¦è¾“å‡ºå¼‚å¸¸å‘ç”Ÿæ—¶çš„ä¸Šä¸‹æ–‡ã€‚é€šå¸¸ä½ ä¼šä½¿ç”¨ä¸€äº›å†…ç½®çš„ç¼–è¯‘å™¨å…³é”®å­—ï¼š<code>__FUNCTION__</code> ï¼Œ <code>__LINE__</code> å’Œ <code>__FILE__</code> ï¼Œè¿™äº›å…³é”®è¯æä¾›äº†æœ‰å…³å‡½æ•°è°ƒç”¨è¯¦ç»†çš„æ–‡æœ¬æ’å€¼ï¼š</p>]]>
    
    </summary>
    
      <category term="Erica Sadun" scheme="http://swiftggteam.github.io/tags/Erica-Sadun/"/>
    
      <category term="Swift è¿›é˜¶" scheme="http://swiftggteam.github.io/categories/Swift-%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[å†™ç»™åˆå­¦è€…çš„ Swift æ•™ç¨‹ Part 1]]></title>
    <link href="http://swiftggteam.github.io/2015/11/13/swift-tutorial-for-beginners-part-1/"/>
    <id>http://swiftggteam.github.io/2015/11/13/swift-tutorial-for-beginners-part-1/</id>
    <published>2015-11-13T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šThomas Hanningï¼Œ<a href="http://www.thomashanning.com/swift-tutorial-for-beginners-part-1/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-29<br>è¯‘è€…ï¼š<a href="http://weibo.com/linusling" target="_blank" rel="external">å°é“åŒ Linus</a>ï¼›æ ¡å¯¹ï¼š<a href="http://weibo.com/xiaoxxiao" target="_blank" rel="external">åƒå¶çŸ¥é£</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>Swift æ˜¯è‹¹æœå®˜æ–¹æ–°æ¨å‡ºçš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¯ä»¥ä¸º iOSã€ watchOSã€ tvOS å’Œ Mac OS å¼€å‘åº”ç”¨ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä½ å°†ä¼šå­¦åˆ°æ‰€æœ‰çš„åŸºç¡€æ“ä½œã€‚</p>
<a id="more"></a>
<h2 id="ä½ å°†åœ¨è¿™ä¸ªâ€œSwift_åˆå­¦è€…æ•™ç¨‹â€ä¸­å­¦åˆ°äº›ä»€ä¹ˆå‘¢ï¼Ÿ">ä½ å°†åœ¨è¿™ä¸ªâ€œSwift åˆå­¦è€…æ•™ç¨‹â€ä¸­å­¦åˆ°äº›ä»€ä¹ˆå‘¢ï¼Ÿ</h2><p>æœ¬æ•™ç¨‹åŒ…å«äº†ä»¥ä¸‹è¿™äº›è¯é¢˜ï¼š</p>
<ul>
<li>ä¸‹è½½ Xcode</li>
<li>Playgrounds</li>
<li>Hello World!</li>
<li>å˜é‡</li>
<li>å¸¸é‡</li>
<li>ç±»å‹æ ‡æ³¨</li>
<li>æ¡ä»¶è¯­å¥</li>
<li>å¾ªç¯è¯­å¥</li>
<li>å¯é€‰ç±»å‹</li>
<li>å‡½æ•°</li>
</ul>
<p>å°†ä¼šæœ‰æ›´å¤šå†…å®¹å‡ºç°åœ¨â€œå†™ç»™åˆå­¦è€…çš„ Swift æ•™ç¨‹â€ç³»åˆ—ä¸­ã€‚</p>
<p>æœ¬æ•™ç¨‹æºç ä¸‹è½½: <a href="https://github.com/kevin833752/MyTranslationPlaygrounds/tree/master/Swift_Tutorial_For_Beginners_Part_1.playground" target="_blank" rel="external">æ¥è‡ªå°é“åŒ çš„ä»£ç </a></p>
<h2 id="ä¸‹è½½_Xcode">ä¸‹è½½ Xcode</h2><p>æˆä¸º Swift å¤§ç‰›çš„ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯ä¸‹è½½ Xcode å•¦ã€‚ä½ å¯ä»¥ç›´æ¥ä» App Store é‡Œä¸‹è½½ã€‚Xcode æ˜¯è‹¹æœå®˜æ–¹çš„ IDE å·¥å…·ï¼Œå®ƒå¯ä»¥ä¸º iOSã€ watchOSã€ tvOS å’Œ Mac OS è¿™äº›å¹³å°å¼€å‘åº”ç”¨ã€‚</p>
<h2 id="Playgrounds">Playgrounds</h2><p>ä½ ä¼šæŠŠå¤§éƒ¨åˆ†ç¼–ç¨‹çš„æ—¶é—´èŠ±åœ¨å…·ä½“é¡¹ç›®ä¸Šã€‚ä½†æ˜¯ï¼ŒXcode æœ‰ä¸€ä¸ªéå¸¸æœ‰è¶£çš„ç‰¹æ€§ï¼Œå¯ä»¥ç»™åˆå­¦è€…å’Œå¤§ç‰›å¸¦æ¥å·¨å¤§å¸®åŠ©ï¼Œå®ƒå°±æ˜¯ Playgroundsã€‚ä½ å¯ä»¥åœ¨ Playground é‡Œå†™ Swift ä»£ç ï¼Œå†™å®Œå°±ç›´æ¥èƒ½çœ‹åˆ°æ‰§è¡Œçš„ç»“æœã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³è¦å­¦ä¸€äº›æ–°ç‰¹æ€§æˆ–è¯•éªŒä¸€äº›æ–°åŠŸèƒ½ï¼Œå¯ä»¥æ‰“å¼€ Playground ç›´æ¥ç¼–å†™ï¼Œä¸ç”¨åƒåœ¨å·¥ç¨‹é‡Œé‚£æ ·å…ˆç¼–è¯‘å†æ‰§è¡Œã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨å†™ä¸€ä¸ªé¡¹ç›®ï¼Œé‚£ä¹Ÿå¯ä»¥åŒæ—¶æ‰“å¼€ä¸€ä¸ª Playgroundï¼Œä½ å¯ä»¥åœ¨ Playground é‡Œå¿«é€Ÿè¯•éªŒä¸€äº›å°åŠŸèƒ½ã€‚</p>
<p>è¨€å½’æ­£ä¼ ï¼Œè®²è®²å¦‚ä½•ä½¿ç”¨ Playgroundã€‚ç¬¬ä¸€æ­¥æ‰“å¼€ Xcodeï¼Œæ¥ç€åœ¨æ¬¢è¿ç•Œé¢ç‚¹å‡»â€œGet started with a playgroundâ€ã€‚å¦‚æœä½ æ²¡æœ‰çœ‹åˆ°è¿™ä¸ªæ¬¢è¿ç•Œé¢ï¼Œå¯ä»¥æŒ‰ File -&gt; New -&gt; Playground è¿™æ ·çš„è·¯å¾„æ‰“å¼€ Playgroundã€‚æŒ‡å®š Playground çš„æ–‡ä»¶åå’Œä¿å­˜ä½ç½®ä¹‹åï¼Œä½ å°±å¯ä»¥å¼€å§‹å†™ä»£ç å•¦ã€‚</p>
<h2 id="Hello_World!">Hello World!</h2><p>åœ¨å¤§å¤šæ•°çš„ç¼–ç¨‹ä¹¦ç±ä¸­ï¼Œéƒ½æŠŠæ‰“å°â€œHello World!â€ä½œä¸ºç¬¬ä¸€ä¸ªé¡¹ç›®ã€‚æˆ‘ä»¬ä¹Ÿä¸ä¼šæ‰“ç ´è¿™ä¸ªä¼ ç»Ÿçš„ï¼Œå“ˆå“ˆã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ playground é‡Œå†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">"Hello World!"</span>)</span><br></pre></td></tr></table></figure>
<p>è¾“å®Œè¿™è¡Œä»£ç ï¼Œä½ å°±å¯ä»¥åœ¨ playground çš„å³è¾¹çœ‹åˆ°è¾“å‡ºçš„ç»“æœã€‚</p>
<p><img src="/img/articles/swift-tutorial-for-beginners-part-1/Screen-Shot-2015-10-03-at-18.26.55-1024x636.png1447379896.6408916" alt=""></p>
<p>æ­å–œï¼Œä½ å·²ç»æˆåŠŸç¼–å†™äº†ç¬¬ä¸€ä¸ª Swift ç¨‹åºï¼</p>
<h2 id="å˜é‡">å˜é‡</h2><p>åœ¨æ‰“å°å‡ºç¬¬ä¸€å¥ä»£ç åï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹çœŸæ­£çš„ç¼–ç¨‹å•¦ã€‚ä½ éœ€è¦ä»å˜é‡å¼€å§‹ã€‚å˜é‡å¯ä»¥å­˜å‚¨ä¸€ä¸ªå€¼ï¼Œæ¯”å¦‚æ•°å­—æˆ–å­—ç¬¦ä¸²ã€‚å¯ä»¥ä½¿ç”¨<code>var</code>å…³é”®å­—æ¥å®šä¹‰å˜é‡ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> aNumber = <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªå«<code>aNumber</code>çš„å˜é‡ï¼Œå®ƒçš„å€¼ä¸º 5ã€‚æ¥ç€ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ç€æ”¹å˜è¿™ä¸ªå˜é‡çš„å€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">aNumber = <span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠä¸€ä¸ªæ•°å­¦è¡¨ç¤ºå¼çš„ç»“æœå­˜åˆ°è¿™ä¸ªå˜é‡é‡Œï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">aNumber = <span class="number">5</span> + <span class="number">6</span></span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ä¹Ÿå¯ä»¥æŠŠå˜é‡çš„å€¼æ‰“å°å‡ºæ¥ï¼Œè¿™éœ€è¦ç”¨åˆ°ç‰¹æ®Šçš„æœ¯è¯­ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">"The number is equal <span class="subst">\(aNumber)</span>"</span>)</span><br></pre></td></tr></table></figure>
<p>å˜é‡å¯ä»¥æœ‰ä¸åŒçš„ç±»å‹ã€‚ä½ å¯ä»¥ä¸ºå˜é‡æŒ‡å®šç±»å‹ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ã€æµ®ç‚¹æ•°æˆ–è€…å¸ƒå°”å€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> aString = <span class="string">"A String"</span></span><br><span class="line"><span class="keyword">var</span> aDoble = <span class="number">13.3</span></span><br><span class="line"><span class="keyword">var</span> aBool = <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œä¸€æ—¦ä½ ç»™å˜é‡èµ‹äº†æŸä¸€ç±»å‹çš„å€¼ä¹‹åï¼Œå°±åªèƒ½ä¸ºå˜é‡èµ‹ç›¸åŒç±»å‹çš„å€¼äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">aBool = <span class="string">"A String"</span> <span class="comment">//ç¼–è¯‘é”™è¯¯</span></span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å™¨æ˜¯ä¸€æ®µå¯ä»¥æŠŠä½ å†™çš„ä»£ç ç¿»è¯‘æˆæœºå™¨ç çš„ç¨‹åºã€‚å¦‚æœä½ å†™äº†ä¸€æ®µç¼–è¯‘å™¨ä¸èƒ½ç†è§£æˆ–è€…è¿åç¼–ç¨‹è§„åˆ™çš„ä»£ç ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ã€‚</p>
<h2 id="å¸¸é‡">å¸¸é‡</h2><p>é¡¾åæ€ä¹‰ï¼Œå˜é‡çš„å€¼æ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œè€Œå¸¸é‡çš„å€¼åœ¨ç¬¬ä¸€æ¬¡èµ‹å€¼åå°±ä¸èƒ½ä¿®æ”¹äº†ã€‚å¯¹äºå¸¸é‡ï¼Œä½ å¯ä»¥ä½¿ç”¨å…³é”®å­—<code>let</code>æ¥å®šä¹‰ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> aConstantNumber = <span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ å°è¯•ä¿®æ”¹ä¸€ä¸ªå¸¸é‡çš„å€¼ï¼Œå°±ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">aConstantNumber = <span class="number">10</span> <span class="comment">//ç¼–è¯‘å‡ºé”™</span></span><br></pre></td></tr></table></figure>
<p>é‚£ä¸ºä»€ä¹ˆè¿˜è¦æœ‰å¸¸é‡å‘¢ï¼Ÿå› ä¸ºï¼Œæœ‰æ—¶å€™å¹¶ä¸å¸Œæœ›ä¸€ä¸ªå€¼åœ¨ç¬¬ä¸€æ¬¡èµ‹å€¼åè¢«ä¿®æ”¹ï¼Œæ¯”å¦‚ï¼Œåœ¨æŒ‡å®šä¸€ä¸ªäººçš„å§“ååï¼Œå°±ä¸å¸Œæœ›è¿™ä¸ªå€¼è¢«å†æ¬¡ä¿®æ”¹ã€‚</p>
<h2 id="ç±»å‹æ ‡æ³¨">ç±»å‹æ ‡æ³¨</h2><p>æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œå˜é‡åœ¨ç¬¬ä¸€æ¬¡èµ‹å€¼ä¹‹åä¼šç¡®å®šç±»å‹ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨èµ‹å€¼æ—¶ç›´æ¥æŒ‡å®šå˜é‡æˆ–å¸¸é‡çš„ç±»å‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> aNumber: <span class="type">Int</span> = <span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªä»£ç çš„ç»“æœå’Œä¹‹å‰çš„æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç°åœ¨è¿™æ®µä»£ç æ›´åŠ å®¹æ˜“è¯»æ‡‚ã€‚ç¬¬ä¸€çœ¼å°±çŸ¥é“è¿™ä¸ªå˜é‡çš„ç±»å‹æ˜¯<code>Int</code>ã€‚å½“ç„¶ï¼Œ é™¤äº†<code>Int</code>ï¼Œè¿˜æœ‰è®¸å¤šå…¶ä»–çš„ç±»å‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> aString: <span class="type">String</span> = <span class="string">"A String"</span></span><br><span class="line"><span class="keyword">var</span> aDouble: <span class="type">Double</span> = <span class="number">13.3</span></span><br><span class="line"><span class="keyword">var</span> aBool: <span class="type">Bool</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="æ¡ä»¶è¯­å¥">æ¡ä»¶è¯­å¥</h2><p>ä¸€ä¸ªç¨‹åºå¦‚æœæ€»æ˜¯åšç›¸åŒçš„äº‹æƒ…ï¼Œè¿™å¾ˆæ— èŠã€‚å› æ­¤ï¼Œå‡ºç°äº†æ‰€è°“çš„æ¡ä»¶è¯­å¥æ¥æ§åˆ¶ç¨‹åºçš„æµå‘ã€‚æ¯”å¦‚ï¼Œä½ æƒ³è¦æ ¹æ®è®¡ç®—çš„ç»“æœæœ‰ä¸åŒçš„è¾“å‡ºã€‚èƒ½æ§åˆ¶ç¨‹åºæµå‘çš„ï¼Œä¹Ÿæ˜¯æœ€æ™®éçš„æ¡ä»¶è¯­å¥æ˜¯<code>if</code>æ¡ä»¶è¯­å¥ï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> number1 = <span class="number">5</span></span><br><span class="line"><span class="keyword">var</span> number2 = <span class="number">10</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> number1 &lt; number2 &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"number1 is smaller than number2"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™æ®µç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡<code>if</code>æ¡ä»¶è¯­å¥æ¥åˆ¤æ–­<code>number1</code>æ˜¯å¦å°äº<code>number2</code>ã€‚å¦‚æœæ»¡è¶³è¿™ä¸ªæ¡ä»¶çš„è¯ï¼Œç¨‹åºå°±ä¼šæ‰§è¡Œåˆ°å¤§æ‹¬å·æ‹¬èµ·æ¥çš„ if ä»£ç å—é‡Œã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ä»£ç å—é‡Œæ·»åŠ ä½ æƒ³è¦æ‰§è¡Œçš„ä»£ç ã€‚</p>
<p>å¦å¤–ï¼Œä½ è¿˜å¯ä»¥åœ¨<code>if</code>æ¡ä»¶åˆ¤æ–­è¿”å›<code>false</code>çš„ä»£ç å—é‡Œå†™ç›¸åº”ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> number1 = <span class="number">5</span></span><br><span class="line"><span class="keyword">var</span> number2 = <span class="number">10</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> number1 &lt; number2 &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"number1 is smaller than number2"</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"number1 is not smaller than number2"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œä½ å¯ä»¥å†™å¤šä¸ª<code>if</code>æ¡ä»¶è¯­å¥ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> number1 &lt; number2 &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"number1 is smaller than number2"</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> number2 &lt; number1 &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"number2 is than number2"</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"number1 is equal number2"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Swift é‡Œå¦å¤–ä¸€ç§æ¡ä»¶è¯­å¥æ˜¯<code>switch</code>æ¡ä»¶è¯­å¥ã€‚<code>switch</code>è¯­å¥çš„å½¢å¼å°±æ˜¯æŠŠæŸä¸ªå€¼ä¸ä¸€ä¸ªæˆ–è‹¥å¹²ä¸ªå€¼ä½œæ¯”è¾ƒï¼Œä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> name &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">"Mick"</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The name is Mick"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="string">"John"</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The name is John"</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The name is neither Mick nor John"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>switch</code>å…³é”®å­—åå†™ä¸Šéœ€è¦åŒ¹é…çš„å€¼<code>name</code>ã€‚ç„¶åï¼Œæ¯ä¸ª<code>case</code>åè·Ÿä¸Šå¯èƒ½åŒ¹é…çš„å€¼ã€‚å¦‚æœ<code>name</code>åŒ¹é…äº†æŸä¸€ä¸ªå€¼ï¼Œå¯¹åº”<code>case</code>é‡Œçš„ä»£ç å°†è¢«æ‰§è¡Œï¼›å¦åˆ™ï¼Œç»§ç»­è¿›è¡ŒåŒ¹é…ã€‚å‡å¦‚æ²¡æœ‰ä¸€ä¸ªå€¼èƒ½å¤ŸåŒ¹é…ï¼Œå°±ä¼šæ‰§è¡Œ<code>default</code>åçš„ä»£ç ã€‚å¯¹äºåˆå­¦è€…æ¥è¯´ï¼ŒçŸ¥é“<code>switch</code>æ¡ä»¶è¯­å¥æœ‰å¾ˆå¤šå¯èƒ½åŒ¹é…çš„å€¼å°±è¶³å¤Ÿäº†ã€‚</p>
<h2 id="å¾ªç¯">å¾ªç¯</h2><p>é™¤äº†æ¡ä»¶è¯­å¥æ„å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ§åˆ¶ç¨‹åºæµçš„é‡è¦ç»“æ„ï¼šå¾ªç¯ã€‚å¾ªç¯çš„ä½œç”¨ä¸»è¦æ˜¯èƒ½å¤šæ¬¡æ‰§è¡Œä»£ç å—é‡Œçš„ä»£ç ã€‚Swift æœ‰ä¸‰ç§å¾ªç¯çš„ç±»å‹ï¼šwhile å¾ªç¯, repeat-while å¾ªç¯å’Œ for å¾ªç¯.</p>
<h3 id="while_å¾ªç¯">while å¾ªç¯</h3><p>ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨äº† while å¾ªç¯ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello World"</span>)</span><br><span class="line">    i = i + <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>while å¾ªç¯ä»¥<code>while</code>å…³é”®å­—å¼€å§‹ï¼Œåœ¨<code>while</code>å…³é”®å­—åè·Ÿä¸Šåˆ¤æ–­æ¡ä»¶ã€‚å¦‚æœæ¡ä»¶ä¸º trueï¼Œä¼šé‡å¤è¿è¡Œä»£ç å—é‡Œçš„ä¸€ç³»åˆ—ä»£ç ï¼Œæ¯”å¦‚æœ¬ä¾‹å­é‡Œçš„å¾ªç¯æ‰“å°â€Hello Worldâ€åæ¬¡ã€‚å¦‚æœæ²¡æœ‰ä¿®æ”¹å˜é‡<code>i</code>çš„å€¼ï¼Œå¾ªç¯å°†ä¸€ç›´è¿›è¡Œä¸‹å»ã€‚</p>
<h3 id="repeat-while_å¾ªç¯">repeat-while å¾ªç¯</h3><p>repeat-while å¾ªç¯å’Œ while å¾ªç¯å¾ˆç›¸ä¼¼ã€‚ä½†æ˜¯ï¼Œä¸å†åƒ while å¾ªç¯é‚£æ ·å…ˆåˆ¤æ–­å¾ªç¯æ¡ä»¶ï¼Œä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">10</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">repeat</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello World"</span>)</span><br><span class="line">    i = i + <span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">while</span> (i &lt; <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨repeat-while å¾ªç¯è€Œä¸æ˜¯ while å¾ªç¯ï¼Ÿrepeat-while å¾ªç¯å’Œ while å¾ªç¯çš„ä¸»è¦åŒºåˆ«æ˜¯åœ¨åˆ¤æ–­å¾ªç¯æ¡ä»¶ä¹‹å‰ï¼Œå…ˆæ‰§è¡Œä¸€æ¬¡å¾ªç¯çš„ä»£ç å—ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">11</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">repeat</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello World"</span>)</span><br><span class="line">    i = i + <span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">while</span> (i &lt; <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°½ç®¡åˆ¤æ–­æ¡ä»¶æ°¸è¿œæ˜¯ falseï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šæ‰“å°ä¸€æ¬¡â€œHello Worldâ€ã€‚å› æ­¤ï¼Œæœ‰æ—¶å€™éœ€è¦å…ˆåˆ¤æ–­ï¼Œè€Œæœ‰æ—¶å€™ä¸æƒ³è¦å…ˆåˆ¤æ–­ï¼Œè¿™å°±è¦æ ¹æ®å…·ä½“çš„æƒ…å†µå†³å®šåˆ°åº•ä½¿ç”¨å“ªç§å¾ªç¯ã€‚</p>
<h3 id="for_å¾ªç¯">for å¾ªç¯</h3><p>for å¾ªç¯å¾ˆå¥½ç”¨ï¼Œå®ƒå¯ä»¥å¯¹ä¸€ä¸ªé›†åˆé‡Œé¢çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ç³»åˆ—è¯­å¥ã€‚åŒæ—¶ï¼Œä¹Ÿæœ‰å¥½å‡ ç§éå†çš„æ–¹å¼ï¼Œå…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>...<span class="number">10</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"This iteration number <span class="subst">\(i)</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœåƒä¸Šé¢çš„ä¾‹å­ä¸€æ ·ä½¿ç”¨ä¸‰ä¸ªç‚¹å·ï¼ˆé—­åŒºé—´æ“ä½œç¬¦ï¼‰çš„è¯ï¼Œæœ€åä¸€ä¸ªæ•°å­—ï¼ˆ10ï¼‰ä¹Ÿä¼šè¢«åŒ…å«ã€‚æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥åƒä¸‹é¢çš„ä¾‹å­ä¸€æ ·ä½¿ç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;<span class="number">10</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"This iteration number <span class="subst">\(i)</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæœ€åä¸€ä¸ªæ•°å­—ï¼ˆ10ï¼‰ä¸ä¼šè¢«åŒ…å«è¿›å»ã€‚å¦å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼å¯ä»¥å†™ for å¾ªç¯ï¼Œå°±æ˜¯æ ‡å‡† C æ ·å¼çš„ for å¾ªç¯ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"This iteration number <span class="subst">\(i)</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå¾ªç¯ä¼šæ‰§è¡Œåæ¬¡ã€‚åˆ†å·å°†å¾ªç¯çš„å®šä¹‰åˆ†ä¸º 3 ä¸ªéƒ¨åˆ†ï¼šé¦–å…ˆï¼Œå¾ªç¯é¦–æ¬¡å¯åŠ¨æ—¶ï¼Œå˜é‡ä¼šè¢«åˆå§‹åŒ–ï¼Œå¹¶èµ‹ä¸€ä¸ªèµ·å§‹å€¼ï¼›å…¶æ¬¡ï¼Œæ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼è¢«è°ƒç”¨ï¼Œå¦‚æœè¡¨è¾¾å¼è°ƒç”¨ç»“æœä¸ºtrueï¼Œåˆ™ä¼šæ‰§è¡Œå¤§æ‹¬å·å†…éƒ¨çš„ä»£ç ï¼›æœ€åï¼Œæ‰§è¡Œæ‰€æœ‰è¯­å¥ä¹‹åï¼Œæ‰§è¡Œé€’å¢è¡¨è¾¾å¼ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œå˜é‡<code>i</code>æ¯æ¬¡å¢åŠ  1ã€‚å…¶ä¸­ï¼Œ<code>i++</code>ç­‰åŒäº<code>i = i + 1</code>ã€‚</p>
<h2 id="å¯é€‰ç±»å‹">å¯é€‰ç±»å‹</h2><p>å¯é€‰ç±»å‹æ˜¯ Swift é‡Œå¾ˆç‰¹æ®Šçš„æ–°ç‰¹æ€§ï¼Œå®ƒéå¸¸é‡è¦ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ä¸€å¼€å§‹å°±è¦ä»‹ç»å®ƒã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œä¸€ä¸ªå˜é‡æœ‰å¯èƒ½æ²¡æœ‰å€¼ï¼Œæ¯”å¦‚ï¼Œä¸€ä¸ªå˜é‡ç”¨æ¥å­˜å‚¨ä¸€ä¸ªäººçš„ middle nameï¼Œé‚£æŸäººæ²¡æœ‰ middle name çš„è¯è¯¥æ€ä¹ˆè¡¨ç¤ºå‘¢ï¼Ÿæˆ‘ä»¬å¾ˆè‡ªç„¶çš„èƒ½æƒ³åˆ°èµ‹å€¼ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> middleName: <span class="type">String</span> = <span class="string">""</span></span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬è®©<code>middleName</code>æˆä¸ºå¯é€‰ç±»å‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸ºå˜é‡æŒ‡å®šè¡¨ç¤ºâ€œè¿™é‡Œæ²¡æœ‰å€¼â€çš„<code>nil</code>ã€‚å¯é€‰ç±»å‹çš„å®šä¹‰æ˜¯åœ¨ç±»å‹åé¢è·Ÿä¸Šé—®å·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> middleName: <span class="type">String</span>? = <span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<p>å¯é€‰ç±»å‹çš„å˜é‡å¯ä»¥æœ‰éç©ºçš„å€¼ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ åƒæ™®é€šå˜é‡é‚£æ ·è®¿é—®å¯é€‰ç±»å‹çš„å˜é‡ï¼Œå°±ä¼šç¼–è¯‘å‡ºé”™ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> anotherName: <span class="type">String</span> = middleName <span class="comment">//ç¼–è¯‘å‡ºé”™</span></span><br></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥é€šè¿‡è§£åŒ…æ¥è®¿é—®ï¼Œä½¿ç”¨æ„Ÿå¹å·è¿›è¡Œè§£åŒ…ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> anotherName: <span class="type">String</span> = middleName!</span><br></pre></td></tr></table></figure>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ å¯¹ä¸€ä¸ªé<code>nil</code>çš„å€¼è¿›è¡Œè§£åŒ…ï¼Œå¯ä»¥å¾—åˆ°å…·ä½“çš„å€¼ï¼›å¦åˆ™ï¼Œå°±ä¼šåœ¨è¿è¡Œæ—¶æŠ¥é”™ï¼Œå› ä¸ºä¸èƒ½å¯¹<code>nil</code>è¿›è¡Œè§£åŒ…ã€‚</p>
<p>å› æ­¤ï¼Œæœ€å¥½åœ¨ä½¿ç”¨å¯é€‰ç±»å‹å˜é‡å‰å…ˆåˆ¤æ–­æ˜¯å¦æ˜¯<code>nil</code>ï¼Œä½¿ç”¨æ‰€è°“çš„å¯é€‰ç»‘å®šï¼ˆoptional bindingï¼‰å°±å¯ä»¥æå®šäº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> middleName: <span class="type">String</span>? = <span class="string">"John"</span></span><br><span class="line"><span class="keyword">var</span> anotherName: <span class="type">String</span> = <span class="string">"Michael"</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> name = middleName &#123;</span><br><span class="line">    anotherName = name</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€å¼€å§‹ï¼Œè¿™æ®µä»£ç å¯èƒ½çœ‹èµ·æ¥ä¼šæœ‰ç‚¹å¥‡æ€ªï¼Œå®é™…ä¸Šå¾ˆç®€å•ï¼Œæ„æ€ä¹Ÿå¾ˆæ˜ç¡®ï¼šå¦‚æœ<code>middleName</code>ç­‰äº<code>nil</code>çš„è¯ï¼Œå¯¹åº”çš„ä»£ç å—å°±ä¸ä¼šæ‰§è¡Œã€‚å¦‚æœ<code>middleName</code>ä¸ç­‰äº<code>nil</code>çš„è¯ï¼Œå˜é‡<code>name</code>å°±ä¼šè·å¾—<code>middleName</code>çš„å€¼ï¼Œå¯¹åº”çš„ä»£ç å—å°±ä¼šè¢«æ‰§è¡Œã€‚åœ¨ä»£ç å—é‡Œï¼Œ<code>name</code>å°±ä¸å†æ˜¯å¯é€‰å˜é‡äº†ï¼Œå› æ­¤å¯ä»¥ç»™å…¶ä»–å˜é‡èµ‹å€¼ã€‚</p>
<h2 id="å‡½æ•°">å‡½æ•°</h2><p>ä½ å¯èƒ½ç»å¸¸ä¼šé‡åˆ°ï¼Œä¸€äº›ä»£ç å¯ä»¥åº”ç”¨äºè®¸å¤šä¸åŒçš„æƒ…å†µã€‚è€Œå‡½æ•°å°±æ˜¯ç”¨æ¥å®Œæˆç‰¹å®šä»»åŠ¡çš„ç‹¬ç«‹çš„ä»£ç å—ï¼Œå¹¶ä¸”å½“å‡½æ•°éœ€è¦æ‰§è¡Œçš„æ—¶å€™ï¼Œè¿™ä¸ªåå­—ä¼šè¢«ç”¨äºâ€œè°ƒç”¨â€å‡½æ•°ã€‚å…ˆä»ç®€å•æ‰“å°â€œHello Worldâ€çš„å‡½æ•°å¼€å§‹å§ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">printHelloWorld</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello World!"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>äº‹å®ä¸Šï¼Œä½ æŠŠä¸Šé¢é‚£æ®µä»£ç å†™åˆ° playground é‡Œï¼Œç•Œé¢å³è¾¹æ˜¯æ²¡æœ‰è¾“å‡ºçš„ã€‚å¦‚æœä½ é€šè¿‡ä¸‹é¢çš„æ–¹å¼è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„è¯ï¼Œå°±ä¼šæœ‰å¯¹åº”çš„è¾“å‡ºäº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">printHelloWorld</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello World!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">printHelloWorld()</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ è°ƒç”¨è¿™ä¸ªå‡½æ•°ä¸¤æ¬¡çš„è¯ï¼Œä½ ä¼šçœ‹åˆ°ç•Œé¢å³è¾¹ä¼šå‡ºç°ä¸¤æ¬¡è¾“å‡ºï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">printHelloWorld</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Hello World!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">printHelloWorld()</span><br><span class="line">printHelloWorld()</span><br></pre></td></tr></table></figure>
<p>ä½ ä¹Ÿå¯ä»¥ç»™å‡½æ•°ä¼ é€’é¢å¤–çš„ä¿¡æ¯ï¼Œå³ä¼ é€’å‚æ•°ã€‚æ¯ä¸ªå‚æ•°éƒ½éœ€è¦æŒ‡å®šå‚æ•°åå’Œç±»å‹ï¼Œç„¶åä½ å°±å¯ä»¥åœ¨å‡½æ•°é‡Œè®¿é—®è¿™äº›å‚æ•°çš„å€¼äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">printANumber</span><span class="params">(number:Int)</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The number is <span class="subst">\(number)</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œä½ å°±å¯ä»¥åƒä¸‹é¢çš„æ–¹å¼è°ƒç”¨æœ‰å‚æ•°çš„å‡½æ•°äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">printANumber</span><span class="params">(number:Int)</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The number is <span class="subst">\(number)</span>"</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">printANumber(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<p>æœ¬ä¾‹ä¸­ï¼Œå¯¹åº”çš„è¾“å‡ºå°±æ˜¯ï¼šâ€œThe number is 5â€ã€‚</p>
<p>ä½ ç”šè‡³å¯ä»¥æŒ‡å®šå¤šä¸ªå‚æ•°ã€‚ç„¶åï¼Œä½ åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œé™¤äº†ä¸éœ€è¦å†™ç¬¬ä¸€ä¸ªå‚æ•°çš„å‚æ•°åä¹‹å¤–ï¼Œå…¶ä»–å‚æ•°éƒ½éœ€è¦å†™å‚æ•°åï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">printNumbers</span><span class="params">(number1:Int, number2:Int, number3:Int)</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"The number are <span class="subst">\(number1)</span>, <span class="subst">\(number2)</span>, <span class="subst">\(number3)</span>"</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">printNumbers(<span class="number">5</span>, number2:<span class="number">10</span>, number3:<span class="number">15</span>)</span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œå‡½æ•°æœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯è¿”å›å€¼ã€‚å¦‚æœéœ€è¦å‡½æ•°æœ‰è¿”å›å€¼ï¼Œä½ å°±è¦æŒ‡å®šè¿”å›å€¼çš„ç±»å‹ï¼ŒåŒæ—¶ï¼Œè¿”å›å€¼ç”±<code>return</code>å…³é”®å­—è¿”å›ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šä½ éœ€è¦å†™ä¸€ä¸ªå‡½æ•°ï¼Œå®ç°è¿”å›ä¸¤ä¸ªæ•°å­—ä¸­æ›´å¤§è€…çš„åŠŸèƒ½ã€‚å¤§ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">maxOfNumbers</span><span class="params">(number1: Int, number2: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> number1 &lt; number2 &#123;</span><br><span class="line">        <span class="keyword">return</span> number2</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> number1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">maxOfNumbers(<span class="number">5</span>, number2: <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸º 10ã€‚</p>
<h2 id="æ¥ä¸‹æ¥è¯¥å¹²ä»€ä¹ˆ">æ¥ä¸‹æ¥è¯¥å¹²ä»€ä¹ˆ</h2><p>ç°åœ¨å·²ç»åŸºæœ¬ç†Ÿæ‚‰ Swift ä¸­å¤§éƒ¨åˆ†çš„åŸºæœ¬è¯­æ³•äº†ã€‚è¿™å¯¹ä¹‹åçš„å­¦ä¹ æ˜¯ä¸ªå¾ˆé‡è¦çš„åŸºç¡€ã€‚æ¥ä¸‹æ¥å¯ä»¥è‡ªå·±åŠ¨æ‰‹åœ¨ Playground é‡Œè¯•ç€å†™ä¸€äº›å°åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥çœ‹çœ‹å…³äºæœ¬æ–‡çŸ¥è¯†ç‚¹çš„å…¶ä»–æ–‡ç« ï¼š</p>
<ul>
<li><a href="http://www.thomashanning.com/should-you-use-objective-c-or-swift/" target="_blank" rel="external">è¯¥ä½¿ç”¨ Objective-C è¿˜æ˜¯ Swiftï¼Ÿ</a></li>
<li><a href="http://www.thomashanning.com/constants-in-swift/" target="_blank" rel="external">Swift ä¸­çš„å¸¸é‡</a></li>
<li><a href="http://www.thomashanning.com/optionals-in-swift/" target="_blank" rel="external">Swift ä¸­çš„å¯é€‰ç±»å‹</a></li>
</ul>
<p>åœ¨æœ¬ç³»åˆ—çš„åç»­éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¼šè®¨è®ºæ›´å¤šå…³äº Swift çš„æ–°ç‰¹æ€§ã€‚è¯·ç»§ç»­å…³æ³¨!</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šThomas Hanningï¼Œ<a href="http://www.thomashanning.com/swift-tutorial-for-beginners-part-1/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-29<br>è¯‘è€…ï¼š<a href="http://weibo.com/linusling">å°é“åŒ Linus</a>ï¼›æ ¡å¯¹ï¼š<a href="http://weibo.com/xiaoxxiao">åƒå¶çŸ¥é£</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>Swift æ˜¯è‹¹æœå®˜æ–¹æ–°æ¨å‡ºçš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¯ä»¥ä¸º iOSã€ watchOSã€ tvOS å’Œ Mac OS å¼€å‘åº”ç”¨ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä½ å°†ä¼šå­¦åˆ°æ‰€æœ‰çš„åŸºç¡€æ“ä½œã€‚</p>]]>
    
    </summary>
    
      <category term="Thomas Hanning" scheme="http://swiftggteam.github.io/tags/Thomas-Hanning/"/>
    
      <category term="Swift å…¥é—¨" scheme="http://swiftggteam.github.io/categories/Swift-%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[å‡½æ•°å’Œæ–¹æ³•å‘½åè§„èŒƒ]]></title>
    <link href="http://swiftggteam.github.io/2015/11/12/naming-methods-and-functions/"/>
    <id>http://swiftggteam.github.io/2015/11/12/naming-methods-and-functions/</id>
    <published>2015-11-12T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šErica Sadunï¼Œ<a href="http://ericasadun.com/2015/08/31/naming-methods-and-functions/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-08-31<br>è¯‘è€…ï¼š<a href="http://weibo.com/u/2916092907" target="_blank" rel="external">å¤©æ‰175</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a></p>
</blockquote>
<p>è¯·å„ä½éšæ„æ‰¹åˆ¤ã€‚åŒæ—¶è¯·çœ‹<a href="https://realm.io/news/swift-summit-swifty-methods-clarity-brevity/" target="_blank" rel="external">è¿™é‡Œ</a>å’Œ<a href="http://radex.io/swift/methods/" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚</p>
<p><strong>ç®€å•æ˜äº†</strong>ã€‚æ ¹æ®ä¸Šä¸‹æ–‡ç»™åŠ¨è¯å’Œä»‹è¯åŠ ä¸Šåè¯ã€‚è¯·ä½¿ç”¨<code>removeObject(object, atIndex: index)</code>ï¼Œè€Œä¸æ˜¯<code>remove(object, at: index)</code>ã€‚ä¸è¦ä¸ºäº†è¿‡åº¦çš„ç®€æ´è€Œå½±å“æ¸…æ™°å‡†ç¡®æ€§ã€‚</p>
<a id="more"></a>
<p><strong>é¿å…ç¼©å†™</strong>ã€‚ä½¿ç”¨<code>printError(myError)</code>è€Œä¸æ˜¯<code>printErr(myErr)</code>ä»¥åŠ<code>setBackgroundImage(myImage)</code>è€Œä¸æ˜¯<code>setBGImage(myImg)</code>ã€‚è™½ç„¶è‹¹æœæä¾›äº†ä¸€ç³»åˆ—â€œå¯æ¥å—â€çš„ç¼©å†™ï¼Œä½†æ˜¯è¯·ä¸è¦åœ¨ Swift ä¸­ä½¿ç”¨åƒ max å’Œ min è¿™æ ·çš„ç¼©å†™ã€‚</p>
<p><strong>é¿å…æ­§ä¹‰</strong>ã€‚è€ƒè™‘ä¸€ä¸‹å‡½æ•°æˆ–è€…æ–¹æ³•çš„å‘½åæ˜¯å¦å­˜åœ¨å¤šç§è§£é‡Šã€‚ä¸¾ä¸ªæ —å­ï¼Œåœ¨<code>displayName</code>ä¸­ï¼Œdisplay æ˜¯åè¯è¿˜æ˜¯åŠ¨è¯å‘¢ï¼Ÿå¦‚æœå‘½åä¸æ¸…æ™°çš„è¯ï¼Œè¯·é‡æ–°å‘½åæ¥æ¶ˆé™¤æ··æ·†ã€‚</p>
<p><strong>ä¿æŒä¸€è‡´æ€§</strong>ã€‚åœ¨ä½ çš„åº”ç”¨å’Œåº“ä¸­ä½¿ç”¨ç›¸åŒçš„æœ¯è¯­æ¥æè¿°æ¦‚å¿µã€‚é¿å…åœ¨ä¸€ä¸ªæ–¹æ³•é‡Œä½¿ç”¨<code>fetchBezierElements()</code>ï¼Œå´åœ¨å¦å¤–ä¸€ä¸ªé‡Œä½¿ç”¨<code>listPathComponents()</code>ã€‚</p>
<p><strong>ä¸è¦å¼•ç”¨ç±»å‹å…³é”®å­—</strong>ã€‚é¿å…å‘½åä¸­å‡ºç° structã€enumã€classã€instance ä»¥åŠ objectã€‚è¯·ä½¿ç”¨<code>buildDeckofCards()</code>è€Œä¸æ˜¯<code>buildDeckofCardsStruct()</code>ã€‚</p>
<p><strong>æ–¹æ³•å‘½åä½¿ç”¨å°å†™</strong>ã€‚è™½ç„¶å¤§å¤šæ•°å¼€å‘è€…ä½¿ç”¨å°å†™å‘½åå…¨å±€å‡½æ•°ï¼Œä½†ä½ å¯ä»¥å¤§å†™ï¼Œè¿™å¹¶ä¸æ˜¯ä»€ä¹ˆç½ªè¿‡ã€‚è™½ç„¶è¿™ç§å‡½æ•°å‘½åè¿‡æ—¶äº†ï¼Œä½†å¤§å†™çš„å‡½æ•°åå´èƒ½ç«‹åˆ»å°†å‡½æ•°ä¸æ–¹æ³•åŒºåˆ«å¼€æ¥ã€‚æœ‰ä¸€æ®µæ—¶é—´æˆ‘ä¹Ÿæ”¹å˜è¿‡æƒ³æ³•ï¼Œä½†æ˜¯æœ€ç»ˆè¿˜æ˜¯å†³å®šå¥‹èµ·æŠ—äº‰ï¼Œä½¿ç”¨å°å†™ã€‚è¿™ç§åšæ³•æ›¾ç»å’Œå‘½åç©ºé—´ä¸€æ ·æ™®åŠï¼Œä½†æ˜¯çªç„¶é—´å°±é”€å£°åŒ¿è¿¹äº†ã€‚å°±åƒä¸€ç™¾ä¸‡ä¸ªå–Šç€å¤§å†™çš„äººçªç„¶æ²‰é»˜ã€‚</p>
<p><strong>çœç•¥â€getâ€</strong>ã€‚è·å–çŠ¶æ€ä¿¡æ¯çš„å‡½æ•°åº”è¯¥æè¿°ä»–ä»¬è¦è¿”å›çš„ä¸œè¥¿ã€‚è¯·ä½¿ç”¨<code>extendedExecutionIsEnabled()</code>æˆ–<code>isExtendedExecutionEnabled()</code>è€Œä¸æ˜¯<code>getExtendedExecutionIsEnabled()</code>ã€‚é€šè¿‡å‚æ•°è¿”å›æ•°æ®çš„å‡½æ•°ä¾‹å¤–ã€‚</p>
<p><strong>ä½¿ç”¨æ ‡ç­¾æè¿°å‚æ•°</strong>ã€‚å»ºè®®ç»“åˆå‡½æ•°åå’Œæ ‡ç­¾æ¥æè¿°å‡½æ•°æœ¬èº«ï¼Œè¿™æ ·åˆ›å»ºå‡ºæ¥çš„ä¼šæ˜¯åŒ…æ‹¬ä»‹è¯ï¼ˆwithã€ofã€between ç­‰ç­‰ï¼‰çš„æè¿°ç¬¦ã€‚ä½ ä¼šâ€construct color with red, green, and blueâ€ï¼ˆè¯‘è€…æ³¨ï¼šä½¿ç”¨çº¢ç»¿è“æ„å»ºé¢œè‰²ï¼‰ï¼Œæµ‹è¯•â€length of stringâ€ï¼ˆè¯‘è€…æ³¨ï¼šå­—ç¬¦ä¸²çš„é•¿åº¦ï¼‰ï¼Œæˆ–è€…â€test equality between x and yâ€ï¼ˆè¯‘è€…æ³¨ï¼šåˆ¤æ–­ x å’Œ y æ˜¯å¦ç›¸ç­‰ï¼‰ã€‚</p>
<p>å¥½çš„å‡½æ•°åå’Œæ ‡ç­¾å¯ä»¥å‘Šè¯‰äººä»¬å¦‚ä½•ä½¿ç”¨å‡½æ•°ã€‚ç»“æœä¼šæ˜¯è‡ªæ–‡æ¡£åŒ–ï¼Œä¸ç”¨ä¾é è®°å¿†æˆ–æŸ¥æ‰¾æ¥ç¡®å®šéœ€è¦ä¼ å…¥çš„å‚æ•°ã€‚è¯·ä½¿ç”¨<code>withTag:</code>è€Œä¸æ˜¯<code>tag:</code>ã€‚</p>
<p><strong>ä½¿ç”¨ä»‹è¯ï¼Œé¿å…â€andâ€</strong>ã€‚<code>And</code> æ˜¯ Apple ç‰¹åˆ«å£°ç§°è¦é¿å…çš„ä¸€ä¸ªè¯ã€‚é¿å…ä½¿ç”¨â€view and positionâ€ï¼Œä½¿ç”¨â€view, positionâ€ã€‚ </p>
<p>å¦‚æœä½ å¿…é¡»ä½¿ç”¨<code>and</code>ï¼Œè¯·ç¡®ä¿ä¸€ç»„å‚æ•°æœ‰è¯­ä¹‰è”ç³»ï¼Œå¦‚ä½¿ç”¨â€red, green and blueâ€æ„å»ºé¢œè‰²ã€‚å“ªæ€•ä¹‹åè°ƒæ•´äº†å…³é”®å­—ï¼Œä¹Ÿæ˜¾ç„¶ä¸å¯èƒ½ä¸­æ–­è¿™äº›é¡¹çš„è”ç³»ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå³ä½¿æ˜¯ä»£ç æ´ç™–æ‚£è€…ä¹Ÿä¸ä¼šè®¤ä¸ºä½ çš„ä»£ç æœ‰é—®é¢˜ã€‚</p>
<p>Apple æ”¯æŒä½¿ç”¨ and çš„ä¸€ä¸ªä¾‹å­æ˜¯åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­æè¿°ä¸¤ç§æˆªç„¶ä¸åŒçš„åŠ¨ä½œï¼Œæ¯”å¦‚<code>openFile(withApplication:, andDeactivate:)</code>ã€‚</p>
<p><strong>åœ¨åŸºäºç±»å‹çš„åå­—åé¢åŠ ä¸Š<code>value</code> </strong>ã€‚è¯·ä½¿ç”¨<code>toIntValue</code>è€Œä¸æ˜¯<code>toInt</code>ï¼Œä»¥åŠ<code>withCGRectValue</code>è€Œä¸æ˜¯<code>withCGRect</code>ã€‚</p>
<p><strong>ä½¿ç”¨ç¾å›½æ ‡å‡†çŸ­è¯­</strong>ã€‚ç”±äºè¿™äº›è¯æ˜¯ç”± Apple æä¾›çš„ï¼Œè¯·ä½¿ç”¨ initialize è€Œä¸æ˜¯ initialise ä»¥åŠ color è€Œä¸æ˜¯ colourã€‚</p>
<p><strong>æœ‰ç–‘æƒ‘ï¼Œæ‰¾ Apple</strong>ã€‚ä½¿ç”¨ç›¸ä¼¼çš„æ¦‚å¿µæœç´¢ Apple API æ¥å£å¹¶æ¨¡ä»¿å…¶æ–¹æ³•ç­¾åã€‚å°½é‡å‚è€ƒ Objective-C  å‘½åï¼Œå› ä¸º Swift ä¸­çš„ Apple API å¹¶æ²¡æœ‰å…¨éƒ¨é€šè¿‡äººå·¥å®¡æŸ¥ã€‚è‡ªåŠ¨è½¬æ¢è¿‡æ¥çš„ API å¯èƒ½å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½ä¾‹å­ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šErica Sadunï¼Œ<a href="http://ericasadun.com/2015/08/31/naming-methods-and-functions/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-08-31<br>è¯‘è€…ï¼š<a href="http://weibo.com/u/2916092907">å¤©æ‰175</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a></p>
</blockquote>
<p>è¯·å„ä½éšæ„æ‰¹åˆ¤ã€‚åŒæ—¶è¯·çœ‹<a href="https://realm.io/news/swift-summit-swifty-methods-clarity-brevity/">è¿™é‡Œ</a>å’Œ<a href="http://radex.io/swift/methods/">è¿™é‡Œ</a>ã€‚</p>
<p><strong>ç®€å•æ˜äº†</strong>ã€‚æ ¹æ®ä¸Šä¸‹æ–‡ç»™åŠ¨è¯å’Œä»‹è¯åŠ ä¸Šåè¯ã€‚è¯·ä½¿ç”¨<code>removeObject(object, atIndex: index)</code>ï¼Œè€Œä¸æ˜¯<code>remove(object, at: index)</code>ã€‚ä¸è¦ä¸ºäº†è¿‡åº¦çš„ç®€æ´è€Œå½±å“æ¸…æ™°å‡†ç¡®æ€§ã€‚</p>]]>
    
    </summary>
    
      <category term="Erica Sadun" scheme="http://swiftggteam.github.io/tags/Erica-Sadun/"/>
    
      <category term="Swift å…¥é—¨" scheme="http://swiftggteam.github.io/categories/Swift-%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[åœ¨ Swift 2.0 å½“ä¸­ä½¿ç”¨ C è¯­è¨€å›è°ƒ]]></title>
    <link href="http://swiftggteam.github.io/2015/11/11/c-callbacks-in-swift/"/>
    <id>http://swiftggteam.github.io/2015/11/11/c-callbacks-in-swift/</id>
    <published>2015-11-11T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šOle Begemannï¼Œ<a href="http://oleb.net/blog/2015/06/c-callbacks-in-swift/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-06-22<br>è¯‘è€…ï¼š<a href="http://www.swiftyper.com/" target="_blank" rel="external">å°é”…</a>ï¼›æ ¡å¯¹ï¼š<a href="http://codebuild.me/" target="_blank" rel="external">shanks</a>ï¼›å®šç¨¿ï¼š<a href="http://codebuild.me/" target="_blank" rel="external">shanks</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<blockquote>
<p>æ›´æ–°:</p>
</blockquote>
<ul>
<li><p>2015-06-25<br>å¢åŠ å…³äºä¼ é€’å¦ä¸€ä¸ªï¼ˆå¯ä»¥æ•è·å¤–éƒ¨å˜é‡çš„ï¼‰é—­åŒ…åˆ° <code>userInfo</code> å‚æ•°çš„å¤‡æ³¨ã€‚</p>
</li>
<li><p>2015-07-01<br>é’ˆå¯¹ Xcode 7 beta 2 æ›´æ–°ä» <code>CGPathElement</code> åˆ›å»ºä¸€ä¸ª <code>PathElement</code> ç±»å‹çš„ä»£ç ã€‚</p>
</li>
</ul>
<p>å‡ å¹´å‰ï¼Œæˆ‘æ›¾ç»å†™è¿‡ä¸€ç¯‡å…³äºå¦‚ä½•è·å– <code>CGPath</code> å’Œ <code>UIBezierPath</code> ä¸­å…ƒç´ çš„<a href="http://oleb.net/blog/2012/12/accessing-pretty-printing-cgpath-elements/" target="_blank" rel="external">æ–‡ç« </a>ã€‚å¯ä»¥é€šè¿‡è°ƒç”¨ <a href="https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGPath/index.html#//apple_ref/c/func/CGPathApply" target="_blank" rel="external">CGPathApply</a> å‡½æ•°ï¼Œå¹¶ç»™è¿™ä¸ªå‡½æ•°ä¼ å…¥ä¸€ä¸ªå›è°ƒçš„å‡½æ•°æŒ‡é’ˆæ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚ éšå <code>CGPathApply</code> ä¼šå¯¹ path(CGPath æˆ– UIBezierPath) ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚  </p>
<a id="more"></a>
<p>å¾ˆä¸å¹¸ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ Swift 1.x ä¸­åšåˆ°è¿™ä»¶äº‹ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡åŠæ³•å°† Swift å‡½æ•°æ¡¥æ¥åˆ° C è¯­è¨€å‡½æ•°ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ C æˆ–è€… Objective-C å†™ä¸€ä¸ªå°å°çš„åŒ…è£…å±‚æ¥å¯¹è¿™ä¸ªå›è°ƒå‡½æ•°è¿›è¡Œå°è£…ã€‚</p>
<p>è€Œåœ¨ Swift 2 å½“ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨åŸç”Ÿçš„ Swift æ¥å®Œæˆè¿™ä»¶äº‹ã€‚Swift å°† C è¯­è¨€çš„å‡½æ•°æŒ‡é’ˆ<a href="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/BuildingCocoaApps/InteractingWithCAPIs.html" target="_blank" rel="external">ä½œä¸ºé—­åŒ…æ¥å¯¼å…¥</a>ã€‚åœ¨ä»»ä½•éœ€è¦ä¼ å…¥ C è¯­è¨€å‡½æ•°æŒ‡é’ˆçš„åœ°æ–¹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä¼ å…¥ä¸è¯¥å‡½æ•°æŒ‡é’ˆå‚æ•°ç›¸åŒ¹é…çš„ Swift é—­åŒ…æˆ–è€…å‡½æ•° â€”â€” é™¤äº†ä¸€ä¸ªç‰¹æ®Šæƒ…å†µï¼šä¸é—­åŒ…ä¸åŒçš„æ˜¯ï¼ŒC è¯­è¨€çš„å‡½æ•°æŒ‡é’ˆæ²¡æœ‰æ•è·çŠ¶æ€(capturing state)çš„æ¦‚å¿µã€‚å› æ­¤ï¼Œç¼–è¯‘å™¨åªå…è®¸ä¼ å…¥ä¸æ•è·ä»»ä½•å¤–éƒ¨å˜é‡çš„ Swift é—­åŒ…æ¥å¯¹Cè¯­è¨€å‡½æ•°æŒ‡é’ˆè¿›è¡Œæ¡¥æ¥ã€‚Swift ä½¿ç”¨äº†æ–°çš„ <code>@convention(c)</code> æ³¨è§£æ¥æ ‡è¯†è¿™ä¸€çº¦å®šã€‚</p>
<blockquote>
<p>ä¸‹è½½æœ¬ç¯‡æ–‡ç« çš„<a href="http://oleb.net/media/c-callbacks-in-swift.playground.zip" target="_blank" rel="external">playground</a>ï¼Œè¦æ±‚ Swift 2/Xcode 7ã€‚</p>
</blockquote>
<h2 id="è·å–_UIBezierPath_ä¸­çš„å…ƒç´ ">è·å– UIBezierPath ä¸­çš„å…ƒç´ </h2><p>è®©æˆ‘ä»¬ä½¿ç”¨è¿­ä»£ä¸€ä¸ª path ä¸­å…ƒç´ è¿™ä¸ªç†Ÿæ‚‰çš„ä»»åŠ¡æ¥ä½œä¸ºä¾‹å­ã€‚</p>
<h3 id="ä¸€ä¸ª_Swift_åŒ–åçš„æ•°æ®ç»“æ„">ä¸€ä¸ª Swift åŒ–åçš„æ•°æ®ç»“æ„</h3><p>é¦–å…ˆï¼Œè€ƒè™‘ä¸€ä¸‹æˆ‘ä»¬å¿…é¡»å¤„ç†çš„æ•°æ®ç»“æ„ã€‚<code>CGPathApply</code> ä¼šå°†ä¸€ä¸ª <a href="https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGPath/index.html#//apple_ref/c/tdef/CGPathElement" target="_blank" rel="external">CGPathElement</a> çš„æŒ‡é’ˆä¼ é€’ç»™å›è°ƒå‡½æ•°ï¼ˆæˆ–è€…é—­åŒ…ï¼‰ã€‚<code>CGPathElement</code> æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“åŒ…å«äº†ä¸€ä¸ªæ ‡è¯† path å…ƒç´ ç±»å‹çš„çš„å¸¸é‡ï¼Œä»¥åŠä¸€ä¸ª <code>CGPoint</code> ç±»å‹çš„Cè¯­è¨€æ•°ç»„ã€‚è¿™ä¸ªæ•°ç»„ä¸­çš„ç‚¹(point)çš„ä¸ªæ•°å°†åœ¨ 0 åˆ° 3 ä¹‹é—´ï¼Œå–å†³äºå…ƒç´ çš„ç±»å‹ã€‚</p>
<p>åœ¨ Swift å½“ä¸­ç›´æ¥ä½¿ç”¨ <code>CGPathElement</code> å¾ˆä¸æ–¹ä¾¿ã€‚Cè¯­è¨€æ•°ç»„åœ¨ Swift ä¸­æ˜¯è¢«å½“ä½œ <code>UnsafeMutablePointer&lt;CGPoint&gt;</code> æ¥å¯¼å…¥çš„ï¼Œå¹¶ä¸”å®ƒçš„ç”Ÿå‘½å‘¨æœŸè¢«é™åˆ¶åœ¨è¯¥å›è°ƒå‡½æ•°ä¸­ï¼Œå› æ­¤ï¼Œå¦‚æœæƒ³åœ¨åˆ«çš„åœ°æ–¹ä½¿ç”¨è¿™ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬å°±å¾—å°†å®ƒçš„å†…å®¹å¤åˆ¶å¹¶ä¿å­˜ã€‚æ›´è¿›ä¸€æ­¥åœ°ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ›´å®‰å…¨çš„æ–¹å¼æ¥è·å–æ¯ä¸ªå…ƒç´ ä¸­ç‚¹(point)çš„ä¸ªæ•°å°±æ›´å¥½äº†ã€‚</p>
<p>ä¸€ä¸ªå…³è”äº†ç‚¹(point)ä¸ªæ•°çš„ Swift æšä¸¾ï¼Œä¼šæ˜¯è¾¾åˆ°è¿™ä¸ªç›®çš„çš„ç†æƒ³ç±»å‹ã€‚æˆ‘ä»¬åŒæ—¶è¿˜è¦å®šä¹‰ä¸€ä¸ªä» <code>CGPathElement</code> è½¬æ¢çš„è‡ªå®šä¹‰æ„é€ å™¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// A Swiftified representation of a `CGPathElement`</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// Simpler and safer than `CGPathElement` because it doesnâ€™t use a</span></span><br><span class="line"><span class="comment">/// C array for the associated points.</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">PathElement</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">MoveToPoint</span>(<span class="type">CGPoint</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">AddLineToPoint</span>(<span class="type">CGPoint</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">AddQuadCurveToPoint</span>(<span class="type">CGPoint</span>, <span class="type">CGPoint</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">AddCurveToPoint</span>(<span class="type">CGPoint</span>, <span class="type">CGPoint</span>, <span class="type">CGPoint</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">CloseSubpath</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(element: <span class="type">CGPathElement</span>) &#123;</span><br><span class="line">        <span class="keyword">switch</span> element.type &#123;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">MoveToPoint</span>:</span><br><span class="line">            <span class="keyword">self</span> = .<span class="type">MoveToPoint</span>(element.points[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">AddLineToPoint</span>:</span><br><span class="line">            <span class="keyword">self</span> = .<span class="type">AddLineToPoint</span>(element.points[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">AddQuadCurveToPoint</span>:</span><br><span class="line">            <span class="keyword">self</span> = .<span class="type">AddQuadCurveToPoint</span>(element.points[<span class="number">0</span>], element.points[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">AddCurveToPoint</span>:</span><br><span class="line">            <span class="keyword">self</span> = .<span class="type">AddCurveToPoint</span>(element.points[<span class="number">0</span>], element.points[<span class="number">1</span>], element.points[<span class="number">2</span>])</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">CloseSubpath</span>:</span><br><span class="line">            <span class="keyword">self</span> = .<span class="type">CloseSubpath</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œä¸ºæˆ‘ä»¬çš„æ–°æ•°æ®ç±»å‹å®šä¹‰ä¸€ä¸ªæ ¼å¼åŒ–çš„è¾“å‡ºï¼Œè¿™å°†ä½¿æˆ‘ä»¬è°ƒè¯•æ—¶æ›´åŠ æ–¹ä¾¿ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">PathElement</span> : <span class="title">CustomDebugStringConvertible</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> debugDescription: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">MoveToPoint</span>(point):</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"<span class="subst">\(point.x)</span> <span class="subst">\(point.y)</span> moveto"</span></span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">AddLineToPoint</span>(point):</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"<span class="subst">\(point.x)</span> <span class="subst">\(point.y)</span> lineto"</span></span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">AddQuadCurveToPoint</span>(point1, point2):</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"<span class="subst">\(point1.x)</span> <span class="subst">\(point1.y)</span> <span class="subst">\(point2.x)</span> <span class="subst">\(point2.y)</span> quadcurveto"</span></span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">AddCurveToPoint</span>(point1, point2, point3):</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"<span class="subst">\(point1.x)</span> <span class="subst">\(point1.y)</span> <span class="subst">\(point2.x)</span> <span class="subst">\(point2.y)</span> <span class="subst">\(point3.x)</span> <span class="subst">\(point3.y)</span> curveto"</span></span><br><span class="line">        <span class="keyword">case</span> .<span class="type">CloseSubpath</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"closepath"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†æ¥å†å‰ï¼Œæ¥å°† <code>PathElement</code> å®ç°ä¸ºå¯æ¯”è¾ƒçš„(Equatable)ï¼ˆå› ä¸ºæˆ‘ä»¬<a href="https://developer.apple.com/videos/wwdc/2015/?id=414" target="_blank" rel="external">å§‹ç»ˆåº”è¯¥è¿™æ ·åš</a>ï¼‰</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">PathElement</span> : <span class="title">Equatable</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="func"><span class="keyword">func</span> ==<span class="params">(lhs: PathElement, rhs: PathElement)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span>(lhs, rhs) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> (.<span class="type">MoveToPoint</span>(l), .<span class="type">MoveToPoint</span>(r)):</span><br><span class="line">        <span class="keyword">return</span> l == r</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> (.<span class="type">AddLineToPoint</span>(l), .<span class="type">AddLineToPoint</span>(r)):</span><br><span class="line">        <span class="keyword">return</span> l == r</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> (.<span class="type">AddQuadCurveToPoint</span>(l1, l2), .<span class="type">AddQuadCurveToPoint</span>(r1, r2)):</span><br><span class="line">        <span class="keyword">return</span> l1 == r1 &amp;&amp; l2 == r2</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> (.<span class="type">AddCurveToPoint</span>(l1, l2, l3), .<span class="type">AddCurveToPoint</span>(r1, r2, r3)):</span><br><span class="line">        <span class="keyword">return</span> l1 == r1 &amp;&amp; l2 == r2 &amp;&amp; l3 == r3</span><br><span class="line">    <span class="keyword">case</span> (.<span class="type">CloseSubpath</span>, .<span class="type">CloseSubpath</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">case</span> (<span class="number">_</span>, <span class="number">_</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æšä¸¾_Path_å…ƒç´ ">æšä¸¾ Path å…ƒç´ </h3><p>ç°åœ¨åˆ°äº†æœ‰è¶£çš„éƒ¨åˆ†äº†ã€‚æˆ‘ä»¬è¦å¯¹ <code>UIBezierPath</code> å¢åŠ ä¸€ä¸ªåä¸º <code>elements</code> çš„è®¡ç®—å±æ€§ï¼Œå®ƒä¼šè¿­ä»£ path å¹¶ä¸”è¿”å›ä¸€ä¸ª <code>PathElement</code> ç±»å‹çš„æ•°ç»„ã€‚æˆ‘ä»¬éœ€è¦è°ƒç”¨ <code>CGPathApply()</code> å¹¶ä¼ é€’ç»™å®ƒä¸€ä¸ªé—­åŒ…å‚æ•°ï¼Œå®ƒä¼šå¯¹æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨è¿™ä¸ªé—­åŒ…ã€‚åœ¨è¿™ä¸ªé—­åŒ…å†…éƒ¨ï¼Œæˆ‘ä»¬éœ€è¦å°† <code>CGPathElement</code> è½¬åŒ–ä¸º <code>PathElement</code> å¹¶å°†å®ƒå­˜å‚¨åœ¨ä¸€ä¸ªæ•°ç»„å½“ä¸­ã€‚ æœ€åä¸€éƒ¨åˆ†çš„å®ç°å¹¶ä¸åƒå¬èµ·æ¥çš„é‚£ä¹ˆç®€å•ï¼Œå› ä¸º C å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨çº¦å®šä¸å…è®¸æˆ‘ä»¬å¯¹å¤–éƒ¨ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡è¿›è¡Œæ•è·ã€‚</p>
<p>è¿™ä¸ª API çš„çº¯ C å®ç°ä¹Ÿé¢ä¸´ç€åŒæ ·çš„é—®é¢˜ï¼Œå› æ­¤ <code>CGPathApply</code> æ¥æ”¶äº†ä¸€ä¸ªé¢å¤–çš„ <code>void *</code> ç±»å‹çš„å‚æ•°å¹¶å°†è¿™ä¸ªæŒ‡é’ˆä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚è¿™ä½¿å¾—è°ƒç”¨è€…å¯ä»¥ä¼ é€’ä¸€ä¸ªä»»æ„ç±»å‹çš„æ•°æ®ï¼ˆæ¯”å¦‚ä¸€ä¸ªæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼‰ç»™å›è°ƒå‡½æ•° â€”â€” è¿™æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚</p>
<p><code>void *</code> ç±»å‹åœ¨ Swift å½“ä¸­æ˜¯è¢«ä½œä¸º <a href="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Reference/Swift_UnsafeMutablePointer_Structure/" target="_blank" rel="external">UnsafeMutablePointer<void></void></a> å¼•å…¥çš„ã€‚æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ª Swift æ•°ç»„ç”¨äºå­˜å‚¨ <code>PathElement</code> çš„å€¼ï¼Œç„¶åä½¿ç”¨ <a href="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Reference/Swift_StandardLibrary_Functions/index.html#//apple_ref/swift/func/s:FSs24withUnsafeMutablePointeru0_rFTRq_FGVSs20UnsafeMutablePointerq__q0__q0_" target="_blank" rel="external">withUnsafeMutablePointer()</a> æ¥è·å¾—æŒ‡å‘è¿™ä¸ªæ•°ç»„çš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆä¼šä½œä¸ºå‚æ•°ä¼ é€’åˆ°è¯¥å‡½æ•°çš„é—­åŒ…ä¸­ã€‚åœ¨è¯¥é—­åŒ…å½“ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹è°ƒç”¨ <code>CGPathApply</code>ã€‚åœ¨ <code>CGPathApply</code> çš„å†…éƒ¨é—­åŒ…ä¸­æœ€åä¸€æ­¥æ˜¯è¦å°† void æŒ‡é’ˆè½¬å‹å› <code>UnsafeMutablePointer&lt;[PathElement]&gt;</code>ï¼Œå¹¶é€šè¿‡ <code>memory</code> å±æ€§æ¥ç›´æ¥è·å–åº•å±‚çš„æ•°ç»„ã€‚ï¼ˆæ³¨ï¼šæˆ‘ä¸æ˜¯å¾ˆç¡®å®šè¿™æ˜¯ä¸æ˜¯å°†ä¸€ä¸ªæ•°ç»„ä¼ é€’åˆ°é—­åŒ…ä¸­çš„æœ€å¥½æ–¹æ³•ï¼Œå¦‚æœä½ çŸ¥é“æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œè¯·è®©æˆ‘çŸ¥é“ï¼‰</p>
<p>å®Œæ•´çš„å®ç°çœ‹èµ·æ¥æ˜¯è¿™æ ·å­çš„ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIBezierPath</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> elements: [<span class="type">PathElement</span>] &#123;</span><br><span class="line">        <span class="keyword">var</span> pathElements = [<span class="type">PathElement</span>]()</span><br><span class="line">        <span class="built_in">withUnsafeMutablePointer</span>(&amp;pathElements) &#123; elementsPointer <span class="keyword">in</span></span><br><span class="line">            <span class="type">CGPathApply</span>(<span class="type">CGPath</span>, elementsPointer) &#123; (userInfo, nextElementPointer) <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">let</span> nextElement = <span class="type">PathElement</span>(element: nextElementPointer.memory)</span><br><span class="line">                <span class="keyword">let</span> elementsPointer = <span class="type">UnsafeMutablePointer</span>&lt;[<span class="type">PathElement</span>]&gt;(userInfo)</span><br><span class="line">                elementsPointer.memory.append(nextElement)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pathElements</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´æ–°ï¼šåœ¨<a href="https://forums.developer.apple.com/message/15725#15725" target="_blank" rel="external">è‹¹æœå¼€å‘è€…è®ºå›ä¸­çš„ä¸€ä¸ªå¸–å­</a>é‡Œï¼Œè‹¹æœå‘˜å·¥ Quinn â€œThe Eskimo!â€ æå‡ºäº†ä¸€ä¸ªç¨å¾®ä¸åŒçš„æ–¹æ³•ï¼šæˆ‘ä»¬å¯ä»¥ä¼ é€’æŒ‡å‘å¦ä¸€ä¸ªé—­åŒ…çš„æŒ‡é’ˆç»™ <code>userInfo</code> å‚æ•°ï¼Œè€Œéæˆ‘ä»¬æƒ³è¦æ“ä½œçš„æ•°ç»„çš„æŒ‡é’ˆã€‚å› ä¸ºè¿™ä¸ªé—­åŒ…æ²¡æœ‰è¢«Cè°ƒç”¨çº¦å®šæ‰€é™åˆ¶ï¼Œå› æ­¤å®ƒæ˜¯å¯ä»¥æ•è·å¤–éƒ¨å˜é‡çš„ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªé—­åŒ…çš„æŒ‡é’ˆä¼šæ¶‰åŠåˆ°ä¸‘é™‹çš„ <code>@convention(block)</code> æ³¨è§£å’Œ <code>unsafeBitCast</code> é­”æ³•ï¼ˆæˆ–è€…æ˜¯å°†é—­åŒ…åŒ…è£…åˆ°ä¸€ä¸ªåŒ…è£…ç±»å‹ä¸­ï¼‰ï¼Œæˆ‘ä¸å¤ªç¡®å®šæˆ‘æ˜¯å¦ä¼šå–œæ¬¢è¿™ç§å½¢å¼ã€‚ä¸è¿‡ä½¿ç”¨è¿™ç§æ–¹æ³•ç¡®å®æ˜¯ç›¸å½“æ–¹ä¾¿çš„ã€‚</p>
<h2 id="æ”¶å°¾">æ”¶å°¾</h2><p>ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªåŒ…å« path å…ƒç´ çš„æ•°ç»„ï¼Œå¾ˆè‡ªç„¶åœ°ï¼Œæˆ‘ä»¬ä¼šæƒ³è¦å°† UIBezierPath è½¬åŒ–æˆä¸€ä¸ªåºåˆ—ã€‚è¿™ä½¿å¾—ç”¨æˆ·å¯ä»¥ä½¿ç”¨ <code>for-in</code> å¾ªç¯æ¥å¯¹ path è¿›è¡Œè¿­ä»£ï¼Œæˆ–è€…ç›´æ¥å¯¹å®ƒè°ƒç”¨ <code>map</code> æˆ– <code>filter</code> æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIBezierPath</span> : <span class="title">SequenceType</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="func"><span class="keyword">func</span> <span class="title">generate</span><span class="params">()</span></span> -&gt; <span class="type">AnyGenerator</span>&lt;<span class="type">PathElement</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">anyGenerator</span>(elements.generate())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œè¿™æ˜¯ä¸€ä¸ªä¾¿äº UIBezierPath è°ƒè¯•çš„æ ¼å¼åŒ–è¾“å‡ºçš„å®ç°ï¼Œè¿™ä¸ªå®ç°å‚è€ƒäº† OS X ä¸Šçš„ NSBezierPath çš„è¾“å‡ºæ ¼å¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIBezierPath</span> : <span class="title">CustomDebugStringConvertible</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">var</span> debugDescription: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> cgPath = <span class="keyword">self</span>.<span class="type">CGPath</span>;</span><br><span class="line">        <span class="keyword">let</span> bounds = <span class="type">CGPathGetPathBoundingBox</span>(cgPath);</span><br><span class="line">        <span class="keyword">let</span> controlPointBounds = <span class="type">CGPathGetBoundingBox</span>(cgPath);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> description = <span class="string">"<span class="subst">\(<span class="keyword">self</span>.<span class="keyword">dynamicType</span>)</span>\n"</span></span><br><span class="line">            + <span class="string">"    Bounds: <span class="subst">\(bounds)</span>\n"</span></span><br><span class="line">            + <span class="string">"    Control Point Bounds: <span class="subst">\(controlPointBounds)</span>"</span></span><br><span class="line">            + elements.<span class="built_in">reduce</span>(<span class="string">""</span>, combine: &#123; (acc, element) <span class="keyword">in</span></span><br><span class="line">                acc + <span class="string">"\n    <span class="subst">\(String(reflecting: element)</span>)"</span></span><br><span class="line">            &#125;)</span><br><span class="line">        <span class="keyword">return</span> description</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ç”¨ä¸€ä¸ªç¤ºä¾‹ path æ¥è¿›è¡Œä¸€ä¸‹è¯•éªŒï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> path = <span class="type">UIBezierPath</span>()</span><br><span class="line">path.moveToPoint(<span class="type">CGPoint</span>(x: <span class="number">0</span>, y: <span class="number">0</span>))</span><br><span class="line">path.addLineToPoint(<span class="type">CGPoint</span>(x: <span class="number">100</span>, y: <span class="number">0</span>))</span><br><span class="line">path.addLineToPoint(<span class="type">CGPoint</span>(x: <span class="number">50</span>, y: <span class="number">100</span>))</span><br><span class="line">path.closePath()</span><br><span class="line">path.moveToPoint(<span class="type">CGPoint</span>(x: <span class="number">0</span>, y: <span class="number">100</span>))</span><br><span class="line">path.addQuadCurveToPoint(<span class="type">CGPoint</span>(x: <span class="number">100</span>, y: <span class="number">100</span>),</span><br><span class="line">    controlPoint: <span class="type">CGPoint</span>(x: <span class="number">50</span>, y: <span class="number">200</span>))</span><br><span class="line">path.closePath()</span><br><span class="line">path.moveToPoint(<span class="type">CGPoint</span>(x: <span class="number">100</span>, y: <span class="number">0</span>))</span><br><span class="line">path.addCurveToPoint(<span class="type">CGPoint</span>(x: <span class="number">200</span>, y: <span class="number">0</span>),</span><br><span class="line">    controlPoint1: <span class="type">CGPoint</span>(x: <span class="number">125</span>, y: <span class="number">100</span>),</span><br><span class="line">    controlPoint2: <span class="type">CGPoint</span>(x: <span class="number">175</span>, y: -<span class="number">100</span>))</span><br><span class="line">path.closePath()</span><br></pre></td></tr></table></figure>
<p><img src="/img/articles/c-callbacks-in-swift/uibezierpath-example.png1447203254.48282" alt="The example path"></p>
<p>ä¹Ÿå¯ä»¥è¿­ä»£ path ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åæ‰“å°å‡ºæ¯ä¸ªå…ƒç´ çš„æè¿°(description)å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> path &#123;</span><br><span class="line">    <span class="built_in">debugPrint</span>(element)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Output:</span><br><span class="line">0.0 0.0 moveto</span><br><span class="line">100.0 0.0 lineto</span><br><span class="line">50.0 100.0 lineto</span><br><span class="line">closepath</span><br><span class="line">0.0 100.0 moveto</span><br><span class="line">50.0 200.0 100.0 100.0 quadcurveto</span><br><span class="line">closepath</span><br><span class="line">100.0 0.0 moveto</span><br><span class="line">125.0 100.0 175.0 -100.0 200.0 0.0 curveto</span><br><span class="line">closepath</span><br><span class="line">*/</span></span><br></pre></td></tr></table></figure>
<p>æˆ–è€…ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¡ç®— path ä¸­çš„é—­åˆè·¯å¾„(closepath)çš„ä¸ªæ•°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> closePathCount = path.<span class="built_in">filter</span> &#123;</span><br><span class="line">        element <span class="keyword">in</span> element == <span class="type">PathElement</span>.<span class="type">CloseSubpath</span></span><br><span class="line">    &#125;.<span class="built_in">count</span></span><br><span class="line"><span class="comment">// -&gt; 3</span></span><br></pre></td></tr></table></figure>
<h2 id="æ€»ç»“">æ€»ç»“</h2><p>Swift 2 ä¸­è‡ªåŠ¨åœ°å°† C è¯­è¨€å‡½æ•°æŒ‡é’ˆæ¡¥æ¥åˆ°ä¸ºé—­åŒ…ã€‚è¿™ä½¿å¾—å¯¹å¤§é‡çš„æ¥æ”¶å‡½æ•°æŒ‡é’ˆçš„ C è¯­è¨€API è¿›è¡Œæ“ä½œæˆä¸ºå¯èƒ½ï¼ˆå¹¶ä¸”ç›¸å½“æ–¹ä¾¿ï¼‰ã€‚å› ä¸º C è¯­è¨€çš„è°ƒç”¨çº¦å®šï¼Œè¿™ç§ç±»å‹çš„é—­åŒ…æ— æ³•æ•è·å¤–éƒ¨çš„çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»å¸¸éœ€è¦å°†å›è°ƒé—­åŒ…ä¸­éœ€è¦ç”¨åˆ°çš„æ•°æ®é€šè¿‡ä¸€ä¸ªå¤–éƒ¨çš„ <code>void</code> ç±»å‹çš„æŒ‡é’ˆä¼ å…¥ï¼Œè€Œè¿™æ­£æ˜¯å¾ˆå¤šåŸºäºCè¯­è¨€çš„ API çš„åšæ³•ã€‚åœ¨ Swift å½“ä¸­è¿›è¡Œè¿™æ ·çš„æ“ä½œä¼šæœ‰ç‚¹ç»•ï¼Œä¸è¿‡å´æ˜¯å®Œå…¨å¯èƒ½çš„ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šOle Begemannï¼Œ<a href="http://oleb.net/blog/2015/06/c-callbacks-in-swift/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-06-22<br>è¯‘è€…ï¼š<a href="http://www.swiftyper.com/">å°é”…</a>ï¼›æ ¡å¯¹ï¼š<a href="http://codebuild.me/">shanks</a>ï¼›å®šç¨¿ï¼š<a href="http://codebuild.me/">shanks</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<blockquote>
<p>æ›´æ–°:</p>
</blockquote>
<ul>
<li><p>2015-06-25<br>å¢åŠ å…³äºä¼ é€’å¦ä¸€ä¸ªï¼ˆå¯ä»¥æ•è·å¤–éƒ¨å˜é‡çš„ï¼‰é—­åŒ…åˆ° <code>userInfo</code> å‚æ•°çš„å¤‡æ³¨ã€‚</p>
</li>
<li><p>2015-07-01<br>é’ˆå¯¹ Xcode 7 beta 2 æ›´æ–°ä» <code>CGPathElement</code> åˆ›å»ºä¸€ä¸ª <code>PathElement</code> ç±»å‹çš„ä»£ç ã€‚</p>
</li>
</ul>
<p>å‡ å¹´å‰ï¼Œæˆ‘æ›¾ç»å†™è¿‡ä¸€ç¯‡å…³äºå¦‚ä½•è·å– <code>CGPath</code> å’Œ <code>UIBezierPath</code> ä¸­å…ƒç´ çš„<a href="http://oleb.net/blog/2012/12/accessing-pretty-printing-cgpath-elements/">æ–‡ç« </a>ã€‚å¯ä»¥é€šè¿‡è°ƒç”¨ <a href="https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGPath/index.html#//apple_ref/c/func/CGPathApply">CGPathApply</a> å‡½æ•°ï¼Œå¹¶ç»™è¿™ä¸ªå‡½æ•°ä¼ å…¥ä¸€ä¸ªå›è°ƒçš„å‡½æ•°æŒ‡é’ˆæ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚ éšå <code>CGPathApply</code> ä¼šå¯¹ path(CGPath æˆ– UIBezierPath) ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚  </p>]]>
    
    </summary>
    
      <category term="Ole Begemann" scheme="http://swiftggteam.github.io/tags/Ole-Begemann/"/>
    
      <category term="Swift è¿›é˜¶" scheme="http://swiftggteam.github.io/categories/Swift-%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ä½¿ç”¨ NSUndoManager æ¥è¿›è¡Œæ’¤é”€å’Œé‡åš]]></title>
    <link href="http://swiftggteam.github.io/2015/11/10/ios-undo-and-redo-with-nsundomanager/"/>
    <id>http://swiftggteam.github.io/2015/11/10/ios-undo-and-redo-with-nsundomanager/</id>
    <published>2015-11-10T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šTomasz Szulcï¼Œ<a href="http://szulctomasz.com/ios-undo-and-redo-with-nsundomanager/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-09-13<br>è¯‘è€…ï¼š<a href="http://blog.csdn.net/yake_099" target="_blank" rel="external">Yake</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="undefined"></a></p>
</blockquote>
<p>åœ¨ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´å†… NSUndoManager å¯¹æˆ‘æ¥è¯´éƒ½æ˜¯ä¸€ä¸ªå¾ˆç¥ç§˜çš„ä¸œè¥¿ã€‚æˆ‘æƒ³å­¦ä¹ ä½¿ç”¨å®ƒï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰æ—¶é—´ã€‚ä¸€ç›´åˆ°ä»Šå¤©ï¼Œæˆ‘å†™äº†ä¸€ä¸ªç®€å•çš„åº”ç”¨ï¼Œè¿™ä¸ªåº”ç”¨åˆ›å»ºäº†ä¸€ä¸ªå¯ä»¥ç§»åŠ¨çš„çŸ©å½¢ï¼Œå¹¶ä¸”è¿˜å¯ä»¥ä¿®æ”¹çŸ©å½¢çš„å±æ€§ï¼Œä¾‹å¦‚èƒŒæ™¯è‰²æˆ–è€…åœ†è§’ã€‚</p>
<a id="more"></a>
<p>ä½ å¯ä»¥åœ¨<a href="https://github.com/tomkowz/undo-manager-practice" target="_blank" rel="external">è¿™å„¿</a>è·å–åˆ°ç¤ºä¾‹åº”ç”¨<br><a href="https://youtu.be/3Pk85X8bugk" target="_blank" rel="external">è¿™å„¿</a>æ˜¯ä¸€æ®µå°è§†é¢‘ï¼Œä½ å¯ä»¥çœ‹çœ‹è¿™ä¸ªç¤ºä¾‹åº”ç”¨æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚</p>
<p><img src="/img/articles/ios-undo-and-redo-with-nsundomanager/Screen-Shot-2015-09-13-at-17.24.19.png1447290433.4454885" alt="Screen-Shot-2015-09-13-at-17.24.19.png"></p>
<h2 id="NSUndoManager">NSUndoManager</h2><p><code>NSUndoManager</code>å…è®¸è®°å½•ç”¨æˆ·æ‰§è¡Œçš„æ“ä½œå¹¶ä¸”åè½¬è¿™ç±»æ“ä½œã€‚</p>
<p>å½“ä½ è°ƒç”¨ä¸€ä¸ªå¯ä»¥æ”¹å˜ä¸€äº›ä¸œè¥¿çš„æ–¹æ³•æˆ–è€…æ˜¯æ‰§è¡Œä¸€ä¸ªæ”¹å˜å±æ€§å€¼çš„åŠ¨ä½œï¼ˆä¾‹å¦‚ setter æ–¹æ³•ï¼‰æ—¶ï¼Œä½ å¯ä»¥æ³¨å†Œè¿™ä¸ªæ“ä½œæ¥è¿›è¡Œæ’¤é”€ã€‚</p>
<p>ä¸€ä¸ªæ’¤é”€æ“ä½œåŒ…å«äº†æ¥æ”¶æ¶ˆæ¯çš„å¯¹è±¡ï¼Œå‘é€æ¶ˆæ¯ä»¥åŠå‚æ•° - é€šå¸¸ä½ ä¼šä¼ å…¥åŸå§‹å€¼ã€‚</p>
<p><code>NSUndoManager</code>å®ä¾‹æ”¯æŒé‡åšæ“ä½œï¼Œæ‰€ä»¥æ‰èƒ½é€†è½¬æ“ä½œã€‚ä½ å¯ä»¥è®¤ä¸ºè¿™ä¸ªç®¡ç†å™¨æ‹¥æœ‰ä¸¤ä¸ªæ ˆã€‚å®é™…ä¸Šï¼Œå®ƒç®¡ç†ä¸¤ä¸ªæ ˆï¼Œ<code>undo</code>(æ’¤é”€)æ ˆå’Œ<code>redo</code>ï¼ˆé‡åšï¼‰æ ˆ - å¯¹åº”<code>NSUndoManager</code>çš„ç§æœ‰å±æ€§<code>_undoStack</code>å’Œ<code>_redoStack</code>ï¼Œé‡Œé¢å­˜å‚¨ç€ä¸€äº›æ“ä½œã€‚</p>
<p>æ³¨å†Œ<code>undo</code>æ“ä½œæ—¶ï¼Œå®ƒä¼šè¢«æ·»åŠ åˆ°<code>undo</code>æ ˆä¸­ã€‚å½“è°ƒç”¨<code>undo()</code>æ–¹æ³•æ—¶ç®¡ç†å™¨å°±ä¼šè¿›è¡Œæ’¤é”€ï¼Œæ‰§è¡Œæ ˆä¸­çš„æ“ä½œå¹¶æŠŠè¿™ä¸ªæ“ä½œç§»åŠ¨åˆ°<code>redo</code>æ ˆä¸­ï¼Œè¿™æ ·ä½ å°±å¯ä»¥é‡åšå®ƒã€‚å½“ä½ æ‹¥æœ‰å¤šä¸ª<code>undo</code>æ“ä½œæ—¶ï¼ŒæŒ‰ç…§é€†åºæ¥æ’¤é”€å’Œé‡åšè¿™äº›æ“ä½œã€‚ä½ è‚¯å®šä¸ä¼šå°†æ“ä½œç›´æ¥æ³¨å†Œåˆ°<code>redo</code>æ ˆä¸­ï¼Œå®é™…ä¸Šè¿™æ ¹æœ¬æ— æ³•å®ç°ã€‚</p>
<p>ä½ å¯ä»¥ä¸º<code>undo</code>æ“ä½œè®¾ç½®ä¸€ä¸ªçº§åˆ«ï¼Œè¿™æŒ‡çš„æ˜¯ä¸€ä¸ªç®¡ç†å™¨å¯ä»¥åœ¨å®ƒçš„æ ˆä¸­å­˜å‚¨å¤šå°‘<code>undo</code>æ“ä½œã€‚å¦‚æœæ·»åŠ çš„<code>undo</code>æ“ä½œæ•°é‡è¶…è¿‡äº†è¿™ä¸ªçº§åˆ«ï¼Œæœ€æ—©åŠ å…¥çš„é‚£ä¸ªæ“ä½œå°†ä¼šä»æ ˆä¸­ç§»é™¤ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡<code>canUndo</code>å’Œ<code>canRedo</code>æ¥æ£€æŸ¥<code>undo</code>å’Œ<code>redo</code>æ ˆçš„çŠ¶æ€ã€‚è¿™äº›çŠ¶æ€å¾ˆé‡è¦ï¼Œä½ å¯èƒ½ä¼šåŸºäºè¿™äº›æ ˆçš„çŠ¶æ€æ¥æ›´æ–° UIã€‚</p>
<p>å‡è®¾ä½ å·²ç»è®¾ç½®äº†<code>undo</code>æ“ä½œçš„çº§åˆ«å¹¶ä¸”<code>redo</code>æ ˆä¸­è¿˜æœ‰ä¸€ä¸ªæ“ä½œï¼Œå¦‚æœ<code>undo</code>æ“ä½œè¶…è¿‡äº†è¿™ä¸ªçº§åˆ«ï¼Œé‚£ä½ å°±éœ€è¦ä½¿ç”¨<code>canUndo</code>å’Œ<code>canRedo</code>æ¥æ£€æµ‹å¯ç”¨æ€§ã€‚ä¹‹æ‰€ä»¥è¦è¿™æ ·åšï¼Œæ˜¯å› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹<code>NSUndoManager</code>å°†ä¼šç§»é™¤<code>redo</code>æ“ä½œï¼Œå› ä¸ºå®ƒæ˜¯å†å²æ“ä½œä¸­æœ€æ–°çš„<code>undo</code>æ“ä½œã€‚ï¼ˆæ ¡å¯¹æ³¨ï¼šè¿™é‡Œç¡®å®å¾ˆç»•ï¼Œå¤§å®¶å¯ä»¥ç±»æ¯”ä¸€ä¸‹ç¼–è¾‘å™¨çš„æ’¤é”€å’Œé‡åšæ“ä½œï¼Œå¦‚æœä½ åœ¨æ’¤é”€ä¹‹åè¿›è¡Œäº†æ–°çš„æ”¹åŠ¨ï¼Œé‚£ä¹‹å‰æ’¤é”€è¿‡çš„æ“ä½œå…¶å®å·²ç»æ— æ³•å†è¢«é‡åšäº†ï¼Œå› æ­¤å¯ä»¥è¢«ç›´æ¥åˆ æ‰ï¼Œä»è€ŒæŠŠæ›´å¤šçš„ç©ºé—´ç•™ç»™<code>undo</code>æ“ä½œã€‚ï¼‰</p>
<h2 id="æ³¨å†Œundoæ“ä½œ">æ³¨å†Œ<code>undo</code>æ“ä½œ</h2><p>APIæä¾›äº†ä¸¤ç§æ³¨å†Œæ“ä½œçš„æ–¹æ³•ã€‚</p>
<p>ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨<code>registerUndoWithTarget(_:selector:object:)</code>æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">registerUndoAddFigure</span><span class="params">(figure: FigureView)</span></span> &#123;</span><br><span class="line">    undoManager.registerUndoWithTarget(<span class="keyword">self</span>, selector: <span class="type">Selector</span>(â€œremoveFigure:â€), object: figure)</span><br><span class="line">    undoManager.setActionName(â€œ<span class="type">Add</span> <span class="type">Figure</span>â€)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒç§æ’¤é”€æ–¹æ³•æ˜¯åŸºäº<code>NSInvocation</code>ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>prepareWithInvocationTarget(_:)</code>æ–¹æ³•æ¥æ³¨å†Œæ­¤ç±»æ“ä½œã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">registerUndoAddFigure</span><span class="params">(figure: FigureView)</span></span> &#123;</span><br><span class="line">    undoManager.prepareWithInvocationTarget(<span class="keyword">self</span>).removeFigure(figure)</span><br><span class="line">    undoManager.setActionName(<span class="string">"Add Figure"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½ å°†ä¼šå¾—åˆ°ä¸€ä¸ª<code>NSUndoManagerProxy</code>ç±»å‹å¯¹è±¡ï¼Œå¯ä»¥ç”¨å®ƒè°ƒç”¨ä»»ä½•æ–¹æ³•ï¼ˆä½†æ˜¯åªèƒ½è°ƒç”¨ç›®æ ‡å¯¹è±¡éµå®ˆçš„é‚£äº›åè®®æ–¹æ³•ï¼Œå¦åˆ™åº”ç”¨ä¼šæŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ï¼‰ã€‚æ³¨å†Œä¹‹åä»£ç†å¯¹è±¡å°†ä¼šåœ¨å†…éƒ¨åˆ›å»º<code>NSInvocation</code>å¯¹è±¡æ¥è®°å½•ä½ çš„æ“ä½œï¼Œè¿™ä¸ªå¯¹è±¡ä¼šåœ¨ä¼ å…¥çš„ç›®æ ‡å¯¹è±¡æ‰§è¡Œ<code>undo</code>æ“ä½œæ—¶è¢«è°ƒç”¨ã€‚</p>
<p>å€¼å¾—å¼ºè°ƒçš„æ˜¯ï¼Œåœ¨æ³¨å†Œè¿‡ç¨‹ä¸­ç›®æ ‡å¯¹è±¡æ²¡æœ‰è¢«æŒæœ‰ï¼Œéœ€è¦ä½ å»ç®¡ç†å®ƒã€‚å¦‚æœ<code>undo</code>æ“ä½œè¢«è°ƒç”¨è€Œç›®æ ‡å¯¹è±¡å·²ç»è¢«é”€æ¯ï¼Œå°±ä¼šäº§ç”Ÿè¿è¡Œæ—¶å¼‚å¸¸ã€‚</p>
<p>å½“å¯¹è±¡å°†è¦è¢«é”€æ¯æ—¶ä½ éœ€è¦è°ƒç”¨<code>removeAllActionsWithTarget(_:)</code>æ¥ç§»é™¤ä¸ç›®æ ‡å¯¹è±¡ç›¸å…³è”çš„ä¸€äº›æ“ä½œï¼Œæˆ–è€…è°ƒç”¨<code>removeAllActions()</code>æ¥ç§»é™¤<code>undo</code>å’Œ<code>redo</code>æ ˆä¸­æ‰€æœ‰çš„æ“ä½œ</p>
<h2 id="å°†æ“ä½œåˆ†ç»„">å°†æ“ä½œåˆ†ç»„</h2><p>åˆ†ç»„æ“ä½œæ˜¯ä¸€ä»¶å¾ˆæœ‰ç”¨çš„äº‹æƒ…ã€‚é»˜è®¤æƒ…å†µä¸‹æ“ä½œæ˜¯é€šè¿‡äº‹ä»¶è¿›è¡Œåˆ†ç»„çš„ã€‚è¿™å°±æ„å‘³ç€æ“ä½œå°†ä¼šé€šè¿‡æ¯ä¸€è½®è¿è¡Œæ—¶å¾ªç¯æ¥åˆ†ç»„ã€‚ä½ å¯ä»¥å…³é—­è‡ªåŠ¨åˆ†ç»„ï¼Œè°ƒç”¨<code>beginUndoGrouping()</code>å’Œ<code>endUndoGrouping()</code>æ–¹æ³•æ¥æ‰‹åŠ¨æ“ä½œåˆ†ç»„ã€‚</p>
<h2 id="å‘½åå¹¶æ˜¾ç¤ºæ“ä½œ">å‘½åå¹¶æ˜¾ç¤ºæ“ä½œ</h2><p><code>NSUndoManager</code>æ”¯æŒå­˜å‚¨æ“ä½œçš„åç§°ã€‚ä½ å¯ä»¥è°ƒç”¨<code>setActionName(_:)</code>æ–¹æ³•æ¥ä¸ºæ“ä½œå‘½åã€‚ç®¡ç†å™¨å·²ç»åŒ…å«<code>Undo</code>å’Œ<code>Redo</code>è¿™ä¸¤ä¸ªå•è¯çš„å¤šè¯­è¨€ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ API ç›´æ¥è·å–å¯¹åº”è¯­è¨€çš„<code>Undo/Redo</code>å­—ç¬¦ä¸²ã€‚</p>
<p>ä¸‹é¢è¿™ä¸ªæ–¹æ³•æ¥è‡ªç¤ºä¾‹åº”ç”¨ï¼Œæ¯ä¸€ä¸ªæ–°çš„<code>undo</code>æ“ä½œè¢«æ³¨å†Œæˆ–è€…<code>undo``redo</code>æ“ä½œè¢«æ‰§è¡Œä¹‹åï¼Œå°†ä¼šæ›´æ–°<code>undo</code>å’Œ<code>redo</code>æŒ‰é’®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="func"><span class="keyword">func</span> <span class="title">updateUndoAndRedoButtons</span><span class="params">()</span></span> &#123;</span><br><span class="line">    undoButton.enabled = undoManager.canUndo == <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span> undoManager.canUndo &#123;</span><br><span class="line">        undoButton.setTitle(undoManager.undoMenuTitleForUndoActionName(undoManager.undoActionName), forState: .<span class="type">Normal</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        undoButton.setTitle(undoManager.undoMenuItemTitle, forState: .<span class="type">Normal</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    redoButton.enabled = undoManager.canRedo == <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span> undoManager.canRedo &#123;</span><br><span class="line">        redoButton.setTitle(undoManager.redoMenuTitleForUndoActionName(undoManager.redoActionName), forState: .<span class="type">Normal</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        redoButton.setTitle(undoManager.redoMenuItemTitle, forState: .<span class="type">Normal</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é€šçŸ¥">é€šçŸ¥</h2><p>ç®¡ç†å™¨æœ‰å‡ ä¸ªä½ å¯ä»¥è§‚å¯Ÿçš„é€šçŸ¥ç±»å‹ã€‚åœ¨ç¤ºä¾‹åº”ç”¨ä¸­æˆ‘å…³æ³¨çš„æ˜¯<code>NSUndoManagerDidUndoChangeNotification</code>å’Œ<code>NSUndoManagerDidRedoChangeNotification</code>ã€‚ä¸ºäº†è®©åº”ç”¨å®Œç¾è¿è¡Œï¼Œæˆ‘å¯èƒ½éœ€è¦è§‚å¯Ÿæ‰€æœ‰<code>will</code>æˆ–è€…<code>did</code>ç±»å‹çš„é€šçŸ¥ï¼Œå› ä¸ºæ“ä½œå¯èƒ½è¦æ‰§è¡Œä¸€æ®µæ—¶é—´ï¼Œå¹¶ä¸”ä¸€éƒ¨åˆ†ä»£ç å¯èƒ½æ˜¯å¼‚æ­¥çš„ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹åº”ç”¨è¦æ­£ç¡®å±•ç¤º UI å°±éœ€è¦ä½¿ç”¨è¿™äº›é€šçŸ¥æ¥åˆ·æ–°<code>Undo</code>å’Œ<code>Redo</code>æŒ‰é’®ã€‚</p>
<h2 id="ä¸Šä¸‹æ–‡">ä¸Šä¸‹æ–‡</h2><p>åº”ç”¨åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­å¯èƒ½æœ‰ä¸åŒçš„ç®¡ç†å™¨ã€‚ç¤ºä¾‹åº”ç”¨åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ç”¨äº†ä¸¤ä¸ªç®¡ç†å™¨ã€‚</p>
<p>ç¬¬ä¸€ä¸ªä¸Šä¸‹æ–‡æ˜¯å—å±•æ¿ï¼Œå±•æ¿ç”¨æ¥å±•ç¤ºçŸ©å½¢å¹¶ä¸”å¯ä»¥åœ¨ä¸Šé¢ç§»åŠ¨è¿™ä¸ªçŸ©å½¢ã€‚åœ¨è¿™ä¸ªå±•æ¿ä¸Šä¸‹æ–‡ä¸­å¯èƒ½å‘ç”Ÿçš„æ“ä½œå°±æ˜¯æ·»åŠ ã€ç§»åŠ¨æˆ–è€…ç§»é™¤ä¸€ä¸ªçŸ©å½¢ã€‚</p>
<p>ç¬¬äºŒä¸ªä¸Šä¸‹æ–‡æ˜¯è¿™ä¸ªçŸ©å½¢è‡ªå·±ã€‚ä½ å¯ä»¥æ”¹å˜å®ƒçš„é¢œè‰²å’Œåœ†è§’ã€‚æˆ‘å†³å®šè¿½è¸ªå±•æ¿çš„èƒŒæ™¯è‰²ä»¥åŠåœ†è§’ï¼Œå¿½ç•¥æ‰å®ƒåœ¨å±•æ¿ä¸­çš„ä½ç½®ã€‚</p>
<p>è¿™æ ·ä½ å°±å¯ä»¥æ·»åŠ ä¸€ä¸ªçŸ©å½¢ï¼Œç§»åŠ¨å®ƒï¼Œæ”¹å˜å®ƒçš„é¢œè‰²å’Œåœ†è§’ï¼Œä½¿ç”¨<code>undo</code>æ¥æ’¤é”€ç§»åŠ¨æ“ä½œä½†æ˜¯ä¸ä¼šæ’¤é”€æ‰èƒŒæ™¯è‰²å’Œåœ†è§’çš„æ”¹å˜ã€‚ä½ æ‰€ä½¿ç”¨çš„ä¸Šä¸‹æ–‡æ•°é‡å–å†³äºä½ çš„åº”ç”¨æ˜¯æ€ä¹ˆæ ·çš„ã€‚</p>
<h2 id="å“åº”é“¾">å“åº”é“¾</h2><p>æ¯ä¸€ä¸ª<code>UIView</code>å¯¹è±¡ç»§æ‰¿è‡ª<code>UIResponder</code>ç±»å‹ï¼Œè¿™ä¸ªç±»å®šä¹‰äº†å“åº”å¯¹è±¡çš„æ¥å£å¹¶ä¸”å¤„ç†äº‹ä»¶ã€‚</p>
<p><code>UIResponder</code>ç±»å£°æ˜äº†<code>undoManager</code>å±æ€§ã€‚å½“åº”ç”¨æ¥æ”¶åˆ°<code>undo</code>äº‹ä»¶ï¼Œ<code>UIResponder</code>æ­å»ºèµ·å“åº”è€…é“¾å¹¶é€šè¿‡<code>undoManager</code>è¿”å›ä¸€ä¸ª<code>NSUndoManager</code>ç±»å‹çš„å¯¹è±¡æ¥æ‰¾åˆ°è¿™ä¸ªå“åº”è€…ã€‚æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå“åº”è€…å°†è¢«ç”¨æ¥å¤„ç†<code>undo</code>æˆ–è€…<code>redo</code>æ“ä½œã€‚</p>
<p>ä¸ºäº†ä½¿ç”¨å“åº”è€…é“¾ä½ éœ€è¦é‡è½½<code>canBecomeFirstResponder()</code>å±æ€§å¹¶ä¸”è®¾ç½®è¿”å›å€¼ä¸º<code>true</code>ï¼Œç„¶åé€šè¿‡è°ƒç”¨<code>becomeFirstResponder()</code>æ–¹æ³•ä½¿æŒæœ‰<code>undoManager</code>çš„å¯¹è±¡æˆä¸ºç¬¬ä¸€å“åº”è€…ã€‚å¦‚æœä½ å·²ç»æ­£ç¡®è®¾ç½®å¥½äº†ä¸€åˆ‡ï¼Œå¯ä»¥æ‰§è¡Œä¸€ä¸ªæ‘‡æ™ƒæ‰‹åŠ¿ï¼Œåº”ç”¨ä¼šå‡ºç°ä¸€ä¸ªè­¦å‘Šæ¡†è¯¢é—®ä½ æ˜¯å¦è¦æ‰§è¡Œ<code>undo</code>æ“ä½œã€‚</p>
<p><img src="/img/articles/ios-undo-and-redo-with-nsundomanager/undo-event.png1447290437.6564598" alt="å›¾ç‰‡äºŒ.png"></p>
<h2 id="ç¤ºä¾‹ä»£ç ">ç¤ºä¾‹ä»£ç </h2><p>å½“æˆ‘å†™è¿™ä¸ªç¤ºä¾‹ä»£ç çš„æ—¶å€™æˆ‘æ³¨æ„è‡ªå·±èŠ±è´¹äº†å¾ˆå¤šæ—¶é—´å»è€ƒè™‘â€œå…·æœ‰å”¯ä¸€ç›®çš„â€çš„æ–¹æ³•ã€‚å½“ä½ éœ€è¦æ”¯æŒæ’¤é”€å’Œé‡åšæ“ä½œæ—¶è¿™å…¶å®å¾ˆé‡è¦ï¼Œå› ä¸ºä½ è°ƒç”¨é‚£äº›æ–¹æ³•å°±æ˜¯å‡ºäºç‰¹å®šçš„ç›®çš„ã€‚</p>
<p>ä¸‹é¢çš„ç¤ºä¾‹ä»£ç æ¥è‡ªé‚£ä¸ªç¤ºä¾‹åº”ç”¨ï¼Œå®ƒå±•ç¤ºäº†åœ¨å±•æ¿ä¸­çš„æ·»åŠ ï¼Œç§»é™¤ä»¥åŠç§»åŠ¨æ“ä½œéƒ½æ˜¯æ€ä¹ˆå®ç°çš„ã€‚ä¸‹é¢æ˜¯æ‰€æœ‰ä¸<code>undo manager</code>ç›¸å…³çš„ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// MARK: Actions on Figures</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">addFigure</span><span class="params">(figure: FigureView)</span></span> &#123;</span><br><span class="line">    registerUndoAddFigure(figure)</span><br><span class="line">    </span><br><span class="line">    boardView.addSubview(figure)</span><br><span class="line">    figures.append(figure)</span><br><span class="line">    </span><br><span class="line">    updateUndoAndRedoButtons()</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">removeFigure</span><span class="params">(figure: FigureView)</span></span> &#123;</span><br><span class="line">    registerUndoRemoveFigure(figure)</span><br><span class="line">    </span><br><span class="line">    figure.removeFromSuperview()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> index = figures.indexOf(figure) &#123;</span><br><span class="line">        figures.removeAtIndex(index)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">moveFigure</span><span class="params">(figure: FigureView, center: CGPoint)</span></span> &#123;</span><br><span class="line">    registerUndoMoveFigure(figure)</span><br><span class="line">    figure.center = center</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/// MARK: Undo Manager</span></span><br><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">canBecomeFirstResponder</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">var</span> _undoManager = <span class="type">NSUndoManager</span>()</span><br><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> undoManager: <span class="type">NSUndoManager</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> _undoManager</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span> <span class="func"><span class="keyword">func</span> <span class="title">observeUndoManager</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="type">NSNotificationCenter</span>.defaultCenter().addObserver(<span class="keyword">self</span>, selector: <span class="type">Selector</span>(<span class="string">"updateUndoAndRedoButtons"</span>), name: <span class="type">NSUndoManagerDidUndoChangeNotification</span>, object: undoManager)</span><br><span class="line">    <span class="type">NSNotificationCenter</span>.defaultCenter().addObserver(<span class="keyword">self</span>, selector: <span class="type">Selector</span>(<span class="string">"updateUndoAndRedoButtons"</span>), name: <span class="type">NSUndoManagerDidRedoChangeNotification</span>, object: undoManager)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="preprocessor">@objc</span> <span class="keyword">private</span> <span class="func"><span class="keyword">func</span> <span class="title">updateUndoAndRedoButtons</span><span class="params">()</span></span> &#123;</span><br><span class="line">    undoButton.enabled = undoManager.canUndo == <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span> undoManager.canUndo &#123;</span><br><span class="line">        undoButton.setTitle(undoManager.undoMenuTitleForUndoActionName(undoManager.undoActionName), forState: .<span class="type">Normal</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        undoButton.setTitle(undoManager.undoMenuItemTitle, forState: .<span class="type">Normal</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    redoButton.enabled = undoManager.canRedo == <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span> undoManager.canRedo &#123;</span><br><span class="line">        redoButton.setTitle(undoManager.redoMenuTitleForUndoActionName(undoManager.redoActionName), forState: .<span class="type">Normal</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        redoButton.setTitle(undoManager.redoMenuItemTitle, forState: .<span class="type">Normal</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/// MARK: Undo Manager Actions</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">registerUndoAddFigure</span><span class="params">(figure: FigureView)</span></span> &#123;</span><br><span class="line">    undoManager.prepareWithInvocationTarget(<span class="keyword">self</span>).removeFigure(figure)</span><br><span class="line">    undoManager.setActionName(<span class="string">"Add Figure"</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">registerUndoRemoveFigure</span><span class="params">(figure: FigureView)</span></span> &#123;</span><br><span class="line">    undoManager.prepareWithInvocationTarget(<span class="keyword">self</span>).addFigure(figure)</span><br><span class="line">    undoManager.setActionName(<span class="string">"Remove Figure"</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">registerUndoMoveFigure</span><span class="params">(figure: FigureView)</span></span> &#123;</span><br><span class="line">    undoManager.prepareWithInvocationTarget(<span class="keyword">self</span>).moveFigure(figure, center: figure.center)</span><br><span class="line">    undoManager.setActionName(<span class="string">"Move to <span class="subst">\(figure.center)</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘åˆ›å»ºäº†ä¸€äº›<code>undo</code>ç›¸å…³çš„ç®€å•æ–¹æ³•ã€‚è¿™æ ·åšæ•ˆæœå¾ˆå¥½ï¼Œæ³¨å†Œ<code>undo</code>æ“ä½œçš„é€»è¾‘å’Œæ“ä½œæœ¬èº«çš„é€»è¾‘ç›¸åˆ†ç¦»ï¼Œä»£ç ç²¾ç®€ä¸ºä¸€å¥å‡½æ•°è°ƒç”¨ã€‚</p>
<p>æˆ‘å†³å®šæ”¾å¼ƒä½¿ç”¨<code>registerUndoWithTarget(_:selector:object:)</code>æ–¹æ³•ï¼Œå› ä¸º<code>Selector</code>æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™æ ·åšå¾ˆå±é™©ã€‚è€Œ<code>prepareWithInvocationTarget(_:)</code>çœ‹èµ·æ¥æ›´å¥½ä¸€äº›ï¼Œæ—¢å®‰å…¨åˆä¾¿äºä½¿ç”¨ã€‚</p>
<p>ä¸è¿‡ï¼Œå½“ä½ éœ€è¦è®¾ç½®å±æ€§æ—¶å¯èƒ½è¦ç”¨å¸¦<code>Selector</code>çš„æ–¹æ³•ã€‚</p>
<p>ä½ éœ€è¦ç›´æ¥è°ƒç”¨æƒ³è¦è®°å½•çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™æ ·åšä¸èƒ½è®¾ç½®å±æ€§ï¼ˆå› ä¸ºåªèƒ½è°ƒç”¨æ–¹æ³•ï¼‰ã€‚æœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼šç¬¬ä¸€ç§æ˜¯æ·»åŠ ç±»ä¼¼<code>setPropertyName(_:)</code>çš„æ–¹æ³•ï¼Œç¬¬äºŒç§æ˜¯ä½¿ç”¨<code>registerUndoWithTarget(_:selector:object:)</code>æ–¹æ³•å¹¶å°†<code>Selector</code>è®¾ç½®ä¸º<code>setPropertyName:</code>ï¼Œä½œä¸ºå‚æ•°ä¼ å…¥ã€‚</p>
<h2 id="ç»“è®º">ç»“è®º</h2><p><code>NSUndoManager</code>æ˜¯ä¸€ç§å¼ºå¤§çš„æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å‘åº”ç”¨ä¸­åŠ å…¥<code>undo</code>å’Œ<code>redo</code>æ–¹æ³•ã€‚å®ƒéœ€è¦ä½ è°¨æ…åœ°è®¾è®¡åº”ç”¨çš„ç»“æ„ï¼Œå› ä¸ºä½ éœ€è¦ä½¿ç”¨â€œå…·æœ‰å”¯ä¸€ç›®çš„æ€§â€çš„æ–¹æ³•æ¥å°†ç”¨æˆ·çš„æ“ä½œè®¾ç½®ä¸º<code>undo</code>æˆ–è€…æ˜¯<code>redo</code>ã€‚ä½†æ˜¯æ€»ä½“æ¥è¯´è¿™æ˜¯ä¸ªå¥½äº‹ï¼Œä¸æ˜¯å—ï¼Ÿè¿™ä¼šæ”¹å–„ä»£ç è®¾è®¡ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šTomasz Szulcï¼Œ<a href="http://szulctomasz.com/ios-undo-and-redo-with-nsundomanager/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-09-13<br>è¯‘è€…ï¼š<a href="http://blog.csdn.net/yake_099">Yake</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="undefined"></a></p>
</blockquote>
<p>åœ¨ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´å†… NSUndoManager å¯¹æˆ‘æ¥è¯´éƒ½æ˜¯ä¸€ä¸ªå¾ˆç¥ç§˜çš„ä¸œè¥¿ã€‚æˆ‘æƒ³å­¦ä¹ ä½¿ç”¨å®ƒï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰æ—¶é—´ã€‚ä¸€ç›´åˆ°ä»Šå¤©ï¼Œæˆ‘å†™äº†ä¸€ä¸ªç®€å•çš„åº”ç”¨ï¼Œè¿™ä¸ªåº”ç”¨åˆ›å»ºäº†ä¸€ä¸ªå¯ä»¥ç§»åŠ¨çš„çŸ©å½¢ï¼Œå¹¶ä¸”è¿˜å¯ä»¥ä¿®æ”¹çŸ©å½¢çš„å±æ€§ï¼Œä¾‹å¦‚èƒŒæ™¯è‰²æˆ–è€…åœ†è§’ã€‚</p>]]>
    
    </summary>
    
      <category term="Tomasz Szulc" scheme="http://swiftggteam.github.io/tags/Tomasz-Szulc/"/>
    
      <category term="Swift è¿›é˜¶" scheme="http://swiftggteam.github.io/categories/Swift-%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[å¥½ä»£ç æ˜¯æ€æ ·ç‚¼æˆçš„]]></title>
    <link href="http://swiftggteam.github.io/2015/11/09/what-makes-good-code/"/>
    <id>http://swiftggteam.github.io/2015/11/09/what-makes-good-code/</id>
    <published>2015-11-09T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šErica Sadunï¼Œ<a href="http://ericasadun.com/2015/10/28/what-makes-good-code/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-28<br>è¯‘è€…ï¼š<a href="http://weibo.com/linusling" target="_blank" rel="external">å°é“åŒ Linus</a>ï¼›æ ¡å¯¹ï¼š<a href="http://weibo.com/xiaoxxiao" target="_blank" rel="external">åƒå¶çŸ¥é£</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao" target="_blank" rel="external">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>æœ€è¿‘æœ‰ä¸ªäººå‘ Email é—®æˆ‘ï¼šâ€œå¥½ä»£ç æ˜¯æ€æ ·ç‚¼æˆçš„â€ã€‚ä¹‹å‰ï¼Œæˆ‘èº«ä½“æœ‰ç‚¹ä¸èˆ’æœï¼Œæ‰€ä»¥æˆ‘æ¼«æ— è¾¹é™…çš„è¯´äº†ä¸‹ã€‚ç°åœ¨å¥½å¤šäº†ï¼Œæ‰€ä»¥æˆ‘æƒ³åˆ†äº«ä¸€ä¸‹ä»¥ä¸‹è¿™äº›æƒ³æ³•ï¼Œå› ä¸ºæˆ‘è§‰å¾—è¿™äº›å¯¹äºè¿™æ¬¡é‡è¦çš„è®¨è®ºæ¥è¯´æ˜¯ä¸€ä¸ªæœ‰è¶£çš„èµ·ç‚¹ã€‚</p>
<a id="more"></a>
<p>å½“æ—¶ï¼Œæˆ‘å†™é“ï¼š</p>
<ul>
<li><p>å¥½ä»£ç å¹¶ä¸åªæ˜¯å¯ä»¥ç¼–è¯‘è€Œå·²ï¼Œå®ƒè¿˜ä¼šæ²Ÿé€šã€‚å®ƒä¼šå’Œç°åœ¨çš„ä½ äº¤è°ˆï¼Œä¹Ÿä¼šå’Œä»¥åç»´æŠ¤ä»£ç çš„ä½ äº¤è°ˆã€‚å®ƒå¯¹äºä½ çš„å›¢é˜Ÿå’Œä»»ä½•å¤–éƒ¨æ¥æŸ¥çœ‹çš„äººæ¥è¯´éƒ½æ˜¯å¯ä»¥è¢«ç†è§£çš„ã€‚</p>
</li>
<li><p>å¥½ä»£ç å¯¹å¯é æ€§å’Œå¯æµ‹è¯•æ€§çš„è¦æ±‚èƒœè¿‡èªæ˜çš„å°æŠ€å·§ã€‚å¦‚æœéœ€è¦æ¸…æ™°çš„è¡¨æ˜è‡ªå·±çš„æ„å›¾å’Œç»“æœï¼Œå¥½ä»£ç ä¼šæ›´å€¾å‘äºä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªé¢å¤–çš„æ­¥éª¤æ¥è¡¨è¾¾ã€‚</p>
</li>
<li><p>å¥½ä»£ç ä¹Ÿè€ƒè™‘å…¶ä½¿ç”¨ç¨‹åº¦ï¼Œä¸€æ®µä»£ç ä¸€æ¬¡è·‘ä¸€ç™¾ä¸‡éå’Œåªè·‘ä¸€éçš„è¦æ±‚æ˜¯ä¸åŒçš„ï¼Œå°±å¥½æ¯”åœ¨æ ‘æ—é‡Œçš„ä¸€æ£µæ ‘å’Œå­¤é›¶é›¶çš„ä¸€æ£µæ ‘é‚£æ ·ã€‚</p>
</li>
<li><p>å¥½ä»£ç å³ä½¿è¢«åˆ†è§£äº†ä¹Ÿå¯ä»¥æˆä¸ºåˆç†çš„å•å…ƒï¼Œè€Œä¸æ˜¯å¤§è§„æ¨¡çš„å•ä¸€çš„å®ç°ã€‚</p>
</li>
<li><p>å¥½ä»£ç ä¸ä»…ä»…æ˜¯å®ç°ä¸€æ¬¡æˆ–ä¸¤æ¬¡ï¼Œè€Œä¸”è¿˜è¦å®¡æŸ¥å’Œé‡æ„ã€‚è¿™æ‰æœ‰å¯èƒ½è®©å®ƒæˆä¸ºæœ€å¥½çš„å’Œæœ€å¥å£®çš„å®ç°ã€‚</p>
</li>
<li><p>å¥½ä»£ç ä¼šè€ƒè™‘åˆ°å…¨çƒåŒ–ï¼Œå¹¶æä¾›ç»™ä¸åŒæ–‡åŒ–çš„æ½œåœ¨ç”¨æˆ·ã€‚æ·»åŠ å›½é™…åŒ–ä»¥åŠç›¸å…³çš„å¯è®¿é—®æ€§ï¼Œè¿™äº›çœŸçš„æ˜¯ä»£ç å±‚é¢çš„äº‹æƒ…ï¼Œè€Œä¸æ˜¯å˜´ä¸Šè¯´è¯´çš„é©¬åç‚®è€Œå·²ã€‚</p>
</li>
<li><p>å¥½ä»£ç ä¸ä»…ä»…è€ƒè™‘ä»Šå¤©å…·ä½“è¿è¡Œåœ¨ä»€ä¹ˆç¯å¢ƒä¸Šï¼Œä¹Ÿè€ƒè™‘å¦‚ä½•é€‚åº”è¿™äº›å¯èƒ½éšæ—¶é—´å˜åŒ–çš„ç¯å¢ƒã€‚</p>
</li>
</ul>
<p>ä»¥ä¸Šæ˜¯æˆ‘æƒ³åˆ°çš„ï¼Œä½ å¯¹æˆ‘å…³äºè¿™ä¸ªâ€œå¥½ä»£ç æ˜¯æ€æ ·ç‚¼æˆçš„â€è¯é¢˜åˆ—å‡ºçš„æ¸…å•æœ‰ä»€ä¹ˆæƒ³æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹çš„ï¼ŸæœŸå¾…çœ‹åˆ°ä½ ä»¬çš„æƒ³æ³•ã€‚</p>
<p><strong>æ›´æ–°</strong></p>
<p>Seivan Heidari å»ºè®®æ·»åŠ ï¼šå¥½ä»£ç ä¼šåœ¨ä½œä¸º API ä¸ºå¤–é¢è°ƒç”¨æ—¶ï¼Œä¸æä¾›å†…éƒ¨çš„å®ç°ç»†èŠ‚ã€‚</p>
<p>Anonymous å»ºè®®æ·»åŠ ï¼šå¥½ä»£ç æ˜¯æµ‘ç„¶å¤©æˆçš„ã€‚å¥½ä»£ç å¯ä»¥ç…§ä½ éœ€è¦çš„æ ·å­æ‰§è¡Œï¼Œä¸”èƒ½è¢«æŒ‰æ—¶äº¤ä»˜ï¼Œå…¶ä½™çš„éƒ½æ˜¯æ‰¯è›‹å“ˆå“ˆã€‚</p>
<p>Dave DeLong å»ºè®®æ·»åŠ ï¼šå¥½ä»£ç ä¼šè®©è¯»çš„äººäº§ç”Ÿæ•¬ç•ï¼Œå¹¶ä½¿è¯»çš„äººå—åˆ°å¯å‘ä»è€Œä¹Ÿå»å†™è‡ªå·±çš„å¥½ä»£ç ã€‚</p>
<p>Paul Cantrell å»ºè®®æ·»åŠ ï¼šå¥½ä»£ç ä¼šæ³¨æ„æƒè¡¡ã€‚å®ƒä¼šæ ¹æ®å·¥ç¨‹æ¥æƒè¡¡,è€Œä¸æ˜¯æŒ‰ç…§ç»å¯¹çš„æ•™æ¡ã€‚å®ƒä¹Ÿä¸ä¼šè®©å·¥å…·æˆ–æŠ€æœ¯æˆä¸ºç»„å†…çŠ¶æ€æ ‡è®°(in-group status markers)ã€‚</p>
<p>Rainer Brockerhoff å»ºè®®æ·»åŠ ï¼šå¥½ä»£ç å¯ä»¥è¢«å¾ˆè½»æ¾çš„é‡ç”¨ï¼ˆå³ä½¿æ˜¯åœ¨å‡ å¹´ä¹‹åï¼‰ï¼Œä¹Ÿèƒ½åªç”¨å‡ è¡Œä»£ç æ¥è¿›è¡Œæ‰©å±•æˆ–æ”¹ç¼–ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šErica Sadunï¼Œ<a href="http://ericasadun.com/2015/10/28/what-makes-good-code/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-28<br>è¯‘è€…ï¼š<a href="http://weibo.com/linusling">å°é“åŒ Linus</a>ï¼›æ ¡å¯¹ï¼š<a href="http://weibo.com/xiaoxxiao">åƒå¶çŸ¥é£</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>æœ€è¿‘æœ‰ä¸ªäººå‘ Email é—®æˆ‘ï¼šâ€œå¥½ä»£ç æ˜¯æ€æ ·ç‚¼æˆçš„â€ã€‚ä¹‹å‰ï¼Œæˆ‘èº«ä½“æœ‰ç‚¹ä¸èˆ’æœï¼Œæ‰€ä»¥æˆ‘æ¼«æ— è¾¹é™…çš„è¯´äº†ä¸‹ã€‚ç°åœ¨å¥½å¤šäº†ï¼Œæ‰€ä»¥æˆ‘æƒ³åˆ†äº«ä¸€ä¸‹ä»¥ä¸‹è¿™äº›æƒ³æ³•ï¼Œå› ä¸ºæˆ‘è§‰å¾—è¿™äº›å¯¹äºè¿™æ¬¡é‡è¦çš„è®¨è®ºæ¥è¯´æ˜¯ä¸€ä¸ªæœ‰è¶£çš„èµ·ç‚¹ã€‚</p>]]>
    
    </summary>
    
      <category term="Erica Sadun" scheme="http://swiftggteam.github.io/tags/Erica-Sadun/"/>
    
      <category term="Swift å…¥é—¨" scheme="http://swiftggteam.github.io/categories/Swift-%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[If-Let èµ‹å€¼è¿ç®—ç¬¦]]></title>
    <link href="http://swiftggteam.github.io/2015/11/06/if-let-assignment/"/>
    <id>http://swiftggteam.github.io/2015/11/06/if-let-assignment/</id>
    <published>2015-11-06T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šWeston Hannersï¼Œ<a href="http://www.alloc-init.com/2015/10/if-let-assignment/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-29<br>è¯‘è€…ï¼š<a href="http://www.jianshu.com/users/596f2ba91ce9/latest_articles" target="_blank" rel="external">pmst</a>ï¼›æ ¡å¯¹ï¼š<a href="http://weibo.com/xiaoxxiao" target="_blank" rel="external">åƒå¶çŸ¥é£</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao" target="_blank" rel="external">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>(AKAï¼šä½ å¸Œæœ›ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰æ“ä½œç¬¦)</p>
<p>æœ‰å¤šå°‘æ¬¡ä½ æ˜¯ä»¥è¿™ç§åŒ¹é…æ¨¡å¼å®ç°çš„å‘¢ï¼Ÿ</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> value = someOptionalValue <span class="keyword">as</span>? <span class="type">String</span> &#123;</span><br><span class="line">  <span class="keyword">self</span>.value = value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä¸€ç›´ä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡ŒJSONæ•°æ®è§£ææˆ–è€…NSCodingçš„å®ç°ã€‚ä½†æˆ‘è§‰å¾—è¿™å¯¹äºSwiftæ¥è¯´æœ‰ç‚¹å•°å—¦ï¼Œåšä¿¡è‚¯å®šå­˜åœ¨æŸç§æ›´å¥½çš„æ–¹å¼ã€‚</p>
<p><a href="http://nshipster.com/swift-operators/" target="_blank" rel="external">NSHipster</a>æå‡ºè‡ªå®šä¹‰é€»è¾‘æˆ–èµ‹å€¼è¿ç®—ç¬¦(<code>||=</code>)ï¼Œè¿™çœ‹èµ·æ¥å¾ˆä¸é”™ã€‚ä¸ç®¡æ€æ ·ï¼Œå®ƒä¼¼ä¹è¿˜æœªä¸ºæ³›å‹å®ç°(ä½œè€…:å¦‚æœè¿™é‡Œæˆ‘ç†è§£é”™äº†ï¼Œè¯·å‘Šè¯‰æˆ‘).æˆ‘æƒ³æˆ‘å¯ä»¥å…ˆè¯•ä¸€è¯•â€¦</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">infix</span> <span class="keyword">operator</span> ||= &#123; <span class="keyword">associativity</span> <span class="keyword">right</span> <span class="keyword">precedence</span> <span class="number">90</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯‘è€…æ³¨: æµ‹è¯•åªæœ‰åŠ ä¸Š&lt;T&gt;æ‰èƒ½æ­£å¸¸è¿è¡Œ</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> ||= <span class="generics">&lt;T&gt;</span><span class="params">(<span class="keyword">inout</span> <span class="keyword">left</span>: T, <span class="keyword">right</span>: T?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> <span class="keyword">right</span> = <span class="keyword">right</span> &#123;</span><br><span class="line">        <span class="keyword">left</span> = <span class="keyword">right</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šå®ƒèƒ½å¤Ÿå¾ˆå¥½åœ°å·¥ä½œï¼Œæˆ‘å°†åŸä»£ç ç®€åŒ–å¦‚ä¸‹:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">self</span>.value ||= someOptionalValue <span class="keyword">as</span>? <span class="type">String</span></span><br></pre></td></tr></table></figure>
<p>æˆ–è®¸è¿™æœ‰ç‚¹å¾®ä¸è¶³é“ï¼Œä½†æ˜¯å½“ä½ éœ€è¦è¿ç»­å¤„ç†ä¸€ç³»åˆ—ä»»åŠ¡æ—¶ï¼Œè¿™èŠ‚çœäº†å¤§é‡ä»£ç ï¼Œå˜å¾—æ›´å…·å¯è¯»æ€§ã€‚</p>
<p>è¿˜æœ‰ä»¶äº‹â€¦æˆ‘ä¾ç„¶å°è¯•å»å¼„æ¸…æ¥šè¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Œä½†æˆ‘æœ€ç»ˆå®šä¹‰äº†ç¬¬äºŒä¸ªæ–¹æ³•ç”¨äºå¯é€‰ç±»å‹èµ‹å€¼ã€‚è€Œå”¯ä¸€çš„ä¸åŒæ˜¯ç°åœ¨å·¦ä¾§å‚æ•°ç±»å‹ä¸º<code>T?</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> ||= <span class="generics">&lt;T&gt;</span><span class="params">(<span class="keyword">inout</span> <span class="keyword">left</span>: T?, <span class="keyword">right</span>: T?)</span></span> &#123; <span class="comment">// The left param is now Optional</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> <span class="keyword">right</span> = <span class="keyword">right</span> &#123;</span><br><span class="line">        <span class="keyword">left</span> = <span class="keyword">right</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> someOptionalString: <span class="type">String</span>?</span><br><span class="line"></span><br><span class="line">someOptionalString ||= newValue <span class="comment">// Will assign when newValue is not optional</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ æœ‰å…´è¶£çœ‹çœ‹è¿™ä¸ªï¼Œè¯·ç‚¹å‡»<a href="http://www.alloc-init.com/wp-content/uploads/2015/10/if-let-operator.playground.zip" target="_blank" rel="external">Playground</a>ä¸‹è½½ã€‚</p>
<p>æ¸©é¦¨æç¤º: æ–‡ç« æµ‹è¯•ç¯å¢ƒæ˜¯Swift2.0ã€‚</p>
<p><strong>æ›´æ–°æ—¥å¿— 11/01/2015:</strong></p>
<p>twitterä¸Šæœ‰äººæé†’æˆ‘: rubyä¸­<code>||=</code>ç­‰ä»·äº<code>left = left || right</code>ï¼Œä¸æˆ‘æƒ³è¦å®ç°çš„<code>left = right || left</code>ä¸åŒã€‚æˆ‘å¯¹è¿™ç§ç”¨æ³•ä¸æ˜¯å¾ˆäº†è§£ï¼Œä¸ºäº†é¿å…æ··æ·†ï¼Œæˆ‘å¯èƒ½ä½¿ç”¨å¦å¤–ä¸€ä¸ªæ“ä½œç¬¦<code>?=</code>æ›¿ä»£ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">infix</span> <span class="keyword">operator</span> ?= &#123; <span class="keyword">associativity</span> <span class="keyword">right</span> <span class="keyword">precedence</span> <span class="number">90</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> ?=<span class="generics">&lt;T&gt;</span><span class="params">(<span class="keyword">inout</span> <span class="keyword">left</span>: T, <span class="keyword">right</span>: T?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> value = <span class="keyword">right</span> &#123;</span><br><span class="line">        <span class="keyword">left</span> = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> ?=<span class="generics">&lt;T&gt;</span><span class="params">(<span class="keyword">inout</span> <span class="keyword">left</span>: T?, <span class="keyword">right</span>: T?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> value = <span class="keyword">right</span> &#123;</span><br><span class="line">        <span class="keyword">left</span> = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šWeston Hannersï¼Œ<a href="http://www.alloc-init.com/2015/10/if-let-assignment/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-29<br>è¯‘è€…ï¼š<a href="http://www.jianshu.com/users/596f2ba91ce9/latest_articles">pmst</a>ï¼›æ ¡å¯¹ï¼š<a href="http://weibo.com/xiaoxxiao">åƒå¶çŸ¥é£</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>(AKAï¼šä½ å¸Œæœ›ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰æ“ä½œç¬¦)</p>
<p>æœ‰å¤šå°‘æ¬¡ä½ æ˜¯ä»¥è¿™ç§åŒ¹é…æ¨¡å¼å®ç°çš„å‘¢ï¼Ÿ</p>]]>
    
    </summary>
    
      <category term="Weston Hanners" scheme="http://swiftggteam.github.io/tags/Weston-Hanners/"/>
    
      <category term="Swift å…¥é—¨" scheme="http://swiftggteam.github.io/categories/Swift-%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Swift Playground: ä¸‰é—¨é—®é¢˜çš„è§£æ³•]]></title>
    <link href="http://swiftggteam.github.io/2015/11/05/swift-playground-the-monty-hall-problem/"/>
    <id>http://swiftggteam.github.io/2015/11/05/swift-playground-the-monty-hall-problem/</id>
    <published>2015-11-05T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šThomas Hanningï¼Œ<a href="http://www.thomashanning.com/swift-playground-the-monty-hall-problem/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-09-27<br>è¯‘è€…ï¼š<a href="https://github.com/SergioChan" target="_blank" rel="external">SergioChan</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a></p>
</blockquote>
<p>ä¸‰é—¨é—®é¢˜æ˜¯ä¸€ä¸ªè¶…çº§è®©äººæ‘¸ä¸ç€å¤´è„‘çš„æ¦‚ç‡é—®é¢˜ã€‚æˆ‘ä»¬ä¼šåœ¨ Swift Playground é‡Œæ¥æ¼”ç¤ºå®ƒçš„è§£æ³•ï¼Œè€Œä¸æ˜¯é€šè¿‡æ¯ç‡¥çš„æ•°å­¦è§£é‡Šã€‚</p>
<a id="more"></a>
<h2 id="ä¸‰é—¨é—®é¢˜">ä¸‰é—¨é—®é¢˜</h2><p>è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒå¾ˆç®€å•ã€‚åœ¨ 1990 å¹´çš„<a href="https://en.wikipedia.org/wiki/Parade_(magazine" target="_blank" rel="external">Parade</a>)æ‚å¿—ä¸­æ˜¯è¿™ä¹ˆè§£é‡Šçš„ï¼š</p>
<blockquote>
<p>å‡è®¾ä½ æ­£åœ¨å‚åŠ ä¸€ä¸ªæ¸¸æˆèŠ‚ç›®ï¼Œéœ€è¦åœ¨ä¸‰æ‰‡é—¨ä¸­é€‰æ‹©ä¸€æ‰‡ã€‚å…¶ä¸­ä¸€æ‰‡åé¢æœ‰ä¸€è¾†è½¦ï¼Œå…¶ä½™ä¸¤æ‰‡åé¢åˆ™æ˜¯ç¾Šã€‚ä½ é€‰æ‹©äº†ä¸€æ‰‡é—¨ï¼Œå‡è®¾æ˜¯ 1 å·é—¨ï¼Œä¸»æŒäººçŸ¥é“é—¨åé¢æ˜¯ä»€ä¹ˆï¼Œä»–å¼€å¯äº†å¦ä¸€æ‰‡åé¢æœ‰ç¾Šçš„é—¨ï¼Œå‡è®¾æ˜¯3å·é—¨ã€‚ç„¶åä»–é—®ä½ ï¼šâ€œä½ æƒ³é€‰æ‹© 2 å·é—¨å—ï¼Ÿâ€è¿™æ—¶å€™ä½ æ”¹å˜å†³ç­–æ˜¯æœ‰åˆ©çš„å—ï¼Ÿ</p>
</blockquote>
<p>å®é™…ä¸Šï¼Œç»“æœæ˜¯æœ‰åˆ©çš„ã€‚å¦‚æœä½ é€‰æ‹©å¦å¤–ä¸€æ‰‡é—¨ï¼Œä½ å°±æœ‰2/3çš„æ¦‚ç‡èµ¢å¾—æ±½è½¦ã€‚ç›¸åï¼Œå¦‚æœä½ ä¸æ”¹å˜ä½ çš„é€‰æ‹©ï¼Œèµ¢å¾—æ±½è½¦çš„æ¦‚ç‡å°±åªæœ‰ 1/3ã€‚å½“ç„¶ä½ å¯ä»¥ä»æ•°å­¦çš„è§’åº¦å»è¯æ˜ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬å¸Œæœ›éªŒè¯ä¸€ä¸‹ã€‚</p>
<h2 id="ç®—æ³•">ç®—æ³•</h2><p>ç®—æ³•å¾ˆç®€å•ã€‚é¦–å…ˆï¼Œä½ é€‰æ‹©ä¸€æ‰‡é—¨ã€‚ç„¶åä¸»æŒäººæ‰“å¼€ä¸€æ‰‡åé¢æœ‰ç¾Šçš„é—¨ã€‚å¦‚æœä½ çš„ç¬¬ä¸€æ¬¡é€‰æ‹©å°±é€‰ä¸­äº†æœ‰è½¦çš„é—¨ï¼Œä»–å°±è¦åœ¨å‰©ä¸‹ä¸¤æ‰‡é—¨ä¸­éšæœºé€‰æ‹©ä¸€æ‰‡å¼€å¯ã€‚å¦‚æœä½ çš„ç¬¬ä¸€æ¬¡é€‰æ‹©é€‰ä¸­çš„æ˜¯æœ‰ç¾Šçš„é—¨ï¼Œä»–å°±è¦æŠŠå‰©ä¸‹ä¸€æ‰‡ä¹Ÿæ˜¯ç¾Šçš„é—¨æ‰“å¼€ã€‚æœ€åï¼Œä½ æ˜¯å¦æ”¹å˜é€‰æ‹©å–å†³äºä½ é‡‡å–çš„ç­–ç•¥ã€‚</p>
<h2 id="Playground">Playground</h2><p>æˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªç®€å•çš„ Playground ç¨‹åºã€‚æˆ‘ä»¬ä¼šå¯¹æ¯ç§é€‰æ‹©ç­–ç•¥æ‰§è¡Œ 100000 æ¬¡æµ‹è¯•æ¥å¾—å‡ºå¤§è‡´çš„æ¦‚ç‡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Change</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Stay</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">play</span><span class="params">(strategy:Strategy,repeats:Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> wins = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">0</span>..&lt;repeats &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> car = <span class="type">Int</span>(arc4random_uniform(<span class="number">3</span>))</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> playerChoice = <span class="type">Int</span>(arc4random_uniform(<span class="number">3</span>))</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> strategy == <span class="type">Strategy</span>.<span class="type">Change</span> &#123;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> playerChoice == car &#123;</span><br><span class="line">                <span class="keyword">var</span> remainingDoors = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">                remainingDoors.removeAtIndex(playerChoice)</span><br><span class="line">                playerChoice = remainingDoors[<span class="type">Int</span>(arc4random_uniform(<span class="number">2</span>))]</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                playerChoice = car</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> car == playerChoice &#123;</span><br><span class="line">            wins++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> wins</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> repeats = <span class="number">100000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> winsStrategyChange = play(.<span class="type">Change</span>, repeats: repeats)</span><br><span class="line"><span class="keyword">var</span> winsStrategyStay = play(.<span class="type">Stay</span>, repeats: repeats)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">var</span> quoteStrategyChange = <span class="type">Double</span>(winsStrategyChange) / <span class="type">Double</span>(repeats)</span><br><span class="line"><span class="keyword">var</span> quoteStrategyStay = <span class="type">Double</span>(winsStrategyStay) / <span class="type">Double</span>(repeats)</span><br></pre></td></tr></table></figure>
<h2 id="ç»“æœ">ç»“æœ</h2><p>æ¯æ¬¡è¿è¡Œè¿™ä¸ª Playground å¾—åˆ°çš„ç»“æœéƒ½ä¸å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯éƒ½å¾ˆæ¥è¿‘çš„ã€‚ä¾‹å¦‚ï¼Œå…¶ä¸­ä¸€æ¬¡ç»“æœæ˜¯ï¼š</p>
<ul>
<li>æ”¹å˜é€‰æ‹©ä¸”èµ¢å¾—æ±½è½¦çš„æ¬¡æ•°: 66,461</li>
<li>ä¸æ”¹å˜é€‰æ‹©ä¸”èµ¢å¾—æ±½è½¦çš„æ¬¡æ•°: 33,509</li>
<li>æ”¹å˜é€‰æ‹©ä¸”èµ¢å¾—æ±½è½¦çš„æ¦‚ç‡: 0,66461</li>
<li>ä¸æ”¹å˜é€‰æ‹©ä¸”èµ¢å¾—æ±½è½¦çš„æ¦‚ç‡: 0,33509</li>
</ul>
<p>ç»“æœæ­£å¦‚ç†è®ºæ‰€é¢„è®¡çš„é‚£æ ·ã€‚å¦‚æœä½ ä¸æ”¹å˜ä½ çš„é€‰æ‹©ï¼Œä½ å°±åªæœ‰ç™¾åˆ†ä¹‹ 33 çš„æ¦‚ç‡èµ¢å¾—æ±½è½¦ã€‚å¦‚æœä½ æ”¹å˜äº†ä½ çš„é€‰æ‹©ï¼Œè¿™ä¸ªæ¦‚ç‡å°±ä¸Šå‡åˆ°äº†ç™¾åˆ†ä¹‹ 66ã€‚</p>
<h2 id="ç»“è®º">ç»“è®º</h2><p>åœ¨ Playground ä¸­åšå®éªŒæ˜¯ååˆ†æœ‰è¶£çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥éªŒè¯é‚£äº›ä¹ä¸€çœ‹æ‘¸ä¸ç€å¤´è„‘çš„ç†è®ºã€‚</p>
<h2 id="å¼•ç”¨">å¼•ç”¨</h2><p>å›¾ç‰‡: @ Lim ChewHow / shutterstock.com</p>
<p>ç»´åŸºç™¾ç§‘: <a href="https://en.wikipedia.org/wiki/Monty_Hall_problem" target="_blank" rel="external">Monty Hall Problem</a></p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šThomas Hanningï¼Œ<a href="http://www.thomashanning.com/swift-playground-the-monty-hall-problem/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-09-27<br>è¯‘è€…ï¼š<a href="https://github.com/SergioChan">SergioChan</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a></p>
</blockquote>
<p>ä¸‰é—¨é—®é¢˜æ˜¯ä¸€ä¸ªè¶…çº§è®©äººæ‘¸ä¸ç€å¤´è„‘çš„æ¦‚ç‡é—®é¢˜ã€‚æˆ‘ä»¬ä¼šåœ¨ Swift Playground é‡Œæ¥æ¼”ç¤ºå®ƒçš„è§£æ³•ï¼Œè€Œä¸æ˜¯é€šè¿‡æ¯ç‡¥çš„æ•°å­¦è§£é‡Šã€‚</p>]]>
    
    </summary>
    
      <category term="Thomas Hanning" scheme="http://swiftggteam.github.io/tags/Thomas-Hanning/"/>
    
      <category term="Swift å…¥é—¨" scheme="http://swiftggteam.github.io/categories/Swift-%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Swiftï¼šä½¿ç”¨æœ¬åœ°é—­åŒ…]]></title>
    <link href="http://swiftggteam.github.io/2015/11/04/swift-using-local-closures/"/>
    <id>http://swiftggteam.github.io/2015/11/04/swift-using-local-closures/</id>
    <published>2015-11-04T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šThomas Hanningï¼Œ<a href="http://www.thomashanning.com/swift-using-local-closures/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-22<br>è¯‘è€…ï¼š<a href="http://www.swiftyper.com/" target="_blank" rel="external">å°é”…</a>ï¼›æ ¡å¯¹ï¼š<a href="http://weibo.com/xiaoxxiao" target="_blank" rel="external">åƒå¶çŸ¥é£</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao" target="_blank" rel="external">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>é—­åŒ…ä¸€èˆ¬æ˜¯ç”¨æ¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ã€‚ä¸è¿‡æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨æœ¬åœ°é—­åŒ…ä¹Ÿæ˜¯ååˆ†æ–¹ä¾¿çš„ã€‚</p>
<p>å‡è®¾æœ‰ä¸€ä¸ª <code>ViewController</code>ï¼Œé‡Œé¢åŒ…å«äº†ä¸¤ç§ GUI æ¨¡å¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">GUIMode</span> </span>&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="type">Mode1</span></span><br><span class="line">	<span class="keyword">case</span> <span class="type">Mode2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>å¯¹äºæ¯ä¸€ç§ GUI æ¨¡å¼ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å¯¹ä¸‰ä¸ª label è®¾ç½®æŸäº›å±æ€§ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> guiMode: <span class="type">GUIMode</span> = .<span class="type">Mode1</span> &#123;</span><br><span class="line">    <span class="keyword">didSet</span> &#123;              </span><br><span class="line">        <span class="keyword">switch</span> guiMode &#123;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Mode1</span>:</span><br><span class="line">            label1.text = <span class="string">"1"</span></span><br><span class="line">            label1.textColor = <span class="type">UIColor</span>.redColor()</span><br><span class="line">            label1.font = <span class="type">UIFont</span>(name: <span class="string">"HelveticaNeue"</span>, size: <span class="number">10</span>)</span><br><span class="line">                </span><br><span class="line">            label2.text = <span class="string">"2"</span></span><br><span class="line">            label2.textColor = <span class="type">UIColor</span>.blueColor()</span><br><span class="line">            label2.font = <span class="type">UIFont</span>(name: <span class="string">"HelveticaNeue"</span>, size: <span class="number">12</span>)</span><br><span class="line">                </span><br><span class="line">            label3.text = <span class="string">"3"</span></span><br><span class="line">            label3.textColor = <span class="type">UIColor</span>.yellowColor()</span><br><span class="line">            label3.font = <span class="type">UIFont</span>(name: <span class="string">"HelveticaNeue"</span>, size: <span class="number">11</span>)</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Mode2</span>:</span><br><span class="line">            label1.text = <span class="string">"4"</span></span><br><span class="line">            label1.textColor = <span class="type">UIColor</span>.yellowColor()</span><br><span class="line">            label1.font = <span class="type">UIFont</span>(name: <span class="string">"HelveticaNeue"</span>, size: <span class="number">11</span>)</span><br><span class="line">                </span><br><span class="line">            label2.text = <span class="string">"5"</span></span><br><span class="line">            label2.textColor = <span class="type">UIColor</span>.blueColor()</span><br><span class="line">            label2.font = <span class="type">UIFont</span>(name: <span class="string">"HelveticaNeue"</span>, size: <span class="number">9</span>)</span><br><span class="line">                </span><br><span class="line">            label3.text = <span class="string">"6"</span></span><br><span class="line">            label3.textColor = <span class="type">UIColor</span>.brownColor()</span><br><span class="line">            label3.font = <span class="type">UIFont</span>(name: <span class="string">"HelveticaNeue"</span>, size: <span class="number">10</span>)</span><br><span class="line">        &#125;           </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæœ‰å¾ˆå¤šé‡å¤çš„ä»£ç ã€‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å‡½æ•°é‡Œå¯¹ä¸€ä¸ª label çš„å±æ€§è¿›è¡Œè®¾ç½®ï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°æˆ‘ä»¬åŸºæœ¬ä¸ä¼šåœ¨åˆ«çš„åœ°æ–¹å†æ¬¡ä½¿ç”¨ã€‚å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨é—­åŒ…å°±æ˜¯ä¸€ä¸ªç›¸å½“ä¸é”™çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> guiMode: <span class="type">GUIMode</span> = .<span class="type">Mode1</span> &#123;</span><br><span class="line">    <span class="keyword">didSet</span> &#123;      </span><br><span class="line">        <span class="keyword">let</span> styleLabel: (label:<span class="type">UILabel</span>,text:<span class="type">String</span>,color:<span class="type">UIColor</span>,size:<span class="type">CGFloat</span>) -&gt; () = &#123; (label,text,color,size) <span class="keyword">in</span></span><br><span class="line">            label.text = text</span><br><span class="line">            label.textColor = color</span><br><span class="line">            label.font = <span class="type">UIFont</span>(name: <span class="string">"HelveticaNeue"</span>, size:size)</span><br><span class="line">        &#125;</span><br><span class="line">                        </span><br><span class="line">        <span class="keyword">switch</span> guiMode &#123;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Mode1</span>:</span><br><span class="line">            styleLabel(label: label1, text: <span class="string">"1"</span>, color: <span class="type">UIColor</span>.redColor(), size:<span class="number">10</span>)</span><br><span class="line">            styleLabel(label: label2, text: <span class="string">"2"</span>, color: <span class="type">UIColor</span>.blueColor(), size:<span class="number">12</span>)</span><br><span class="line">            styleLabel(label: label3, text: <span class="string">"3"</span>, color: <span class="type">UIColor</span>.yellowColor(), size:<span class="number">11</span>)</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Mode2</span>:</span><br><span class="line">            styleLabel(label: label1, text: <span class="string">"4"</span>, color: <span class="type">UIColor</span>.yellowColor(), size:<span class="number">11</span>)</span><br><span class="line">            styleLabel(label: label2, text: <span class="string">"5"</span>, color: <span class="type">UIColor</span>.blackColor(), size:<span class="number">9</span>)</span><br><span class="line">            styleLabel(label: label3, text: <span class="string">"6"</span>, color: <span class="type">UIColor</span>.brownColor(), size:<span class="number">10</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¸€æ¥ï¼Œä»£ç å°±å°‘äº†å¾ˆå¤šï¼Œçœ‹èµ·æ¥ä¹Ÿæ›´åŠ ç®€æ´äº†ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šThomas Hanningï¼Œ<a href="http://www.thomashanning.com/swift-using-local-closures/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-22<br>è¯‘è€…ï¼š<a href="http://www.swiftyper.com/">å°é”…</a>ï¼›æ ¡å¯¹ï¼š<a href="http://weibo.com/xiaoxxiao">åƒå¶çŸ¥é£</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>é—­åŒ…ä¸€èˆ¬æ˜¯ç”¨æ¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ã€‚ä¸è¿‡æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨æœ¬åœ°é—­åŒ…ä¹Ÿæ˜¯ååˆ†æ–¹ä¾¿çš„ã€‚</p>
<p>å‡è®¾æœ‰ä¸€ä¸ª <code>ViewController</code>ï¼Œé‡Œé¢åŒ…å«äº†ä¸¤ç§ GUI æ¨¡å¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">GUIMode</span> </span>&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="type">Mode1</span></span><br><span class="line">	<span class="keyword">case</span> <span class="type">Mode2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
      <category term="Thomas Hanning" scheme="http://swiftggteam.github.io/tags/Thomas-Hanning/"/>
    
      <category term="Swift å…¥é—¨" scheme="http://swiftggteam.github.io/categories/Swift-%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[WatchConnectivity ä»‹ç»ï¼šå‘Šåˆ«åŠ è½½ç­‰å¾…]]></title>
    <link href="http://swiftggteam.github.io/2015/11/03/watchconnectivity-introduction-say-goodbye-to-the-spinner/"/>
    <id>http://swiftggteam.github.io/2015/11/03/watchconnectivity-introduction-say-goodbye-to-the-spinner/</id>
    <published>2015-11-03T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šNatasha The Robotï¼Œ<a href="http://natashatherobot.com/watchconnectivity-introduction-say-goodbye-to-the-spinner/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-09-21<br>è¯‘è€…ï¼š<a href="http://daizi.me" target="_blank" rel="external">å°è¢‹å­</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao" target="_blank" rel="external">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>åœ¨ WatchOS 2 ä¸Šæœ€æœ‰ä»·å€¼çš„æ–°ç‰¹æ€§å°±æ˜¯<code>WatchConnectivity</code>ï¼Œè™½ç„¶ç”¨æˆ·å¯èƒ½çœ‹ä¸åˆ°ï¼Œä½†æ˜¯è¿™ä¸ªç‰¹æ€§èƒ½è®©ä½ çš„ WatchOS åº”ç”¨æ›´åŠ å¥½ç”¨ã€‚</p>
<a id="more"></a>
<p><code>WatchConnectivity</code>æ˜¯ WatchOS 2 ä¸­çš„æ–°æ¡†æ¶ï¼Œç”¨äº Watch åº”ç”¨å’Œ iOS è®¾å¤‡ä¼ è¾“æ•°æ®çš„ã€‚<code>WatchConnectivity</code> å…³é”®çš„éƒ¨åˆ†æ˜¯ï¼Œå®ƒä½¿ä½ çš„åº”ç”¨ç¨‹åºåœ¨ç”¨æˆ·<strong>æŸ¥çœ‹ä¹‹å‰</strong>å°±æ‹¿åˆ°å¿…è¦çš„æ•°æ®ã€‚è¿™æ„å‘³ç€ç”¨æˆ·æƒ³è¦çœ‹ä½ çš„åº”ç”¨æ—¶ï¼Œä»–ä»¬å¸Œæœ›é©¬ä¸Šçœ‹åˆ°æƒ³è¦çš„æ•°æ®ï¼Œè€Œä¸æ˜¯æ„šè ¢çš„åŠ è½½ç­‰å¾…ã€‚</p>
<p>æ¯•ç«Ÿï¼Œ Apple Watch æ˜¯ä¸€ä¸ªç§»åŠ¨ä¸­ä½¿ç”¨çš„è®¾å¤‡ã€‚ç”¨æˆ·ä»¬å¯èƒ½æƒ³è¦çœ‹ä¸€ä¸¤ç§’åœ¨ iOS åº”ç”¨ä¸Šè¶…çº§å¯çˆ±çš„åˆ·æ–°åŠ¨ç”»ï¼Œä½†æ˜¾ç„¶ä»–ä»¬ä¸ä¼šå¿å—åœ¨æ‰‹è¡¨ä¸Šçœ‹åˆ°è¿™æ ·çš„åŠ¨ç”»ã€‚è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœç”¨æˆ·æ¯æ¬¡åœ¨ä»–ä»¬å¸¸è§„çš„æ‰‹è¡¨ä¸ŠæŸ¥çœ‹æ—¶é—´ï¼Œå¼•å…¥çœ¼å¸˜çš„æ˜¯ä¸€ä¸ªåŠ è½½ç­‰å¾…ç•Œé¢ï¼Œé‚£å°†ä¼šéå¸¸æ„šè ¢ï¼ŒåŒç†ï¼Œä½ çš„åº”ç”¨å¦‚æœè¿™ä¹ˆåšä¹Ÿä¸€æ ·æ„šè ¢ã€‚</p>
<p>ç°åœ¨ä½ ä¸å¿…å†æ‹…å¿ƒäº†ï¼Œ<code>WatchConnectivity</code>å®Œå…¨å¯ä»¥è§£å†³è¿™ä¸ªéš¾é¢˜ï¼Œå®ƒå¯ä»¥æ¯«æ— å‹åŠ›åœ°ä¼ è¾“ä½ åº”ç”¨ä¸Šçš„æ•°æ®åˆ° Watch åº”ç”¨ä¸Šã€‚æ•´ä¸ªè¿‡ç¨‹éƒ½æ˜¯æ— ç¼é€æ˜çš„ï¼Œä»¥è‡³äºä½ çš„ç”¨æˆ·éƒ½å¯Ÿè§‰ä¸åˆ°å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<p>é‚£ä¹ˆå°±è®©æˆ‘ä»¬ä¸€æ¢ç©¶ç«Ÿå§ï¼<code>WatchConnectivity</code>æœ‰ä¸¤ä¸ªéƒ¨åˆ†-åå°ä¼ è¾“ï¼ˆ<code>background transfers</code>ï¼‰å’Œäº¤äº’å¼æ¶ˆæ¯ï¼ˆ<code>interactive messaging</code>ï¼‰ã€‚æˆ‘å°†ä¼šåœ¨æœªæ¥çš„æ•™ç¨‹é‡Œæ¢ç©¶å®ƒçš„æ¯ä¸€ä¸ªéƒ¨åˆ†çš„æ›´å¤šç»†èŠ‚ï¼Œä½†æ˜¯è¿™é‡Œåªæ˜¯ä¸€ä¸ªæ¦‚è¿°ï¼Œæ€è€ƒä¼ è¾“æ—¶åº”è¯¥ä½¿ç”¨å“ªä¸€ç§ä¼ è¾“æ¨¡å‹ï¼š</p>
<h2 id="åå°ä¼ è¾“">åå°ä¼ è¾“</h2><p>åœ¨ä½ çš„ iOS æˆ–è€… Watch åº”ç”¨ä¸éœ€è¦é©¬ä¸Šè·å¾—ä¿¡æ¯æ—¶ä½¿ç”¨åå°ä¼ è¾“ã€‚å½“ç„¶ï¼Œåœ¨ä½ çš„ç”¨æˆ·æŠ¬èµ·ä»–ä»¬çš„æ‰‹è…•æ—¶æŸ¥çœ‹åº”ç”¨é‡Œé¢çš„æœ€æ–°æ•°æ®æ—¶ï¼Œå®ƒä¼šæ˜¾ç¤ºæ•°æ®ï¼Œä½†æ˜¯æ­¤å‰ä»–ä»¬ä¸éœ€è¦ä»»ä½•æ•°æ®ã€‚</p>
<p>å› ä¸ºåå°ä¼ è¾“ç”¨äºä¼ è¾“ä¸æ˜¯ç«‹åˆ»ä½¿ç”¨æ•°æ®ï¼Œ Apple è®¤ä¸ºä½¿ç”¨åå°ä¼ è¾“çš„æœ€ä½³æ—¶æœºæ˜¯å½“ä½ éœ€è¦æ ¹æ®ç”µæ± å®¹é‡ã€ç½‘ç»œè¿æ¥ã€ä½¿ç”¨æ¨¡å¼ä¼ è¾“æ•°æ®ç­‰çš„æ—¶å€™ã€‚</p>
<p>åœ¨ä½ çš„ iOS å’Œ Watch åº”ç”¨ä¹‹é—´çš„åå°ä¼ è¾“æ•°æ®æœ‰ä¸‰ç§æ–¹å¼ï¼š</p>
<h3 id="åº”ç”¨ä¸Šä¸‹æ–‡">åº”ç”¨ä¸Šä¸‹æ–‡</h3><p>å½“ä½ çš„ Watch åº”ç”¨åªéœ€è¦å±•ç¤ºæœ€æ–°çš„ä¿¡æ¯æ—¶ï¼Œä½¿ç”¨åº”ç”¨ä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚ï¼Œå½“ä½ çš„<code>Glance</code>æ˜¾ç¤ºæ¯”åˆ†æ—¶ï¼Œç”¨æˆ·ä¸ä¼šåœ¨æ„ä¸¤åˆ†é’Ÿä»¥å‰çš„æ¯”åˆ†æ˜¯ 4-2 ï¼Œä»–ä»¬åªåœ¨ä¹ç°åœ¨çš„æ¯”åˆ†æ˜¯ 4-4 ã€‚å¦ä¸€ä¸ªä¾‹å­æ˜¯äº¤é€šè¿è¾“åº”ç”¨ï¼Œç”¨æˆ·ä¸å…³å¿ƒæœ«ç­è½¦äº”åˆ†é’Ÿå‰ç¦»å¼€äº†è½¦ç«™ï¼Œä»–ä»¬åªå…³å¿ƒä¸‹ä¸€è¾†å…¬äº¤è½¦ä»€ä¹ˆæ—¶å€™åˆ°ã€‚</p>
<p>æ‰€ä»¥åº”ç”¨ä¸Šä¸‹æ–‡çš„å·¥ä½œæ–¹å¼æ˜¯æŠŠæ•°æ®å—æ’æˆé˜Ÿåˆ—ï¼Œå¹¶ä¸”å¦‚æœåœ¨ä¼ è¾“ä¹‹å‰æœ‰ä¸€ä¸ªæ–°çš„å¯ç”¨æ•°æ®å—ï¼ŒåŸå§‹çš„æ•°æ®å°†ä¼šè¢«æ–°æ•°æ®å–ä»£ï¼Œç„¶åå†ä¼ è¾“è¿™ä¸ªæ•°æ®ï¼Œé™¤éå®ƒåˆè¢«å…¶å®ƒæ›´æ–°çš„æ•°æ®å—ä»£æ›¿ã€‚</p>
<p><a href="http://natashatherobot.com/watchconnectivity-application-context/" target="_blank" rel="external">Tutorial: Sharing The Latest Data via Application Context</a> </p>
<h3 id="ç”¨æˆ·ä¿¡æ¯">ç”¨æˆ·ä¿¡æ¯</h3><p>ç”¨æˆ·ä¿¡æ¯æ˜¯ç”¨äºå½“ä½ éœ€è¦ç¡®è®¤ä½ çš„æ‰€æœ‰æ•°æ®æ˜¯è¢«ä¼ è¾“è¿‡çš„ï¼ˆä¸åƒåº”ç”¨ä¸Šä¸‹æ–‡ï¼‰ã€‚ç”¨æˆ·ä¿¡æ¯çš„æ•°æ®æ˜¯åœ¨ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºï¼ˆ<code>FIFO (first-in-first-out)</code>ï¼‰ é˜Ÿåˆ—ä¸­é¡ºåºä¼ è¾“ï¼Œæ‰€ä»¥æ²¡æœ‰ä¸œè¥¿è¢«è¦†ç›–ã€‚</p>
<p>ä¸€ä¸ªä¾‹å­æ˜¯ä½ å¯èƒ½æƒ³è¦åœ¨ä¸€ä¸ªæ–‡æœ¬æ¶ˆæ¯çš„åº”ç”¨ä¸­ä½¿ç”¨å®ƒ-å¯¹äºä¸€ä¸ªå®Œæ•´çš„ä¼šè¯å’Œä¸Šä¸‹æ–‡ç¯å¢ƒæ¥è¯´ï¼Œæœ€åä¸€æ¡ä¿¡æ¯å’Œç¬¬ä¸€æ¡ä¿¡æ¯æ˜¯åŒç­‰é‡è¦çš„ã€‚å¦‚æœç”¨æˆ·æ›´æ–°äº†ä»–ä»¬ç®€ä»‹ä¿¡æ¯ä¸­çš„ä¸€å°éƒ¨åˆ†ï¼ŒWatch ç®€ä»‹ä¸­ä¹Ÿåº”è¯¥åŒæ­¥è¿™äº›æ›´æ–°ã€‚</p>
<h3 id="æ–‡ä»¶ä¼ è¾“">æ–‡ä»¶ä¼ è¾“</h3><p>é¡¾åæ€ä¹‰ï¼Œåœ¨ä½ çš„ iOS å’Œ Watch åº”ç”¨ä¹‹é—´ä½¿ç”¨æ–‡ä»¶ä¼ è¾“å»ä¼ è¾“æ–‡ä»¶ï¼Œä¾‹å¦‚å›¾ç‰‡æˆ–è€…<code>plists</code>ã€‚æ–‡ä»¶ä¼ è¾“çš„ä¼˜ç‚¹æ˜¯ä½ å¯ä»¥åŒ…å«ä¸€ä¸ª<code>meta-data</code>å­—å…¸ï¼Œå…¶ä¸­åŒ…å«ä½ çš„æ–‡ä»¶åå’Œæ•°æ®ï¼Œæ¯”å¦‚è¯´è¿™æ ·ä½ å°±å¯ä»¥æ’åºä½ çš„å›¾ç‰‡ã€‚</p>
<h2 id="äº¤äº’å¼æ¶ˆæ¯">äº¤äº’å¼æ¶ˆæ¯</h2><p>ä½¿ç”¨äº¤äº’å¼æ¶ˆæ¯èƒ½å¤Ÿå®æ—¶åœ°åœ¨ä½ çš„ iOS å’Œ Watch åº”ç”¨ä¹‹é—´ä¼ è¾“æ•°æ®ï¼ä¸€ä¸ªç»ä½³çš„ç¤ºä¾‹å°±æ˜¯<a href="https://github.com/NilStack/WappyBird" target="_blank" rel="external">ã€Šåƒç´ é¸Ÿ Flappy Birdã€‹åº”ç”¨çš„ Watch ç‰ˆæœ¬å’Œ iPhone ç‰ˆæœ¬</a>-ç”¨æˆ·ç‚¹å‡» Watchï¼Œä½†æ˜¯å°é¸Ÿåœ¨æ‰‹æœºä¸Šé£ã€‚æŒ‰é’®ç‚¹å‡»é€šè¿‡äº¤äº’å¼æ¶ˆæ¯è¢«ä¼ è¾“åˆ°æ‰‹æœºä¸Šäº†ã€‚</p>
<p><img src="/img/articles/watchconnectivity-introduction-say-goodbye-to-the-spinner/flappybirdwatch.gif1447732453.5579317" alt="Flappy Bird"></p>
<p>ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œäº¤äº’å¼æ¶ˆæ¯éœ€è¦ iPhone å¼€å¯<code>&quot;reachable&quot;</code>çŠ¶æ€ã€‚æ ¹æ® Apple æ–‡æ¡£çš„è§£é‡Šæ˜¯ï¼š</p>
<blockquote>
<p>Watch åº”ç”¨çš„å¯è¾¾æ€§éœ€è¦é…å¯¹çš„ iOS è®¾å¤‡åœ¨é‡å¯ä¹‹åè‡³å°‘è§£é”ä¸€æ¬¡ã€‚</p>
</blockquote>
<h2 id="æ€»ç»“">æ€»ç»“</h2><p>æˆ‘çˆ±æ­»<a href="http://www.kristinathai.com/watchos-2-how-to-communicate-between-devices-using-watch-connectivity/" target="_blank" rel="external">Kristina Thaiâ€™s WatchConnectivity post</a> é‡Œé¢åŒºåˆ«ä¼ è¾“çš„å›¾è§£äº†ï¼š</p>
<p><img src="/img/articles/watchconnectivity-introduction-say-goodbye-to-the-spinner/Screen-Shot-2015-09-21-at-8.17.29-AM.png1447732460.5724132" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>åŒæ—¶ï¼Œæœ¬æ–‡å‚è€ƒäº† Curtis Herbert çš„æ–‡ç«  <a href="http://blog.curtisherbert.com/data-synchronization-with-watchos/" target="_blank" rel="external">Getting Data to Your WatchOS 2 App</a> ä¸­æœ€åçš„ Watch OS 2 observations éƒ¨åˆ†ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šNatasha The Robotï¼Œ<a href="http://natashatherobot.com/watchconnectivity-introduction-say-goodbye-to-the-spinner/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-09-21<br>è¯‘è€…ï¼š<a href="http://daizi.me">å°è¢‹å­</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>åœ¨ WatchOS 2 ä¸Šæœ€æœ‰ä»·å€¼çš„æ–°ç‰¹æ€§å°±æ˜¯<code>WatchConnectivity</code>ï¼Œè™½ç„¶ç”¨æˆ·å¯èƒ½çœ‹ä¸åˆ°ï¼Œä½†æ˜¯è¿™ä¸ªç‰¹æ€§èƒ½è®©ä½ çš„ WatchOS åº”ç”¨æ›´åŠ å¥½ç”¨ã€‚</p>]]>
    
    </summary>
    
      <category term="Natasha The Robot" scheme="http://swiftggteam.github.io/tags/Natasha-The-Robot/"/>
    
      <category term="Swift å…¥é—¨" scheme="http://swiftggteam.github.io/categories/Swift-%E5%85%A5%E9%97%A8/"/>
    
      <category term="WatchOS 2" scheme="http://swiftggteam.github.io/categories/WatchOS-2/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[WatchConnectivityï¼šå­¦ä¹  WCSession]]></title>
    <link href="http://swiftggteam.github.io/2015/11/02/watchconnectivity-say-hello-to-wcsession/"/>
    <id>http://swiftggteam.github.io/2015/11/02/watchconnectivity-say-hello-to-wcsession/</id>
    <published>2015-11-01T16:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šNatasha The Robotï¼Œ<a href="http://natashatherobot.com/watchconnectivity-say-hello-to-wcsession/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-09-21<br>è¯‘è€…ï¼š<a href="http://daizi.me" target="_blank" rel="external">å°è¢‹å­</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao" target="_blank" rel="external">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>åœ¨è¯»è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œè¯·æ£€æŸ¥ä¸€ä¸‹ä½ æ˜¯å¦å·²ç»å­¦ä¹ äº†ä¹‹å‰ä¸¤ç¯‡å…³äº<code>WatchOS 2</code>çš„æ–‡ç« ï¼š</p>
<ul>
<li><a href="http://natashatherobot.com/watchos-2-hello-world/" target="_blank" rel="external">WatchOS 2: Hello, World</a></li>
<li><a href="http://natashatherobot.com/watchconnectivity-introduction-say-goodbye-to-the-spinner/" target="_blank" rel="external">WatchConnectivity Introduction: Say Goodbye To The Spinner</a></li>
</ul>
<p><code>WCSession</code>å°±æ˜¯<code>WatchConnectivity</code>çš„é­”åŠ›æºæ³‰ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬èµ¶ç´§æ·±æŒ–å®ƒå§ï¼</p>
<a id="more"></a>
<p><code>WCSession.defaultSession()</code>ä¼šè¿”å›<code>WCSession</code>çš„å•ä¾‹ï¼Œç”¨äºåœ¨ iOS å’Œ Watch åº”ç”¨ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚ä½†æ˜¯ï¼Œåœ¨ä½¿ç”¨<code>WCSession</code>æ—¶ä»æœ‰ä¸€äº›å€¼å¾—æ³¨æ„çš„åœ°æ–¹ã€‚</p>
<p>é¦–å…ˆï¼Œä½ å¿…é¡»ç»™<code>session</code>è®¾ç½®ä¸€ä¸ª<code>delegate</code>å¹¶å¯åŠ¨å®ƒã€‚</p>
<blockquote>
<p>â€œé»˜è®¤çš„<code>session</code>ç”¨äºä¸¤ä¸ªå¯¹åº”åº”ç”¨çš„é€šä¿¡ï¼ˆä¾‹å¦‚ iOS åº”ç”¨å’Œå®ƒçš„åŸç”Ÿ WatchKit æ‰©å±•ï¼‰ã€‚è¿™ä¸ª<code>session</code>æä¾›å‘é€ã€æ¥æ”¶å’Œè¿½è¸ªçŠ¶æ€çš„æ–¹æ³•ã€‚</p>
<p>å¯åŠ¨ä¸€ä¸ªåº”ç”¨æ—¶ï¼Œåº”è¯¥åœ¨é»˜è®¤çš„<code>session</code>ä¸Šè®¾ç½®ä¸€ä¸ª<code>delegate</code>å¹¶å¯åŠ¨å®ƒã€‚è¿™å°†å…è®¸ç³»ç»Ÿå¡«å……çŠ¶æ€å±æ€§å’Œæä¾›ä»»ä½•ä¼˜ç§€çš„èƒŒæ™¯ä¼ è¾“ã€‚â€â€”â€” Apple æ–‡æ¡£è¯´æ˜ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ä½ çš„ä»£ç åº”è¯¥å†™æˆè¿™æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> session = <span class="type">WCSession</span>.defaultSession()</span><br><span class="line">session.delegate = <span class="keyword">self</span></span><br><span class="line">session.activateSession()</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘æ¨èå°†ä½ çš„<code>WCSession</code>ä½œä¸ºä¸€ä¸ªå•ä¾‹ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨åº”ç”¨ä¸­éšæ„ä½¿ç”¨å®ƒï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> WatchConnectivity</span><br><span class="line"></span><br><span class="line"><span class="comment">// Note that the WCSessionDelegate must be an NSObject </span></span><br><span class="line"><span class="comment">// So no, you cannot use the nice Swift struct here!</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WatchSessionManager</span>: <span class="title">NSObject</span>, <span class="title">WCSessionDelegate</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Instantiate the Singleton</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> sharedManager = <span class="type">WatchSessionManager</span>()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Keep a reference for the session, </span></span><br><span class="line">    <span class="comment">// which will be used later for sending / receiving data</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> session = <span class="type">WCSession</span>.defaultSession()</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Activate Session</span></span><br><span class="line">    <span class="comment">// This needs to be called to activate the session before first use!</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">startSession</span><span class="params">()</span></span> &#123;</span><br><span class="line">        session.delegate = <span class="keyword">self</span></span><br><span class="line">        session.activateSession()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ä½ å¯ä»¥åœ¨<code>AppDelegate</code>çš„<code>application:didFinishLaunchingWithOptions</code>æ–¹æ³•ä¸­å¯åŠ¨ä½ çš„<code>session</code>ï¼Œå¹¶ä¸”å¯ä»¥åœ¨åº”ç”¨çš„ä»»æ„ä½ç½®ä½¿ç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">@UIApplicationMain</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span>: <span class="title">UIResponder</span>, <span class="title">UIApplicationDelegate</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// truncated...</span></span><br><span class="line"></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">application</span><span class="params">(application: UIApplication,</span><br><span class="line">        didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Set up and activate your session early here!</span></span><br><span class="line">        <span class="type">WatchSessionManager</span>.sharedManager.startSession()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// truncated...</span></span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¯åŠ¨<code>session</code>æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚ä½ éœ€è¦é€šè¿‡<code>WCSession</code>çš„å¤šé‡æ£€æŸ¥ï¼Œè¿™æ ·ä½ çš„åº”ç”¨å°±ä¸éœ€è¦åšé¢å¤–çš„æ ¼å¼åŒ–ä¼ è¾“æ•°æ®å·¥ä½œã€‚</p>
<h1 id="æ£€æŸ¥è®¾å¤‡æ˜¯å¦æ”¯æŒ">æ£€æŸ¥è®¾å¤‡æ˜¯å¦æ”¯æŒ</h1><blockquote>
<p>æ£€æŸ¥ iOS è®¾å¤‡æ˜¯å¦æ”¯æŒ sessionï¼ŒWatchOS ä¹Ÿæ˜¯æ”¯æŒ session çš„ã€‚</p>
</blockquote>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ªé€šç”¨åº”ç”¨ï¼Œé‚£å°±éœ€è¦æ³¨æ„ï¼Œä¾‹å¦‚iPad ä¸æ”¯æŒ<code>WCSession</code>ï¼ˆå› ä¸º iPad ä¸èƒ½å’Œ Watch é…å¯¹ï¼‰ã€‚å› æ­¤ç¡®ä¿åœ¨ iOS é¡¹ç›®ä¸­åš<code>isSupported()</code>æ£€æŸ¥ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="type">WCSession</span>.isSupported() &#123;</span><br><span class="line">    <span class="keyword">let</span> session = <span class="type">WCSession</span>.defaultSession()</span><br><span class="line">    session.delegate = <span class="keyword">self</span></span><br><span class="line">    session.activateSession()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ„å‘³ç€ä½ çš„<code>WatchSessionManager</code>å•ä¾‹éœ€è¦é€‚åº”ä¸æ”¯æŒ<code>WCSession</code>çš„åœºæ™¯ï¼ˆä½¿ç”¨å¯é€‰å€¼ï¼‰ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Modification to the WatchSessionManager in the iOS app only</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WatchSessionManager</span>: <span class="title">NSObject</span>, <span class="title">WCSessionDelegate</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// truncated ... see above section</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// the session is now an optional, since it might not be supported</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> session: <span class="type">WCSession</span>? = <span class="type">WCSession</span>.isSupported() ? <span class="type">WCSession</span>.defaultSession() : <span class="literal">nil</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// starting a session has to now deal with it being an optional</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">startSession</span><span class="params">()</span></span> &#123;</span><br><span class="line">        session?.delegate = <span class="keyword">self</span></span><br><span class="line">        session?.activateSession()</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h1 id="Watch_ç›¸å…³çš„_iOS_App_çŠ¶æ€">Watch ç›¸å…³çš„ iOS App çŠ¶æ€</h1><p>å¦‚æœä½ ä» iOS åº”ç”¨å‘é€æ•°æ®åˆ° Watchï¼Œä½ éœ€è¦åšä¸€äº›é¢å¤–çš„æ£€æŸ¥ï¼Œè¿™æ ·å½“ Watch å¤„äºæ— æ³•æ¥å—æ•°æ®çš„çŠ¶æ€æ—¶ï¼Œä½ å°±ä¸ä¼šæµªè´¹ CPU èµ„æºå»å¤„ç†ç”¨äºä¼ è¾“çš„æ•°æ®ã€‚</p>
<p><strong>æ˜¯å¦é…å¯¹</strong></p>
<p>æ˜¾ç„¶ï¼Œä¸ºäº†ä» iOS è®¾å¤‡ä¼ è¾“æ•°æ®åˆ° Watchï¼Œç”¨æˆ·å¿…é¡»æœ‰ä¸€ä¸ª Watch å¹¶ä¸”å’Œ iOS è®¾å¤‡é…å¯¹ã€‚</p>
<p><strong>æ˜¯å¦å®‰è£… Watch åº”ç”¨</strong></p>
<p>ä¸€ä¸ªç”¨æˆ·å¯èƒ½æœ‰ä¸€å¯¹è®¾å¤‡ï¼Œå½“ç„¶å¯ä»¥é€‰æ‹©åˆ é™¤æ‰‹è¡¨ä¸­çš„åº”ç”¨ï¼Œæ‰€ä»¥ä¸ºäº†æ•°æ®ä¼ è¾“ï¼Œä½ éœ€è¦æ£€æŸ¥ä½ çš„åº”ç”¨ç¡®å®æœ‰å®‰è£…åœ¨æ‰€é…å¯¹çš„ Apple Watch ä¸Šé¢ã€‚</p>
<p>å¦‚æœç”¨æˆ·æœ‰ä¸€å¯¹è®¾å¤‡ä½†æ˜¯æ²¡æœ‰å¯¹åº”çš„åº”ç”¨ï¼Œé‚£ä½ å°±å¯ä»¥åœ¨åˆé€‚çš„æ—¶æœºå‘ç”¨æˆ·æ¨èä½ çš„åº”ç”¨ï¼Œä»–å¾ˆå¯èƒ½ä¼šå®‰è£…ä½ çš„åº”ç”¨ã€‚</p>
<p>ä¸ºäº†è®©è¿™äº›æ£€æŸ¥æ›´åŠ ç®€å•ï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨åº”ç”¨ä¸­éšæ„ä½¿ç”¨ï¼Œæˆ‘å–œæ¬¢åœ¨ iOS åº”ç”¨ä¸­åˆ›å»ºä¸€ä¸ª<code>validSession</code>å˜é‡ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Modification to the WatchSessionManager in the iOS app only</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WatchSessionManager</span>: <span class="title">NSObject</span>, <span class="title">WCSessionDelegate</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// truncated... see above</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> session: <span class="type">WCSession</span>? = <span class="type">WCSession</span>.isSupported() ? <span class="type">WCSession</span>.defaultSession() : <span class="literal">nil</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Add a validSession variable to check that the Watch is paired</span></span><br><span class="line">    <span class="comment">// and the Watch App installed to prevent extra computation </span></span><br><span class="line">    <span class="comment">// if these conditions are not met.</span></span><br><span class="line">     </span><br><span class="line">    <span class="comment">// This is a computed property, since the user can pair their device and / or</span></span><br><span class="line">    <span class="comment">// install your app while using your iOS app, so this can become valid  </span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> validSession: <span class="type">WCSession</span>? &#123;</span><br><span class="line">       </span><br><span class="line">        <span class="comment">// paired - the user has to have their device paired to the watch</span></span><br><span class="line">        <span class="comment">// watchAppInstalled - the user must have your watch app installed</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Note: if the device is paired, but your watch app is not installed</span></span><br><span class="line">        <span class="comment">// consider prompting the user to install it for a better experience</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> session = session <span class="keyword">where</span> session.paired &amp;&amp; session.watchAppInstalled &#123;</span><br><span class="line">            <span class="keyword">return</span> session</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// truncated... see above</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å¹¶å‘æ˜¯å¦å¯ç”¨</strong></p>
<p>æœ€åï¼Œå¦‚æœä½ åœ¨åº”ç”¨ä¸­æœ‰ä½¿ç”¨å¹¶å‘ï¼Œä½ å¿…é¡»æ£€æŸ¥å¹¶å‘æ˜¯å¦å¯ç”¨ã€‚æˆ‘ä¸ä¼šåœ¨<code>WatchConnectivity</code>æ•™ç¨‹ä¸­ä»‹ç»è¿‡å¤šå¹¶å‘çš„ç»†èŠ‚ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³è¦çŸ¥é“æ›´å¤šï¼Œå¯ä»¥è§‚çœ‹è¶…çº§æœ‰ç”¨å’Œå…¨é¢çš„ <a href="https://developer.apple.com/videos/wwdc/2015/?id=209" target="_blank" rel="external">WWDC 2015 Creating Complications with ClockKit session</a>ã€‚</p>
<p><strong>sessionWatchStateDidChange</strong></p>
<p>æ³¨æ„ï¼Œå¦‚æœä½ çš„ iOS åº”ç”¨éœ€è¦<code>WCSession</code>çŠ¶æ€å˜åŒ–çš„ä¿¡æ¯ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª delegate æ–¹æ³•ï¼Œä¸“é—¨ç”¨äºé€šçŸ¥<code>WCSession</code>çš„çŠ¶æ€å˜åŒ–ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** Called when any of the Watch state properties change */</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">sessionWatchStateDidChange</span><span class="params">(session: WCSession)</span></span> &#123;</span><br><span class="line">        <span class="comment">// handle state change here</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„åº”ç”¨éœ€è¦å®‰è£… Watch åº”ç”¨ï¼Œå¯ä»¥å®ç°è¿™ä¸ª<code>delegate</code>æ–¹æ³•ï¼Œç„¶åå»æ£€æµ‹ä½ çš„ Watch åº”ç”¨æ˜¯å¦çœŸæ­£å®‰è£…äº†ï¼Œå¹¶ä¸”è®©ç”¨æˆ·åœ¨ iOS åº”ç”¨ä¸­è¿›è¡Œè®¾ç½®ã€‚</p>
<h1 id="æ£€æŸ¥è®¾å¤‡å¯è¾¾çŠ¶æ€">æ£€æŸ¥è®¾å¤‡å¯è¾¾çŠ¶æ€</h1><p>ä¸ºäº†æ­£ç¡®åœ¨ iOS å’Œ Watch ä¸­ä½¿ç”¨<code>Interactive Messaging</code>ä¼ è¾“æ•°æ®ï¼Œä½ éœ€è¦åšä¸€äº›é¢å¤–çš„å·¥ä½œä»¥ç¡®ä¿ä¸¤ä¸ªåº”ç”¨å¤„äºå¯è¾¾çŠ¶æ€ï¼š</p>
<blockquote>
<p>Watch åº”ç”¨çš„å¯è¾¾çŠ¶æ€éœ€è¦æ‰€é…å¯¹çš„ iOS è®¾å¤‡åœ¨é‡å¯åè‡³å°‘è§£é”ä¸€æ¬¡ã€‚è¿™ä¸ªå±æ€§èƒ½å¤Ÿç”¨äºå†³å®š iOS è®¾å¤‡æ˜¯å¦éœ€è¦è¢«è§£é”ã€‚å¦‚æœ<code>reachable</code>è®¾ä¸º<code>NO</code>ï¼Œå¯èƒ½æ˜¯ç”±äºè®¾å¤‡é‡å¯è¿‡ï¼Œéœ€è¦è§£é”ã€‚å¦‚æœå¤„äºè¿™ç§çŠ¶æ€ï¼ŒWatch å°†ä¼šå±•ç¤ºä¸€ä¸ªæç¤ºæ¡†å»ºè®®ç”¨æˆ·å»è§£é”ä»–ä»¬é…å¯¹çš„ iOS è®¾å¤‡ã€‚</p>
</blockquote>
<p>åœ¨ä½¿ç”¨<code>Interactive Messaging</code>æ—¶ï¼Œæˆ‘å–œæ¬¢ç»™æˆ‘çš„å•ä¾‹å¢åŠ ä¸€ä¸ªé¢å¤–çš„<code>valideReachableSession</code>å˜é‡ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// MARK: Interactive Messaging</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">WatchSessionManager</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Live messaging! App has to be reachable</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> validReachableSession: <span class="type">WCSession</span>? &#123;</span><br><span class="line">        <span class="comment">// check for validSession on iOS only (see above)</span></span><br><span class="line">        <span class="comment">// in your Watch App, you can just do an if session.reachable check</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> session = validSession <span class="keyword">where</span> session.reachable &#123;</span><br><span class="line">            <span class="keyword">return</span> session</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœ<code>session</code>æ˜¯ä¸å¯è¾¾çš„ï¼Œä½ å¯ä»¥å¦‚ Apple æ‰€å»ºè®®çš„é‚£æ ·ï¼Œæç¤ºç”¨æˆ·å»è§£é”ä»–ä»¬çš„ iOS è®¾å¤‡ã€‚ä¸ºäº†è·çŸ¥ç”¨æˆ·è§£é”è®¾å¤‡ï¼Œå®ç°<code>sessionReachabilityDidChange</code>çš„<code>delegate</code>æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">sessionReachabilityDidChange</span><span class="params">(session: WCSession)</span></span> &#123;</span><br><span class="line">    <span class="comment">// handle session reachability change</span></span><br><span class="line">    <span class="keyword">if</span> session.reachable &#123;</span><br><span class="line">        <span class="comment">// great! continue on with Interactive Messaging</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ğŸ˜¥ prompt the user to unlock their iOS device</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šï¼ç°åœ¨ä½ åº”è¯¥å·²ç»çŸ¥é“äº†<code>WCSession</code>çš„ä¸€äº›è¦é¢†ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ä¼šå­¦ä¹ æ›´åŠ å¥½ç©çš„éƒ¨åˆ† â€”â€” çœŸæ­£ä½¿ç”¨å®ƒåœ¨ iOS å’Œ Watch ä¹‹é—´æ¥æ”¶å’Œå‘é€æ”¶æ®ï¼</p>
<p>ä½ å¯ä»¥åœ¨ GitHub æŸ¥çœ‹å®Œæ•´çš„<a href="https://gist.github.com/NatashaTheRobot/6bcbe79afd7e9572edf6" target="_blank" rel="external">WatchSessionManagerå•ä¾‹</a>ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šNatasha The Robotï¼Œ<a href="http://natashatherobot.com/watchconnectivity-say-hello-to-wcsession/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-09-21<br>è¯‘è€…ï¼š<a href="http://daizi.me">å°è¢‹å­</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>åœ¨è¯»è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œè¯·æ£€æŸ¥ä¸€ä¸‹ä½ æ˜¯å¦å·²ç»å­¦ä¹ äº†ä¹‹å‰ä¸¤ç¯‡å…³äº<code>WatchOS 2</code>çš„æ–‡ç« ï¼š</p>
<ul>
<li><a href="http://natashatherobot.com/watchos-2-hello-world/">WatchOS 2: Hello, World</a></li>
<li><a href="http://natashatherobot.com/watchconnectivity-introduction-say-goodbye-to-the-spinner/">WatchConnectivity Introduction: Say Goodbye To The Spinner</a></li>
</ul>
<p><code>WCSession</code>å°±æ˜¯<code>WatchConnectivity</code>çš„é­”åŠ›æºæ³‰ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬èµ¶ç´§æ·±æŒ–å®ƒå§ï¼</p>]]>
    
    </summary>
    
      <category term="Natasha The Robot" scheme="http://swiftggteam.github.io/tags/Natasha-The-Robot/"/>
    
      <category term="Swift å…¥é—¨" scheme="http://swiftggteam.github.io/categories/Swift-%E5%85%A5%E9%97%A8/"/>
    
      <category term="WatchOS 2" scheme="http://swiftggteam.github.io/categories/WatchOS-2/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[èŠä¸€èŠå•å­ï¼ˆMonadï¼‰]]></title>
    <link href="http://swiftggteam.github.io/2015/10/30/lets-talk-about-monads/"/>
    <id>http://swiftggteam.github.io/2015/10/30/lets-talk-about-monads/</id>
    <published>2015-10-30T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šOlivier Halligonï¼Œ<a href="http://alisoftware.github.io/swift/2015/10/17/lets-talk-about-monads/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-17<br>è¯‘è€…ï¼š<a href="http://www.jianshu.com/users/97c49dfd1f9f/latest_articles" target="_blank" rel="external">ray16897188</a>ï¼›æ ¡å¯¹ï¼š<a href="http://daizi.me" target="_blank" rel="external">å°è¢‹å­</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p><a href="http://alisoftware.github.io/swift/2015/10/11/thinking-in-swift-4/" target="_blank" rel="external">ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘ä»¬ç”¨<code>map</code>ã€<code>flatMap</code>è¿™ä¸¤ç§åŸºäº<code>Optional</code>å’Œ<code>Array</code>ç±»å‹çš„æ–¹æ³•åšäº†å¾ˆå¤šå¥½ç©å„¿çš„äº‹æƒ…ã€‚ä½†ä½ å¯èƒ½å¹¶æ²¡æœ‰æ„è¯†åˆ°ï¼Œä½ å·²ç»åœ¨ä¸è‡ªçŸ¥çš„æƒ…å†µä¸‹ä½¿ç”¨äº†å•å­<em>(å•å­ï¼Œå³ Monadï¼šä¸€ä¸ªå‡½æ•°å¼ç¼–ç¨‹çš„æœ¯è¯­ - è¯‘è€…æ³¨)</em>ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯å•å­ï¼Ÿ</p>
<a id="more"></a>
<h3 id="ä»€ä¹ˆæ˜¯å‡½å­ï¼ˆFunctorsï¼‰å’Œå•å­">ä»€ä¹ˆæ˜¯å‡½å­ï¼ˆFunctorsï¼‰å’Œå•å­</h3><p>æˆ‘ä»¬åœ¨<a href="http://alisoftware.github.io/swift/2015/10/11/thinking-in-swift-4/" target="_blank" rel="external">ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« </a>ä¸­å¾—çŸ¥äº†<code>map</code>å’Œ<code>flatMap</code>å¯¹äº<code>Array</code>å’Œ<code>Optional</code>æ¥è¯´æœ‰ç€ç›¸ä¼¼çš„ä½œç”¨ï¼Œç”šè‡³è¿å‡½æ•°ç­¾åéƒ½ååˆ†ç›¸ä¼¼ã€‚</p>
<p>å®é™…ä¸Šè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªç‰¹ä¾‹ï¼šå¾ˆå¤šç±»å‹éƒ½æœ‰ç±»ä¼¼<code>map</code>å’Œ<code>flatMap</code>çš„æ–¹æ³•ï¼Œè€Œè¿™äº›æ–¹æ³•éƒ½æœ‰é‚£ç§ç±»å‹çš„ç­¾åã€‚è¿™æ˜¯ä¸€ç§ååˆ†å¸¸è§çš„æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼çš„åå­—å«åš<em>å•å­</em>ã€‚</p>
<p>ä½ å¯èƒ½ä¹‹å‰åœ¨ç½‘ä¸Šçœ‹è¿‡å•å­è¿™ä¸ªæœ¯è¯­(ä¹Ÿå¯èƒ½å«åšå‡½å­)ï¼Œè¿˜çœ‹è¿‡å°è¯•è§£é‡Šè¯¥æœ¯è¯­çš„å„ç§æ¯”å–»ã€‚ä½†æ˜¯å¤§éƒ¨åˆ†æ¯”å–»éƒ½è®©å®ƒæ›´åŠ å¤æ‚éš¾æ‡‚ã€‚</p>
<p><strong>äº‹å®ä¸Šï¼Œå•å­å’Œå‡½å­æ˜¯éå¸¸ç®€å•çš„æ¦‚å¿µã€‚</strong>å®ƒå¯ä»¥æœ€ç»ˆå½’ç»“ä¸ºï¼š</p>
<p><strong>ä¸€ä¸ªå‡½å­</strong>æ˜¯ä¸€ç§è¡¨ç¤ºä¸º<code>Type&lt;T&gt;</code>çš„ç±»å‹ï¼Œå®ƒï¼š</p>
<ul>
<li>å°è£…äº†å¦ä¸€ç§ç±»å‹ï¼ˆç±»ä¼¼äºå°è£…äº†æŸä¸ª<code>T</code>ç±»å‹çš„<code>Array&lt;T&gt;</code>æˆ–<code>Optional&lt;T&gt;</code>ï¼‰</li>
<li>æœ‰ä¸€ä¸ªå…·æœ‰<code>(T-&gt;U) -&gt; Type&lt;U&gt;</code>ç­¾åçš„<code>map</code>æ–¹æ³•</li>
</ul>
<p><strong>ä¸€ä¸ªå•å­</strong>æ˜¯ä¸€ç§ç±»å‹ï¼Œå®ƒï¼š</p>
<ul>
<li>æ˜¯ä¸€ä¸ªå‡½å­ï¼ˆæ‰€ä»¥å®ƒå°è£…äº†ä¸€ä¸ª<code>T</code>ç±»å‹ï¼Œæ‹¥æœ‰ä¸€ä¸ª<code>map</code>æ–¹æ³•ï¼‰</li>
<li>è¿˜æœ‰ä¸€ä¸ªå…·æœ‰<code>(T-&gt;Type&lt;U&gt;) -&gt; Type&lt;U&gt;</code>ç­¾åçš„<code>flatMap</code>æ–¹æ³•</li>
</ul>
<p>è¿™å°±æ˜¯å¯¹<em>å•å­</em>å’Œ<em>å‡½å­</em>æ‰€éœ€è¦äº†è§£çš„ä¸€åˆ‡ï¼<strong>ä¸€ä¸ª<em>å•å­</em>å°±æ˜¯ä¸€ç§å¸¦æœ‰<code>flatMap</code>æ–¹æ³•çš„ç±»å‹ï¼Œä¸€ä¸ª<em>å‡½å­</em>å°±æ˜¯ä¸€ç§å¸¦æœ‰ä¸€ä¸ª<code>map</code>æ–¹æ³•çš„ç±»å‹ã€‚</strong>å¾ˆç®€å•ï¼Œä¸æ˜¯ä¹ˆï¼Ÿ</p>
<h3 id="å„ç§ç±»å‹çš„å•å­">å„ç§ç±»å‹çš„å•å­</h3><p>ä½ å·²ç»å­¦è¿‡ä¸¤ç§æ—¢æ˜¯<em>å‡½å­</em>åˆæ˜¯<em>å•å­</em>çš„ç±»å‹ï¼Œå®ƒä»¬æ˜¯ï¼š<code>Array&lt;T&gt;</code>å’Œ<code>Optional&lt;T&gt;</code>ã€‚å½“ç„¶ï¼Œè¿™æ ·çš„ç±»å‹è¿˜æœ‰å¾ˆå¤šã€‚</p>
<p>å®é™…ä¸Šè¿™äº›ç±»å‹çš„æ–¹æ³•ä¼šæœ‰å…¶ä»–çš„åå­—ï¼Œä¸é™äº<code>map</code>å’Œ<code>flatMap</code>ã€‚ä¾‹å¦‚ä¸€ä¸ª<a href="http://promisekit.org/" target="_blank" rel="external">Promise</a>ä¹Ÿæ˜¯ä¸€ä¸ªå•å­ï¼Œè€Œå®ƒçš„ç›¸å¯¹åº”çš„<code>map</code>å’Œ<code>flatMap</code>æ–¹æ³•å«åš<code>then</code>ã€‚</p>
<p>ä»”ç»†çœ‹ä¸€ä¸‹<code>Promise&lt;T&gt;</code>çš„<code>then</code>æ–¹æ³•ç­¾åï¼Œæ€è€ƒä¸€ä¸‹ï¼šå®ƒæ‹¿åˆ°æœªæ¥è¿”å›çš„å€¼<code>T</code>ï¼Œè¿›è¡Œå¤„ç†ï¼Œç„¶åè¦ä¹ˆè¿”å›ä¸€ä¸ªæ–°ç±»å‹<code>U</code>ï¼Œè¦ä¹ˆè¿”å›ä¸€ä¸ªå°è£…äº†è¿™ä¸ªæ–°ç±»å‹çš„ã€æ–°çš„<code>Promise&lt;U&gt;</code>â€¦ æ²¡é”™ï¼Œæˆ‘ä»¬åˆä¸€æ¬¡å¾—åˆ°äº†ç›¸åŒçš„æ–¹æ³•ç­¾åï¼Œæ‰€ä»¥<code>Promise</code>å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ä¸ª<code>å•å­</code>ï¼</p>
<p>æœ‰å¾ˆå¤šç±»å‹éƒ½ç¬¦åˆå•å­çš„å®šä¹‰ã€‚æ¯”å¦‚<code>Result</code>ï¼Œ<code>Signal</code>ï¼Œâ€¦ ä½ è¿˜å¯ä»¥æƒ³åˆ°æ›´å¤šï¼ˆå¦‚æœéœ€è¦çš„è¯ä½ ç”šè‡³å¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„å•å­ï¼‰ã€‚</p>
<p>çœ‹å‡ºç›¸ä¼¼æ€§äº†å—ï¼Ÿï¼ˆä¸ºæ–¹ä¾¿å¯¹æ¯”åŠ äº†ç©ºæ ¼ï¼‰</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Array, Optional, Promise, Result éƒ½æ˜¯å‡½å­</span></span><br><span class="line">   anArray     .<span class="built_in">map</span>( transform: <span class="type">T</span> -&gt;          <span class="type">U</span>  ) -&gt;    <span class="type">Array</span>&lt;<span class="type">U</span>&gt;</span><br><span class="line">anOptional     .<span class="built_in">map</span>( transform: <span class="type">T</span> -&gt;          <span class="type">U</span>  ) -&gt; <span class="type">Optional</span>&lt;<span class="type">U</span>&gt;</span><br><span class="line"> aPromise     .then( transform: <span class="type">T</span> -&gt;          <span class="type">U</span>  ) -&gt;  <span class="type">Promise</span>&lt;<span class="type">U</span>&gt;</span><br><span class="line">   aResult     .<span class="built_in">map</span>( transform: <span class="type">T</span> -&gt;          <span class="type">U</span>  ) -&gt;   <span class="type">Result</span>&lt;<span class="type">U</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array, Optional, Promise, Result éƒ½æ˜¯å•å­</span></span><br><span class="line">   anArray .flatMap( transform: <span class="type">T</span> -&gt;    <span class="type">Array</span>&lt;<span class="type">U</span>&gt; ) -&gt;    <span class="type">Array</span>&lt;<span class="type">U</span>&gt;</span><br><span class="line">anOptional .flatMap( transform: <span class="type">T</span> -&gt; <span class="type">Optional</span>&lt;<span class="type">U</span>&gt; ) -&gt; <span class="type">Optional</span>&lt;<span class="type">U</span>&gt;</span><br><span class="line">  aPromise    .then( transform: <span class="type">T</span> -&gt;  <span class="type">Promise</span>&lt;<span class="type">U</span>&gt; ) -&gt;  <span class="type">Promise</span>&lt;<span class="type">U</span>&gt;</span><br><span class="line">   aResult .flatMap( transform: <span class="type">T</span> -&gt;   <span class="type">Result</span>&lt;<span class="type">U</span>&gt; ) -&gt;   <span class="type">Result</span>&lt;<span class="type">U</span>&gt;</span><br></pre></td></tr></table></figure>
<h3 id="æŠŠmap()å’ŒflatMap()çº§è”èµ·æ¥">æŠŠ<code>map()</code>å’Œ<code>flatMap()</code>çº§è”èµ·æ¥</h3><p>é€šå¸¸ä½ è¿˜å¯ä»¥æŠŠè¿™ä¸¤ä¸ªæ–¹æ³•çº§è”ï¼Œè¿™ä¼šä½¿å®ƒä»¬æ›´åŠ å¼ºå¤§ã€‚ä¾‹å¦‚ï¼Œæœ€å¼€å§‹ä½ æœ‰ä¸€ä¸ª<code>Array&lt;T&gt;</code>ï¼Œé€šè¿‡ä½¿ç”¨<code>map</code>æ¥å¯¹å®ƒåš<code>è½¬æ¢</code>æ“ä½œï¼Œå¾—åˆ°ä¸€ä¸ª<code>Array&lt;U&gt;</code>ï¼Œç„¶åå¯¹è¿™ä¸ª<code>Array&lt;U&gt;</code>å†çº§è”ä¸Šä¸€ä¸ª<code>map</code>ï¼Œå¯¹å®ƒåšå¦ä¸€ä¸ª<code>è½¬æ¢</code>æ“ä½œå°†å…¶è½¬æ¢æˆä¸€ä¸ª<code>Array&lt;Z&gt;</code>ï¼Œç­‰ç­‰ã€‚è¿™ä¼šè®©ä½ çš„ä»£ç çœ‹èµ·æ¥å°±åƒæ˜¯åœ¨ç”Ÿäº§çº¿ä¸Šä¸€æ ·ï¼šæŠŠä¸€ä¸ªåˆå§‹å€¼æ‹¿æ¥ï¼Œè®©ä»–ç»è¿‡ä¸€ç³»åˆ—çš„é»‘ç›’å­å¤„ç†ï¼Œç„¶åå¾—åˆ°ä¸€ä¸ªæœ€ç»ˆçš„ç»“æœã€‚è¿™æ—¶ä½ å°±å¯ä»¥è¯´ä½ å®é™…ä¸Šæ˜¯åœ¨åš<em>å‡½æ•°å¼ç¼–ç¨‹</em>äº†ï¼</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºèŒƒå¦‚ä½•å°†<code>map</code>å’Œ<code>flatMap</code>çš„è°ƒç”¨çº§è”èµ·æ¥å»åšå¤šæ¬¡è½¬æ¢çš„ä¾‹å­ã€‚æˆ‘ä»¬ä»ä¸€ä¸ªå­—ç¬¦ä¸²å¼€å§‹ï¼ŒæŠŠå®ƒæŒ‰å•è¯åˆ†å¼€ï¼Œç„¶åä¾æ¬¡åšå¦‚ä¸‹è½¬æ¢ï¼š</p>
<ol>
<li>ç»Ÿè®¡æ¯ä¸ªå•è¯çš„å­—ç¬¦ä¸ªæ•°ï¼Œåšè®¡æ•°</li>
<li>æŠŠæ¯ä¸ªè®¡æ•°è½¬æ¢æˆä¸€ä¸ªç›¸å¯¹åº”çš„å•è¯</li>
<li>ç»™æ¯ä¸ªç»“æœåŠ ä¸ªåç¼€</li>
<li>å¯¹æ¯ä¸ªå­—ç¬¦ä¸²ç»“æœåš%è½¬ä¹‰</li>
<li>æŠŠæ¯ä¸ªå­—ç¬¦ä¸²ç»“æœè½¬æ¢æˆä¸€ä¸ª<code>NSURL</code></li>
</ol>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> formatter = <span class="type">NSNumberFormatter</span>()</span><br><span class="line">formatter.numberStyle = .<span class="type">SpellOutStyle</span></span><br><span class="line"><span class="keyword">let</span> string = <span class="string">"This is Functional Programming"</span></span><br><span class="line"><span class="keyword">let</span> translateURLs = string</span><br><span class="line">    <span class="comment">// Split the characters into words</span></span><br><span class="line">    .characters.<span class="built_in">split</span>(<span class="string">" "</span>)</span><br><span class="line">    <span class="comment">// Count the number of characters on each word</span></span><br><span class="line">    .<span class="built_in">map</span> &#123; $<span class="number">0</span>.<span class="built_in">count</span> &#125;</span><br><span class="line">     <span class="comment">// Spell out this number of chars (`stringFromNumber` can return nil)</span></span><br><span class="line">    .flatMap &#123; (n: <span class="type">Int</span>) -&gt; <span class="type">String</span>? <span class="keyword">in</span> formatter.stringFromNumber(n) &#125;</span><br><span class="line">     <span class="comment">// add " letters" suffix</span></span><br><span class="line">    .<span class="built_in">map</span> &#123; <span class="string">"<span class="subst">\($<span class="number">0</span>)</span> letters"</span> &#125;</span><br><span class="line">    <span class="comment">// encode the string so it can be used in an NSURL framgment after the # (the stringByAddingâ€¦ method can return nil)</span></span><br><span class="line">    .flatMap &#123; $<span class="number">0</span>.stringByAddingPercentEncodingWithAllowedCharacters(.<span class="type">URLFragmentAllowedCharacterSet</span>()) &#125;</span><br><span class="line">    <span class="comment">// Build an NSURL using that string (`NSURL(string: â€¦)` is failable: it can return nil)</span></span><br><span class="line">    .flatMap &#123; <span class="type">NSURL</span>(string: <span class="string">"https://translate.google.com/#auto/fr/<span class="subst">\($<span class="number">0</span>)</span>"</span>) &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(translateURLs)</span><br><span class="line"><span class="comment">// [https://translate.google.com/#auto/fr/four%20letters, https://translate.google.com/#auto/fr/two%20letters, https://translate.google.com/#auto/fr/ten%20letters, https://translate.google.com/#auto/fr/eleven%20letters]</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™æ®µä»£ç å¯èƒ½éœ€è¦ä½ ç ”ç©¶ä¸€ä¼šå„¿ï¼Œå°è¯•å»ç†è§£æ¯ä¸€ä¸ªä¸­é—´é˜¶æ®µçš„<code>map</code>å’Œ<code>flatMap</code>çš„ç­¾åæ˜¯ä»€ä¹ˆï¼Œå¹¶ææ¸…æ¥šæ¯ä¸€æ­¥éƒ½å‘ç”Ÿäº†ä»€ä¹ˆäº‹ã€‚</p>
<p>ä½†æ— è®ºå¦‚ä½•ï¼Œä½ èƒ½çœ‹å‡ºæ¥å¯¹äºæè¿°ä¸€ç³»åˆ—å¤„ç†æµç¨‹æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ç§å¾ˆå¥½çš„æ–¹å¼ã€‚è¿™ç§æ–¹å¼å¯ä»¥è¢«çœ‹åšæ˜¯ä¸€æ¡ç”Ÿäº§çº¿ï¼Œä»<code>åŸææ–™</code>å¼€å§‹ï¼Œç„¶åå¯¹å®ƒåšå¤šç§<code>è½¬æ¢</code>ï¼Œæœ€ç»ˆåœ¨ç”Ÿäº§çº¿çš„å°½å¤´æ‹¿åˆ°<code>æˆå“</code>ã€‚</p>
<h3 id="ç»“è®º">ç»“è®º</h3><p>å°½ç®¡çœ‹èµ·æ¥å¾ˆå“äººï¼Œä½†å•å­å¾ˆç®€å•ã€‚</p>
<p>ä½†å®é™…ä¸Šï¼Œä½ æ€ä¹ˆå«å®ƒä»¬éƒ½æ²¡å…³ç³»ã€‚åªè¦ä½ çŸ¥é“å¦‚æœä½ æƒ³æŠŠä¸€ç§å°è£…ç±»å‹è½¬æ¢æˆå¦ä¸€ç§ï¼Œè€ŒæŸäº›ç±»å‹çš„<code>map</code>å’Œ<code>flatMap</code>æ–¹æ³•ç€å®èƒ½å¸®åˆ°ä½ ï¼Œè¿™å°±å¤Ÿäº†ã€‚</p>
<hr>
<p>è¿™ç¯‡æ–‡ç« æ˜¯â€Swiftç¼–ç¨‹æ€æƒ³â€ç³»åˆ—çš„åè®°ã€‚åˆ«æ‹…å¿ƒï¼Œæˆ‘è¿˜ä¼šå†™å¾ˆå¤šæ–‡ç« ï¼Œè®ºè¿° Swift åœ¨å…¶ä»–åº”ç”¨åœºæ™¯ä¸‹çš„ç¾å¦™ä¹‹å¤„ï¼Œä¸è¿‡æˆ‘ä¸ä¼šå†æ‹¿è¿™äº›å’Œ ObjC æ¯”è¾ƒäº†ï¼ˆå› ä¸º Swift çœŸçš„å¥½å¤ªå¤šäº†ï¼Œä½ ç°åœ¨åº”è¯¥å®Œå…¨æŠŠ ObjC å¿˜æ‰äº† ğŸ˜„ï¼‰ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šOlivier Halligonï¼Œ<a href="http://alisoftware.github.io/swift/2015/10/17/lets-talk-about-monads/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-17<br>è¯‘è€…ï¼š<a href="http://www.jianshu.com/users/97c49dfd1f9f/latest_articles">ray16897188</a>ï¼›æ ¡å¯¹ï¼š<a href="http://daizi.me">å°è¢‹å­</a>ï¼›å®šç¨¿ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p><a href="http://alisoftware.github.io/swift/2015/10/11/thinking-in-swift-4/">ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘ä»¬ç”¨<code>map</code>ã€<code>flatMap</code>è¿™ä¸¤ç§åŸºäº<code>Optional</code>å’Œ<code>Array</code>ç±»å‹çš„æ–¹æ³•åšäº†å¾ˆå¤šå¥½ç©å„¿çš„äº‹æƒ…ã€‚ä½†ä½ å¯èƒ½å¹¶æ²¡æœ‰æ„è¯†åˆ°ï¼Œä½ å·²ç»åœ¨ä¸è‡ªçŸ¥çš„æƒ…å†µä¸‹ä½¿ç”¨äº†å•å­<em>(å•å­ï¼Œå³ Monadï¼šä¸€ä¸ªå‡½æ•°å¼ç¼–ç¨‹çš„æœ¯è¯­ - è¯‘è€…æ³¨)</em>ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯å•å­ï¼Ÿ</p>]]>
    
    </summary>
    
      <category term="Crunchy Development" scheme="http://swiftggteam.github.io/tags/Crunchy-Development/"/>
    
      <category term="Swift è¿›é˜¶" scheme="http://swiftggteam.github.io/categories/Swift-%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ç”¨ Swift è¿›è¡Œåˆ—è¡¨è§£æåŠå…¶æ€§èƒ½é—®é¢˜]]></title>
    <link href="http://swiftggteam.github.io/2015/10/29/list-comprehensions-and-performance-with-swift/"/>
    <id>http://swiftggteam.github.io/2015/10/29/list-comprehensions-and-performance-with-swift/</id>
    <published>2015-10-29T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šVeronica Rayï¼Œ<a href="http://jamesonquave.com/blog/list-comprehensions-and-performance-with-swift/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-08-15<br>è¯‘è€…ï¼š<a href="http://weibo.com/riven0951" target="_blank" rel="external">riven</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/linusling" target="_blank" rel="external">å°é“åŒ Linus</a></p>
<p>æœ¬æ–‡å†™äº 2015.8.15 é€‚ç”¨äº Xcode 6 å’Œ Swift 1.2</p>
</blockquote>
<p>åˆ—è¡¨è§£æå¯ä»¥è®©ä½ ç”¨æ›´ç®€æ´çš„æ–¹å¼æ¥åˆ›å»ºåˆ—è¡¨ã€‚å°½ç®¡åˆ—è¡¨è§£ææ²¡æœ‰åœ¨ Swift çš„è¯­è¨€æŒ‡å—ä¸­æåŠï¼Œä½†ä½ ä¹Ÿå¯ä»¥åœ¨ Swift ä¸­å®ç°ç±»ä¼¼åˆ—è¡¨è§£æçš„ä¸€äº›æ“ä½œã€‚</p>
<a id="more"></a>
<p>å¦‚æœä½ æƒ³åˆ›å»ºä¸€ä¸ªå¯¹å…ƒç´ æ±‚å¹³æ–¹çš„åˆ—è¡¨ï¼Œåƒè¿™æ ·:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> squares = [<span class="type">Int</span>]()</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="number">1</span>..&lt;<span class="number">10</span> &#123;</span><br><span class="line">Â Â Â Â squares.append(x*x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ Python ä¸­ï¼Œä½¿ç”¨åˆ—è¡¨è§£ææ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">squares = [x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br></pre></td></tr></table></figure>
<p>åœ¨ Swift ä¸­ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> squares = <span class="type">Array</span>(<span class="built_in">map</span>(<span class="number">1</span>..&lt;<span class="number">10</span>) &#123; $<span class="number">0</span> * $<span class="number">0</span> &#125;)</span><br></pre></td></tr></table></figure>
<p>å¯¹åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ è¿›è¡Œæ±‚å’Œä½ å¯ä»¥è¿™æ ·åšï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> square <span class="keyword">in</span> squares &#123;</span><br><span class="line">Â Â Â Â sum = sum + square</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…ä½¿ç”¨ reduce å‡½æ•°</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> sum = squares.<span class="built_in">reduce</span>(<span class="number">0</span>, &#123; $<span class="number">0</span> + $<span class="number">1</span> &#125;)</span><br></pre></td></tr></table></figure>
<p>å¯¹äºå…¶å®ƒè¯­è¨€ä¸­çš„åˆ—è¡¨è§£æï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»æ„çš„åºåˆ—æˆ–è€…é›†åˆä½œä¸ºè¾“å…¥ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªåŒºé—´å€¼ã€‚</p>
<p><a href="http://stackoverflow.com/questions/24003584/list-comprehension-in-swift" target="_blank" rel="external">ä½ å¯ä»¥ä½¿ç”¨ map/reduce/filter/stride å‡½æ•°åˆ›å»ºä½ æƒ³è¦çš„åˆ—è¡¨ç±»å‹</a></p>
<p>åˆ—è¡¨è§£æçš„ä¸¤ä¸ªä¸»è¦ä¼˜ç‚¹æ˜¯è®©ä»£ç å˜çš„æ›´ç®€æ´å’Œç”Ÿæˆæ›´å¿«çš„äºŒè¿›åˆ¶ç ã€‚</p>
<p>æˆ‘åˆšåˆšæ¨¡æ‹Ÿçš„åˆ—è¡¨è§£æçœ‹èµ·æ¥å¾ˆç®€æ´å§ã€‚ä½†æˆ‘å¾ˆå¥½å¥‡æ˜¯å¦å®ƒä¹Ÿèƒ½äº§ç”Ÿæ›´å¿«çš„äºŒè¿›åˆ¶ç ã€‚</p>
<p><a href="https://medium.com/swift-programming/secret-of-swift-performance-fcc5d2a437a8" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a> ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Hopper æ¥åˆ†æ Swift çš„æ±‡ç¼–ä»£ç ï¼ŒHopper æ˜¯ä¸€ä¸ª OS X å’Œ Linux åç¼–è¯‘ç¨‹åºã€‚ ä½ å¯ä»¥å…è´¹ä½¿ç”¨ Hopper ï¼Œä¸éœ€è¦ä»˜ä»»ä½•è´¹ç”¨ã€‚</p>
<p>æ²¡æœ‰ä½¿ç”¨åˆ—è¡¨è§£æçš„ä»£ç ç‰‡æ®µå’Œæ¨¡æ‹Ÿåˆ—è¡¨è§£æçš„ä»£ç ç‰‡æ®µéƒ½äº§ç”Ÿäº†åŒæ ·çš„æ±‡ç¼–ä»£ç .</p>
<p><img src="/img/articles/list-comprehensions-and-performance-with-swift/asm.png1446426438.2465854" alt="The assembly code from Hopper"></p>
<p>å› ä¸ºä¸¤ä¸ªä»£ç ç‰‡æ®µäº§ç”Ÿçš„æ±‡ç¼–ä»£ç æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥è®¤ä¸ºå®ƒä»¬çš„æ‰§è¡Œæ—¶é—´æ˜¯ä¸€æ ·çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ XCTest æ¥æµ‹è¯•æˆ‘ä»¬ç¨‹åºçš„æ‰§è¡Œæ—¶é—´å¹¶è¯æ˜è¿™ä¸€ç‚¹ã€‚</p>
<p>æµ‹è¯•æ²¡æœ‰ä½¿ç”¨åˆ—è¡¨è§£æçš„ä»£ç ç‰‡æ®µ</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">testNoListComprehensionPerformance</span><span class="params">()</span></span> &#123;</span><br><span class="line">Â Â Â Â <span class="keyword">self</span>.measureBlock() &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">var</span> squares = [<span class="type">Int</span>]()</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">for</span> x <span class="keyword">in</span> <span class="number">1</span>...<span class="number">5</span> &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â squares.append(x)</span><br><span class="line">Â Â Â Â Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç›¸å…³çš„è¾“å‡ºæ˜¯ï¼š</p>
<p>Test Case â€˜-[speedTestTests.speedTestTests testNoListComprehensionPerformance]â€™ started.</p>
<p>:0: Test Case â€˜-[speedTestTests.speedTestTests testNoListComprehensionPerformance]â€™ measured [Time, seconds] average: 0.000, relative standard deviation: 236.965%, values: [0.000154, 0.000005, 0.000004, 0.000004, 0.000004, 0.000004, 0.000004, 0.000004, 0.000004, 0.000004], performanceMetricID:com.apple.XCTPerformanceMetric_WallClockTime, baselineName: â€œâ€, baselineAverage: , maxPercentRegression: 10.000%, maxPercentRelativeStandardDeviation: 10.000%, maxRegression: 0.100, maxStandardDeviation: 0.100</p>
<p>Test Case â€˜-[speedTestTests.speedTestTests testNoListComprehensionPerformance]â€™ passed (0.262 seconds).</p>
<p>æµ‹è¯•æ¨¡æ‹Ÿåˆ—è¡¨è§£æçš„ä»£ç ç‰‡æ®µ</p>
<p>Test Case â€˜-[speedTestTests.speedTestTests testSortaListComprehensionPerformance]â€™ started.</p>
<p>:0: Test Case â€˜-[speedTestTests.speedTestTests testSortaListComprehensionPerformance]â€™ measured [Time, seconds] average: 0.000, relative standard deviation: 160.077%, values: [0.000045, 0.000005, 0.000004, 0.000003, 0.000003, 0.000003, 0.000003, 0.000004, 0.000003, 0.000003], performanceMetricID:com.apple.XCTPerformanceMetric_WallClockTime, baselineName: â€œâ€, baselineAverage: , maxPercentRegression: 10.000%, maxPercentRelativeStandardDeviation: 10.000%, maxRegression: 0.100, maxStandardDeviation: 0.100</p>
<p>Test Case â€˜-[speedTestTests.speedTestTests testSortaListComprehensionPerformance]â€™ passed (0.255 seconds).</p>
<hr>
<p><strong>ä»–ä»¬å¹³å‡åªç›¸å·® 0.007 ç§’</strong></p>
<hr>
<p>æˆ‘è§è¿‡æœ€é…·çš„åˆ—è¡¨è§£æçš„åº”ç”¨ä¾¿æ˜¯æ‹¼å†™æ£€æŸ¥ã€‚Airspeed Velocity é’ˆå¯¹ <a href="http://norvig.com/spell-correct.html" target="_blank" rel="external">Peter Norvig çš„  Python ç‰ˆæœ¬çš„æ‹¼å†™æ£€æŸ¥</a>ï¼Œ<a href="http://airspeedvelocity.net/2015/05/02/spelling/" target="_blank" rel="external">æ”¹å†™äº†ä¸€ä¸ª Swift ç‰ˆæœ¬</a>ã€‚</p>
<p>åœ¨ Swift ä¸­ä½¿ç”¨ç±»åˆ—è¡¨è§£æçš„æ“ä½œçš„ä¸»è¦ä¼˜ç‚¹å°±æ˜¯ç®€æ´æ€§ã€‚ <a href="http://www.paulgraham.com/power.html" target="_blank" rel="external">Paul Graham å†™äº†ä¸€å¤§ç¯‡å…³äºåœ¨ç¼–ç¨‹è¯­è¨€ä¸­ç®€æ´æ˜¯å¤šä¹ˆé‡è¦çš„æ–‡ç« ã€‚</a> å› ä¸ºæ¯ä¸ªç¨‹åºå‘˜æ¯å¤©åªèƒ½å†™ä¸€å®šè¡Œæ•°çš„ä»£ç ï¼Œå¦‚æœä½ ä»¥åŒæ ·æ•°é‡çš„ä»£ç è¡Œæ•°å®Œæˆæ›´å¤šåŠŸèƒ½ï¼Œé‚£ä½ æ¯å¤©ä¾¿å¯ä»¥å®Œæˆæ›´å¤šçš„å·¥ä½œä»»åŠ¡ã€‚è¿™ç§åŠ›é‡ä¹Ÿä¼šè®©ä½ é‡æ–°æ€è€ƒç¼–å†™ä»€ä¹ˆæ ·çš„ç¨‹åºæ˜¯å¯èƒ½çš„ã€‚åœ¨ä¸€äº›æ›´ç¹ççš„è¯­è¨€ä¸­ï¼Œè¿™ä¸ªæ‹¼å†™æ£€æŸ¥çš„ä¾‹å­å¯èƒ½å°±æ˜¯ä¸€ä¸ªå·¨å¤§çš„é¡¹ç›®ã€‚æˆ‘å–œæ¬¢åƒæ‹¼å†™æ£€æŸ¥è¿™ç§å……æ»¡æŠ€æœ¯å¤æ‚æ€§å’Œç¥ç§˜æ„Ÿçš„äº‹ç‰©ï¼Œå¹¶ä¸”åœ¨ Swift ä¸­å¯ä»¥åªç”¨å‡ è¡Œä»£ç ä¾¿èƒ½è§£å†³ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šVeronica Rayï¼Œ<a href="http://jamesonquave.com/blog/list-comprehensions-and-performance-with-swift/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-08-15<br>è¯‘è€…ï¼š<a href="http://weibo.com/riven0951">riven</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/linusling">å°é“åŒ Linus</a></p>
<p>æœ¬æ–‡å†™äº 2015.8.15 é€‚ç”¨äº Xcode 6 å’Œ Swift 1.2</p>
</blockquote>
<p>åˆ—è¡¨è§£æå¯ä»¥è®©ä½ ç”¨æ›´ç®€æ´çš„æ–¹å¼æ¥åˆ›å»ºåˆ—è¡¨ã€‚å°½ç®¡åˆ—è¡¨è§£ææ²¡æœ‰åœ¨ Swift çš„è¯­è¨€æŒ‡å—ä¸­æåŠï¼Œä½†ä½ ä¹Ÿå¯ä»¥åœ¨ Swift ä¸­å®ç°ç±»ä¼¼åˆ—è¡¨è§£æçš„ä¸€äº›æ“ä½œã€‚</p>]]>
    
    </summary>
    
      <category term="Jameson Quave" scheme="http://swiftggteam.github.io/tags/Jameson-Quave/"/>
    
      <category term="Swift è¿›é˜¶" scheme="http://swiftggteam.github.io/categories/Swift-%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[å…³äº Swift çš„ 5 ä¸ªè¯¯åŒº]]></title>
    <link href="http://swiftggteam.github.io/2015/10/28/five-myths-about-swift/"/>
    <id>http://swiftggteam.github.io/2015/10/28/five-myths-about-swift/</id>
    <published>2015-10-28T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šThomas Hanningï¼Œ<a href="http://www.thomashanning.com/five-myths-about-swift/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-19<br>è¯‘è€…ï¼š<a href="http://weibo.com/linusling" target="_blank" rel="external">å°é“åŒ Linus</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="http://www.swiftyper.com/" target="_blank" rel="external">å°é”…</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>Swift è™½ç„¶æ˜¯ä¸€é—¨æ¯”è¾ƒæ–°çš„æŠ€æœ¯è¯­è¨€ï¼Œå´å·²ç»æœ‰äº†å¾ˆå¤šå…³äº Swift çš„è¯¯åŒºã€‚</p>
<a id="more"></a>
<h2 id="è¯¯åŒº_1_ï¼šâ€œSwift_æ˜¯å¼±ç±»å‹çš„è¯­è¨€â€">è¯¯åŒº 1 ï¼šâ€œSwift æ˜¯å¼±ç±»å‹çš„è¯­è¨€â€</h2><p>å¾ˆå¤šäººè®¤ä¸º Swift æ˜¯ä¸€ç§å¼±ç±»å‹çš„è¯­è¨€ã€‚ä»–ä»¬è¿™ä¹ˆè¯´çš„åŸå› ä¸»è¦æ˜¯å¯ä»¥éšå¼å£°æ˜ä¸€ä¸ªå€¼ï¼Œè€Œä¸ç®¡ç±»å‹æ˜¯ä»€ä¹ˆï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä»£ç çœ‹ä¸Šå»å¥½åƒ<code>i</code>æ²¡æœ‰ç±»å‹ï¼Œå…¶å®å¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚å› ä¸º 5 æ˜¯ä¸€ä¸ªæ•´å‹ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨å°±ä¼šè®©<code>i</code>æˆä¸ºæ•´å‹å˜é‡ã€‚ä¹‹åï¼Œæ•´å‹å˜é‡<code>i</code>ä¸ä¼šå†è¢«æ”¹å˜ï¼Œä¹Ÿå°±æ˜¯è¯´<code>i</code>æ°¸è¿œæ˜¯æ•´å‹å˜é‡ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜ç¡®çš„æŒ‡å®šå˜é‡çš„ç±»å‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i: <span class="type">Int</span> = <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>è™½ç„¶è¿™ç§æ–¹å¼ä¸æ˜¯å¿…è¦çš„ï¼Œä½†å®ƒå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</p>
<h2 id="è¯¯åŒº_2_ï¼šâ€œSwift_å’Œ_Objective-C_åä½œæ€§å·®â€">è¯¯åŒº 2 ï¼šâ€œSwift å’Œ Objective-C åä½œæ€§å·®â€</h2><p>å¾ˆå¤šäººä¸æƒ³å¼€å§‹å°è¯•ä½¿ç”¨ Swiftï¼Œå› ä¸ºä»–ä»¬è®¤ä¸º Swift ä¸èƒ½å…¼å®¹ç°å­˜çš„ Objective-C ä»£ç å’Œç±»åº“ã€‚å…¶å®å¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚åœ¨åŒä¸€ä¸ªå·¥ç¨‹ä¸­ï¼ŒåŒæ—¶ä½¿ç”¨ Swift å’Œ Objective-C ä¹Ÿæ˜¯å¯è¡Œçš„ã€‚å¹¶ä¸”ï¼Œåœ¨ Swift ä»£ç ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ Objective-C çš„ç¬¬ä¸‰æ–¹åº“ã€‚</p>
<p>å¯ä»¥åœ¨æ‰€è°“çš„æ¡¥æ¥æ–‡ä»¶ä¸­å£°æ˜ Objective-C çš„å¤´æ–‡ä»¶ï¼Œç„¶åï¼Œæ‰€æœ‰å¤´æ–‡ä»¶çš„å†…å®¹éƒ½ä¼šè¢«ç¿»è¯‘æˆ Swfit çš„è¯­æ³•ï¼Œè¿™æ ·åœ¨è°ƒç”¨ Objective-C çš„ API çš„æ—¶å€™å°±ä¸ä¼šæ„Ÿè§‰åˆ°ä»€ä¹ˆåŒºåˆ«äº†ã€‚ç”šè‡³ Objective-C é”™è¯¯å¤„ç†ä¹Ÿè¢«è½¬æ¢æˆ Swift çš„<code>do-try-catch</code>è¯­æ³•äº†ã€‚</p>
<p>è‹¹æœçš„æ¡†æ¶ä»ç„¶æ˜¯ç”¨ Objective-C å†™çš„ï¼Œå¦‚æœSwift å’Œ Objective-C åä½œæ€§å·®çš„è¯äº‹æƒ…å°±ä¼šå˜å¾—å¾ˆç³Ÿã€‚</p>
<h2 id="è¯¯åŒº_3_ï¼šâ€œå¿…é¡»åœ¨æ–°çš„é¡¹ç›®ä¸­ä½¿ç”¨_Swiftâ€">è¯¯åŒº 3 ï¼šâ€œå¿…é¡»åœ¨æ–°çš„é¡¹ç›®ä¸­ä½¿ç”¨ Swiftâ€</h2><p>æˆ‘è§‰å¾—åœ¨æ–°é¡¹ç›®ä¸­ä½¿ç”¨ Swift æ˜¯ä¸ªå¾ˆå¥½çš„æƒ³æ³•ï¼Œè€Œä¸”æ¯ä¸ª iOS å¼€å‘è€…éƒ½åº”è¯¥å­¦ Swiftã€‚</p>
<p>ä½†æ˜¯ï¼Œä½ æ²¡å¿…è¦ä¸€å®šè¦åœ¨æ–°é¡¹ç›®ä¸­å¼€å§‹ä½¿ç”¨ Swiftã€‚ç°åœ¨è‹¹æœå®˜æ–¹è¿˜åœ¨æ”¯æŒ Objective-Cï¼Œè‡³å°‘è¿‘å‡ å¹´ä¸ä¼šæ”¹å˜ã€‚ä½†æ˜¯ï¼Œæˆ‘è®¤ä¸ºè‹¹æœæœªæ¥å¯¹ Objective-C çš„æ”¯æŒä¼šè¶Šæ¥è¶Šå°‘ã€‚</p>
<p>å¯ä»¥å»æˆ‘å‘å¸ƒçš„å¦ä¸€ç¯‡æ–‡ç«  <a href="http://www.thomashanning.com/should-you-use-objective-c-or-swift/" target="_blank" rel="external">Should You Use Objective-C or Swift?</a> é‡Œçœ‹çœ‹å…³äºæœ¬è¯¯åŒºçš„å…¶ä»–è¯¦æƒ…ã€‚</p>
<h2 id="è¯¯åŒº_4_ï¼šâ€œåªå­¦_Swift_å°±å¤Ÿç”¨äº†â€">è¯¯åŒº 4 ï¼šâ€œåªå­¦ Swift å°±å¤Ÿç”¨äº†â€</h2><p>Swift æ˜¯é—¨å¾ˆæ£’çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒä¹Ÿå¯ä»¥ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œä½†æ˜¯ä»…ä»…å­¦ Swift æ˜¯ä¸å¤Ÿçš„ã€‚åŸå› å¤§è‡´å¦‚ä¸‹ï¼šSwift å’Œ Objective-C æœ‰å¾ˆå¥½çš„åä½œæ€§ï¼Œè€Œä¸”é¡¹ç›®ä¸­ä¹Ÿç»å¸¸ä¼šæœ‰ Objective-C çš„ä»£ç ï¼ŒåŒæ—¶ï¼Œè®¸å¤šçš„ç¤ºä¾‹ä»£ç å’Œæ•™ç¨‹æ˜¯ç”¨ Objective-C å†™çš„ã€‚</p>
<p>å› æ­¤ï¼Œä¸ºäº†æˆä¸ºä¸€ä¸ªä¼˜ç§€çš„ iOS å¼€å‘è€…ï¼Œæœ€å¥½èƒ½åŒæ—¶å­¦ä¼š Swift å’Œ Objective-Cã€‚</p>
<h2 id="è¯¯åŒº_5_ï¼šâ€œSwift_è¿˜ä¸èƒ½ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒâ€">è¯¯åŒº 5 ï¼šâ€œSwift è¿˜ä¸èƒ½ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒâ€</h2><p>å¾ˆå¤šäººè®¤ä¸º Swift è¿˜ä¸èƒ½ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒã€‚å…¶ä¸­ä¸€ä¸ªåŸå› å°±æ˜¯ï¼Œå¼•è¿› Swift åˆ°å·¥ç¨‹ä¸­æ—¶ä¼šæœ‰ä¸€äº›é—®é¢˜å‡ºç°ï¼Œå°¤å…¶æ˜¯ Xcode ä¼šæœ‰ä¸€äº› bugã€‚å¦‚æœçŸ¥é“ä¸€äº›å˜é€šæ–¹æ³•çš„è¯ï¼Œè¿˜æ˜¯å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ Swift çš„ã€‚</p>
<p>Swift 1.2 å’Œ Swift 2.0 çš„å¼•è¿›éƒ½æœ‰å¯¹è¯­è¨€çš„è¯­æ³•è¿›è¡Œä¿®æ”¹ã€‚å› æ­¤ï¼ŒæŠŠç°å­˜çš„ Swift ä»£ç è¿ç§»åˆ°æ–°çš„è¯­æ³•ä¸Šæ˜¯å¿…è¦çš„ã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿæ²¡ä»€ä¹ˆå¯æŒ‡è´£çš„ï¼Œæ¯•ç«Ÿæ¯ä¸ª iOS ç‰ˆæœ¬éƒ½æœ‰ä»£ç åœ¨å˜æ›´ã€‚è€Œä¸”ï¼Œè¿™ä¹Ÿæ˜¯ Swift åœ¨å°è¯•æ”¹å–„çš„é‡è¦æ ‡å¿—ï¼Œç‰¹åˆ«æ˜¯åœ¨ Swift å‘å¸ƒä¸ä¹…çš„ç°é˜¶æ®µã€‚</p>
<h2 id="æ¥ä¸‹æ¥åšä»€ä¹ˆ">æ¥ä¸‹æ¥åšä»€ä¹ˆ</h2><p>å¦‚æœä½ æƒ³å­¦ä¹ æ›´å¤šæœ‰å…³ Swift çš„çŸ¥è¯†ï¼Œå­¦ä¹ <a href="https://itunes.apple.com/us/book/the-swift-programming-language/id881256329?mt=11" target="_blank" rel="external">è‹¹æœçš„Swiftæ–‡æ¡£</a>æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„å¼€å§‹ã€‚å¦‚æœæƒ³äº†è§£å…¶å®ƒçš„èµ„æºï¼Œå¯ä»¥å…³æ³¨ä¸€ä¸‹æˆ‘çš„åšå®¢<a href="http://www.thomashanning.com/how-to-stay-up-to-date-on-ios-development/" target="_blank" rel="external"> â€œHow To Stay Up-To-Date On iOS Developmentâ€</a>ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šThomas Hanningï¼Œ<a href="http://www.thomashanning.com/five-myths-about-swift/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-10-19<br>è¯‘è€…ï¼š<a href="http://weibo.com/linusling">å°é“åŒ Linus</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="http://www.swiftyper.com/">å°é”…</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>Swift è™½ç„¶æ˜¯ä¸€é—¨æ¯”è¾ƒæ–°çš„æŠ€æœ¯è¯­è¨€ï¼Œå´å·²ç»æœ‰äº†å¾ˆå¤šå…³äº Swift çš„è¯¯åŒºã€‚</p>]]>
    
    </summary>
    
      <category term="Thomas Hanning" scheme="http://swiftggteam.github.io/tags/Thomas-Hanning/"/>
    
      <category term="Swift å…¥é—¨" scheme="http://swiftggteam.github.io/categories/Swift-%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[è¯¦è§£ Swift æ¨¡å¼åŒ¹é…]]></title>
    <link href="http://swiftggteam.github.io/2015/10/27/swift-pattern-matching-in-detail/"/>
    <id>http://swiftggteam.github.io/2015/10/27/swift-pattern-matching-in-detail/</id>
    <published>2015-10-27T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šBenedikt Terhechteï¼Œ<a href="http://appventure.me/2015/08/20/swift-pattern-matching-in-detail/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-08-20<br>è¯‘è€…ï¼š<a href="http://blog.csdn.net/mmoaay" target="_blank" rel="external">mmoaay</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb" target="_blank" rel="external">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao" target="_blank" rel="external">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>åœ¨ä¼—å¤š Swift æä¾›ç»™ Objective-C ç¨‹åºå‘˜ä½¿ç”¨çš„æ–°ç‰¹æ€§ä¸­ï¼Œæœ‰ä¸ªç‰¹æ€§æŠŠè‡ªå·±ä¼ªè£…æˆä¸€ä¸ªæ— èŠçš„è€å¤´ï¼Œä½†æ˜¯å´åœ¨å¦‚ä½•ä¼˜é›…çš„è§£å†³â€œé­å°¸é‡‘å­—å¡”â€œçš„é—®é¢˜ä¸Šæœ‰ç€å·¨å¤§çš„æ½œåŠ›ã€‚å¾ˆæ˜¾ç„¶æˆ‘æ‰€è¯´çš„è¿™ä¸ªç‰¹æ€§å°±æ˜¯ <code>switch</code> è¯­å¥ï¼Œ å¯¹äºå¾ˆå¤š Objective-C ç¨‹åºå‘˜æ¥è¯´ï¼Œé™¤äº†ç”¨åœ¨ <a href="http://en.wikipedia.org/wiki/Duff%27s_device" target="_blank" rel="external">Duffâ€™s Device</a> ä¸Šæ¯”è¾ƒæœ‰è¶£ä¹‹å¤–ï¼Œ<code>switch</code> è¯­å¥éå¸¸ç¬¨æ‹™ï¼Œä¸å¤šä¸ª <code>if</code> è¯­å¥ç›¸æ¯”ï¼Œå®ƒå‡ ä¹æ²¡æœ‰ä»»ä½•ä¼˜åŠ¿ã€‚</p>
<a id="more"></a>
<p>ä¸è¿‡ Swift ä¸­çš„ <code>switch</code> è¯­å¥èƒ½åšçš„å°±å¤šäº†ã€‚åœ¨æ¥ä¸‹æ¥çš„æ•™ç¨‹é‡Œï¼Œæˆ‘ä¼šæ›´åŠ è¯¦ç»†çš„è®²è§£è¿™äº›æ–°ç‰¹æ€§çš„å„ç§ç”¨é€”ã€‚æˆ‘ä¼šå¿½ç•¥é‚£äº›ä¸ Objective-C å’Œ C ä¸­ <code>switch</code> è¯­å¥ç›¸æ¯”æ²¡æœ‰ä»»ä½•ä¼˜åŠ¿çš„è§£å†³æ–¹æ¡ˆã€‚è¿™ç¯‡æ–‡ç« åŸºç¡€çš„éƒ¨åˆ†å†™äº 2014 å¹´ 7 æœˆï¼Œä½†æ˜¯å¾ˆå¤šæˆ‘å†™çš„æ¨¡å¼éƒ½ä¼šå¯¼è‡´ç¼–è¯‘å™¨å´©æºƒï¼Œæ‰€ä»¥æˆ‘åªå¥½æ¨è¿Ÿè¿™äº›å†…å®¹çš„ç¼–å†™ï¼Œç›´åˆ°ç¼–è¯‘å™¨èƒ½æä¾›æ›´å¥½çš„æ”¯æŒã€‚</p>
<p>è¿™ç¯‡åšå®¢è¿˜æœ‰å¦‚ä¸‹è¯­è¨€çš„ç‰ˆæœ¬ï¼š</p>
<blockquote>
<p><a href="http://qiita.com/mono0926/items/f2875a9eacef53e88122" target="_blank" rel="external">æ—¥è¯­</a> ï¼ˆæ„Ÿè°¢ <a href="https://twitter.com/_mono" target="_blank" rel="external">M Ono</a>ï¼ï¼‰</p>
</blockquote>
<h1 id="å¼€å§‹å’¯">å¼€å§‹å’¯</h1><p> <code>switch</code> è¯­å¥ä¸»è¦çš„ç‰¹æ€§å½“ç„¶æ˜¯æ¨¡å¼åŒ¹é…å’¯ï¼Œæ¨¡å¼åŒ¹é…å¯ä»¥å¯¹å€¼è¿›è¡Œè§£æ„ï¼Œç„¶åæ ¹æ®ç›¸åº” <code>case</code> çš„æ­£ç¡®åŒ¹é…å€¼æ¥è¿›è¡ŒåŒ¹é…ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å†å²ä¸Šæœ€åçš„ä¸€ä¸ªä¾‹å­ï¼šäºŒè¿›åˆ¶-&gt;åè¿›åˆ¶çš„è½¬æ¢</span></span><br><span class="line"><span class="keyword">let</span> bool1 = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> bool2 = <span class="number">0</span></span><br><span class="line"><span class="keyword">switch</span> (bool1, bool2) &#123;</span><br><span class="line">   <span class="keyword">case</span> (<span class="number">0</span>, <span class="number">0</span>): <span class="built_in">print</span>(<span class="string">"0"</span>)</span><br><span class="line">   <span class="keyword">case</span> (<span class="number">0</span>, <span class="number">1</span>): <span class="built_in">print</span>(<span class="string">"1"</span>)</span><br><span class="line">   <span class="keyword">case</span> (<span class="number">1</span>, <span class="number">0</span>): <span class="built_in">print</span>(<span class="string">"2"</span>)</span><br><span class="line">   <span class="keyword">case</span> (<span class="number">1</span>, <span class="number">1</span>): <span class="built_in">print</span>(<span class="string">"3"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¨¡å¼åŒ¹é…å¾ˆæ—©ä»¥å‰å°±åœ¨å…¶ä»–è¯­è¨€ä¸­å­˜åœ¨äº†ï¼Œè¿™äº›è¯­è¨€åŒ…æ‹¬ Haskellã€Erlangã€Scala å’Œ Prologã€‚è¿™æ˜¯ä¸€ä¸ªç¦éŸ³ï¼Œå› ä¸ºå®ƒå…è®¸æˆ‘ä»¬è§‚å¯Ÿé‚£äº›è¯­è¨€å¦‚ä½•åˆ©ç”¨æ¨¡å¼åŒ¹é…æ¥è§£å†³é—®é¢˜ã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥é€šè¿‡è§‚å¯Ÿå®ƒä»¬çš„ä¾‹å­æ¥æ‰¾åˆ°æœ€å®ç”¨çš„é‚£ä¸ªã€‚</p>
<h1 id="ä¸€ä¸ªäº¤æ˜“å¼•æ“">ä¸€ä¸ªäº¤æ˜“å¼•æ“</h1><p>å‡è®¾åå°”è¡—æ‰¾åˆ°ä½ ï¼Œä»–ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„è¿è¡Œåœ¨ iOS è®¾å¤‡ä¸Šçš„äº¤æ˜“å¹³å°ã€‚å› ä¸ºæ˜¯äº¤æ˜“å¹³å°ï¼Œæ‰€ä»¥ä½ éœ€è¦ç»™äº¤æ˜“å®šä¹‰ä¸€ä¸ª <code>enum</code>ã€‚</p>
<h2 id="ç¬¬ä¸€æ­¥">ç¬¬ä¸€æ­¥</h2><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Trades</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Buy</span>(stock: <span class="type">String</span>, amount: <span class="type">Int</span>, stockPrice: <span class="type">Float</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Sell</span>(stock: <span class="type">String</span>, amount: <span class="type">Int</span>, stockPrice: <span class="type">Float</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒæ—¶è¿˜ä¼šæä¾›å¦‚ä¸‹çš„ API ç»™ä½ æ¥è¿›è¡Œäº¤æ˜“å¤„ç†ã€‚<strong>æ³¨æ„é”€å”®è®¢å•çš„é‡‘é¢æ˜¯å¦‚ä½•å˜æˆè´Ÿæ•°çš„</strong>ï¼Œè€Œä¸”ä»–ä»¬è¿˜è¯´è‚¡ç¥¨çš„ä»·æ ¼ä¸é‡è¦ï¼Œä»–ä»¬çš„å¼•æ“ä¼šåœ¨å†…éƒ¨é€‰æ‹©ä¸€ä¸ªä»·æ ¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> - å‚æ•° stock: è‚¡ç¥¨çš„åå­—</span><br><span class="line"> - å‚æ•° amount: é‡‘é¢, è´Ÿæ•°è¡¨ç¤ºé”€å”®é¢, æ­£æ•°è¡¨ç¤ºè´­ä¹°é¢</span><br><span class="line">*/</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">process</span><span class="params">(stock: String, <span class="number">_</span> amount: Int)</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span> (<span class="string">"<span class="subst">\(amount)</span> of <span class="subst">\(stock)</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹ä¸€æ­¥å°±æ˜¯å¯¹äº¤æ˜“è¿›è¡Œå¤„ç†ã€‚ä½ ä¼šå‘ç°æ¨¡å¼åŒ¹é…åœ¨å†™è¿™ä¸ªä¸šåŠ¡æ—¶æ‰€å…·å¤‡çš„å¼ºå¤§å¤„ç†èƒ½åŠ›ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> aTrade = <span class="type">Trades</span>.<span class="type">Buy</span>(stock: <span class="string">"APPL"</span>, amount: <span class="number">200</span>, stockPrice: <span class="number">115.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> aTrade &#123;</span><br><span class="line"><span class="keyword">case</span> .<span class="type">Buy</span>(<span class="keyword">let</span> stock, <span class="keyword">let</span> amount, <span class="number">_</span>):</span><br><span class="line">    process(stock, amount)</span><br><span class="line"><span class="keyword">case</span> .<span class="type">Sell</span>(<span class="keyword">let</span> stock, <span class="keyword">let</span> amount, <span class="number">_</span>):</span><br><span class="line">    process(stock, amount * -<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡º "buy 200 of APPL"</span></span><br></pre></td></tr></table></figure>
<p>Swift å¯ä»¥è®©æˆ‘ä»¬éå¸¸æ–¹ä¾¿çš„ä» <code>enum</code> ä¸­è§£æ„/æå–å‡ºæˆ‘ä»¬çœŸæ­£æƒ³è¦çš„ä¿¡æ¯ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­åªæœ‰ <code>stock</code> å’Œ <code>amount</code> è¢«è§£æ„å‡ºæ¥ã€‚</p>
<p>çœŸæ£’ï¼Œç°åœ¨ä½ å¯ä»¥å»åå°”è¡—å±•ç¤ºè¿™ä¸ªæå¥½çš„äº¤æ˜“å¹³å°äº†ã€‚ç„¶è€Œï¼Œç°å®å¾€å¾€æ¯”ç¾å¥½çš„æƒ³è±¡è¦æ®‹é…·å¾—å¤šã€‚ä½ ä»¥ä¸ºäº¤æ˜“å°±æ˜¯ä½ ä»¥ä¸ºçš„äº¤æ˜“ä¹ˆï¼Ÿ</p>
<ul>
<li>ä½ å¿…é¡»æ ¹æ®ä¸åŒçš„äº¤æ˜“æ–¹å¼è®¡ç®—è´¹ç”¨ã€‚</li>
<li>æœºæ„è¶Šå°ï¼Œè´¹ç”¨è¶Šé«˜</li>
<li>è€Œä¸”ï¼Œæœºæ„è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚</li>
</ul>
<p>åå°”è¡—çš„äººä¹Ÿæ„è¯†åˆ°è¦å¤„ç†è¿™äº›é—®é¢˜ä½ éœ€è¦æ–°çš„ APIï¼Œæ‰€ä»¥ä»–ä»¬ç»™äº†ä½ ä¸‹é¢çš„ä¸¤ä¸ªï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">processSlow</span><span class="params">(stock: String, <span class="number">_</span> amount: Int, <span class="number">_</span> fee: Float)</span></span> &#123; <span class="built_in">print</span>(<span class="string">"slow"</span>) &#125;</span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">processFast</span><span class="params">(stock: String, <span class="number">_</span> amount: Int, <span class="number">_</span> fee: Float)</span></span> &#123; <span class="built_in">print</span>(<span class="string">"fast"</span>) &#125;</span><br></pre></td></tr></table></figure>
<h2 id="äº¤æ˜“ç±»å‹">äº¤æ˜“ç±»å‹</h2><p>äºæ˜¯ä½ å›åˆ°ç»˜å›¾æ¿é‡æ–°å¢åŠ äº†ä¸€ä¸ª <code>enum</code>ã€‚äº¤æ˜“ç±»å‹ä¹Ÿæ˜¯æ¯ä¸ªäº¤æ˜“çš„ä¸€éƒ¨åˆ†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">TraderType</span> </span>&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="type">SingleGuy</span></span><br><span class="line"><span class="keyword">case</span> <span class="type">Company</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Trades</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Buy</span>(stock: <span class="type">String</span>, amount: <span class="type">Int</span>, stockPrice: <span class="type">Float</span>, type: <span class="type">TraderType</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Sell</span>(stock: <span class="type">String</span>, amount: <span class="type">Int</span>, stockPrice: <span class="type">Float</span>, type: <span class="type">TraderType</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œå¦‚ä½•æ›´å¥½åœ°å®ç°è¿™ä¸€æ–°æœºåˆ¶å‘¢ï¼Ÿä½ å¯ä»¥ç”¨ä¸€ä¸ª <code>if / else</code> åˆ†æ”¯æ¥å®ç°è´­ä¹°å’Œé”€å”®ï¼Œä½†æ˜¯è¿™ä¼šå¯¼è‡´ä»£ç åµŒå¥—ä»¥è‡³äºå¾ˆå¿«ä»£ç å°±å˜çš„ä¸æ¸…æ™°äº†â€”â€”è€Œä¸”è°çŸ¥é“é‚£äº›åå°”è¡—äººä¼šä¸ä¼šç»™ä½ æ‰¾æ–°çš„éº»çƒ¦ã€‚æ‰€ä»¥ä½ åº”è¯¥æŠŠå®ƒå®šä¹‰ä¸ºæ¨¡å¼åŒ¹é…çš„ä¸€ä¸ªæ–°è¦æ±‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> aTrade = <span class="type">Trades</span>.<span class="type">Sell</span>(stock: <span class="string">"GOOG"</span>, amount: <span class="number">100</span>, stockPrice: <span class="number">666.0</span>, type: <span class="type">TraderType</span>.<span class="type">Company</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> aTrade &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Buy</span>(stock, amount, <span class="number">_</span>, <span class="type">TraderType</span>.<span class="type">SingleGuy</span>):</span><br><span class="line">    processSlow(stock, amount, <span class="number">5.0</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Sell</span>(stock, amount, <span class="number">_</span>, <span class="type">TraderType</span>.<span class="type">SingleGuy</span>):</span><br><span class="line">    processSlow(stock, -<span class="number">1</span> * amount, <span class="number">5.0</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Buy</span>(stock, amount, <span class="number">_</span>, <span class="type">TraderType</span>.<span class="type">Company</span>):</span><br><span class="line">    processFast(stock, amount, <span class="number">2.0</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Sell</span>(stock, amount, <span class="number">_</span>, <span class="type">TraderType</span>.<span class="type">Company</span>):</span><br><span class="line">    processFast(stock, -<span class="number">1</span> * amount, <span class="number">2.0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç çš„ä¼˜é›…ä¹‹å¤„åœ¨äºå®ƒéå¸¸ç®€æ´çš„æè¿°äº†ä¸åŒå¯èƒ½çš„ç»„åˆã€‚æ³¨æ„æˆ‘ä»¬æŠŠ <code>.Buy(let stock, let amount)</code> ä¿®æ”¹æˆ <code>let .Buy(stock, amount)</code> æ¥è¿›è¡Œç®€åŒ–ï¼Œè¿™æ ·å°±å¯ä»¥ç”¨æ›´å°‘çš„è¯­å¥æ¥åƒä¹‹å‰ä¸€æ ·å¯¹ <code>enum</code> è¿›è¡Œè§£æ„ã€‚</p>
<h2 id="è­¦å«ï¼è­¦å«ï¼å‘¼å«è­¦å«ï¼">è­¦å«ï¼è­¦å«ï¼å‘¼å«è­¦å«ï¼</h2><p>äºæ˜¯ä½ å†æ¬¡å‘ä½ çš„åå°”è¡—ç”¨æˆ·å±•ç¤ºä½ çš„å¼€å‘æˆæœï¼Œè€Œä»–ä»¬åˆæå‡ºäº†æ–°çš„é—®é¢˜ï¼ˆä½ çœŸåº”è¯¥æŠŠé¡¹ç›®çš„ç»†èŠ‚é—®å¾—æ›´æ¸…æ¥šä¸€ç‚¹ï¼‰ã€‚</p>
<ul>
<li>äº¤æ˜“æ€»é¢è¶…è¿‡ 1.000.000\$ çš„é”€å”®è®¢å•é€šå¸¸éœ€è¦æ›´å¿«è¿›è¡Œå¤„ç†ï¼Œå°±ç®—æ˜¯ä¸ªäººå®¢æˆ·ä¹Ÿå¾—è¿™æ ·ã€‚</li>
<li>äº¤æ˜“æ€»é¢å°äº 1.000\$ çš„è´­ä¹°è®¢å•é€šå¸¸å¤„ç†æ›´æ…¢ã€‚</li>
</ul>
<p>å¦‚æœä½¿ç”¨ä¼ ç»Ÿçš„ <code>if</code> è¯­å¥ï¼Œè¿™æ—¶ä»£ç å°±åº”è¯¥å·²ç»æœ‰ç‚¹å‡Œä¹±äº†ï¼Œè€Œ <code>switch</code> å°±ä¸ä¼šã€‚Swift ä¸º <code>switch cases</code> æä¾›äº†ä¿æŠ¤æœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶å¯ä»¥è®©ä½ è¿›ä¸€æ­¥çš„å¯¹å¯èƒ½åŒ¹é…çš„ <code>case</code> è¿›è¡Œçº¦æŸã€‚</p>
<p>ä½ åªéœ€è¦å¯¹ <code>switch</code> è¯­å¥ç¨ä½œä¿®æ”¹å°±å¯ä»¥æ»¡è¶³æ–°çš„å˜åŒ–ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> aTrade = <span class="type">Trades</span>.<span class="type">Buy</span>(stock: <span class="string">"GOOG"</span>, amount: <span class="number">1000</span>, stockPrice: <span class="number">666.0</span>, type: <span class="type">TraderType</span>.<span class="type">SingleGuy</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> aTrade &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Buy</span>(stock, amount, <span class="number">_</span>, <span class="type">TraderType</span>.<span class="type">SingleGuy</span>):</span><br><span class="line">    processSlow(stock, amount, <span class="number">5.0</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Sell</span>(stock, amount, price, <span class="type">TraderType</span>.<span class="type">SingleGuy</span>)</span><br><span class="line">    <span class="keyword">where</span> price*<span class="type">Float</span>(amount) &gt; <span class="number">1000000</span>:</span><br><span class="line">    processFast(stock, -<span class="number">1</span> * amount, <span class="number">5.0</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Sell</span>(stock, amount, <span class="number">_</span>, <span class="type">TraderType</span>.<span class="type">SingleGuy</span>):</span><br><span class="line">    processSlow(stock, -<span class="number">1</span> * amount, <span class="number">5.0</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Buy</span>(stock, amount, price, <span class="type">TraderType</span>.<span class="type">Company</span>)</span><br><span class="line">    <span class="keyword">where</span> price*<span class="type">Float</span>(amount) &lt; <span class="number">1000</span>:</span><br><span class="line">    processSlow(stock, amount, <span class="number">2.0</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Buy</span>(stock, amount, <span class="number">_</span>, <span class="type">TraderType</span>.<span class="type">Company</span>):</span><br><span class="line">    processFast(stock, amount, <span class="number">2.0</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Sell</span>(stock, amount, <span class="number">_</span>, <span class="type">TraderType</span>.<span class="type">Company</span>):</span><br><span class="line">    processFast(stock, -<span class="number">1</span> * amount, <span class="number">2.0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ç»“æ„å¾ˆæ¸…æ™°ï¼Œé˜…è¯»èµ·æ¥ä¹Ÿç›¸å½“ç®€å•ï¼Œå¯¹å¤æ‚æƒ…å†µçš„å°è£…ä¹Ÿå¾ˆå¥½ã€‚</p>
<p>å°±æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸçš„å®ç°äº†æˆ‘ä»¬çš„äº¤æ˜“å¼•æ“ã€‚ç„¶è€Œï¼Œè¿™ä¸ªè§£å†³æ–¹æ¡ˆè¿˜æ˜¯æœ‰ç‚¹ç¹çï¼›æˆ‘ä»¬åœ¨æƒ³æ˜¯å¦è¿˜æœ‰å¯¹å…¶è¿›è¡Œæ”¹è¿›çš„æ¨¡å¼åŒ¹é…æ–¹æ¡ˆã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬ç»§ç»­æ·±å…¥ç ”ç©¶ä¸€ä¸‹æ¨¡å¼åŒ¹é…ã€‚</p>
<h1 id="æ¨¡å¼åŒ¹é…è¿›é˜¶">æ¨¡å¼åŒ¹é…è¿›é˜¶</h1><p>ç°åœ¨æˆ‘ä»¬åœ¨å®æˆ˜ä¸­å·²ç»è§è¿‡äº†å‡ ç§æ¨¡å¼ã€‚ä½†å…¶è¯­æ³•æ˜¯ä»€ä¹ˆï¼Ÿè¿˜èƒ½åŒ¹é…ä»€ä¹ˆï¼ŸSwift å°†è¿™äº›æ¨¡å¼åˆ†ä¸º <strong>7</strong> ç§ã€‚æˆ‘ä»¬ç°åœ¨å°±æ¥è®¤è¯†ä¸€ä¸‹å®ƒä»¬ã€‚</p>
<p>æ‰€æœ‰çš„è¿™äº›æ¨¡å¼ä¸ä»…èƒ½ç”¨åœ¨ <code>switch</code> å…³é”®è¯ä¸Šï¼Œè€Œä¸”å¯ä»¥ç”¨åœ¨ <code>if</code>ï¼Œ<code>guard</code> å’Œ <code>for</code> å…³é”®è¯ä¸Šã€‚å¦‚éœ€äº†è§£è¯¦æƒ…ï¼Œæ¥ç€çœ‹ä¸‹é¢çš„å†…å®¹ã€‚</p>
<h2 id="1-_é€šé…ç¬¦æ¨¡å¼">1. é€šé…ç¬¦æ¨¡å¼</h2><p>é€šé…ç¬¦æ¨¡å¼ä¼šå¿½ç•¥éœ€è¦åŒ¹é…çš„å€¼ï¼Œè¿™ç§ <code>case</code> ä¸‹ä»»ä½•å€¼éƒ½æ˜¯æœ‰å¯èƒ½çš„ã€‚è¿™å’Œ <code>let _ = fn()</code> ä¸€æ ·çš„æ¨¡å¼ï¼Œåœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œ <code>_</code>  è¡¨ç¤ºä½ å°†ä¸å†ä½¿ç”¨è¿™ä¸ªå€¼ã€‚æœ‰æ„æ€çš„æ˜¯è¿™ä¸ªæ¨¡å¼å¯ä»¥åŒ¹é…åŒ…æ‹¬ <code>nil</code> <a href="#1">1</a>åœ¨å†…çš„æ‰€æœ‰å€¼ ã€‚å¦‚æœå¢åŠ ä¸€ä¸ª <code>?</code>ï¼Œå®ƒç”šè‡³å¯ä»¥åŒ¹é…å¯é€‰å€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> p: <span class="type">String</span>? = <span class="literal">nil</span></span><br><span class="line"><span class="keyword">switch</span> p &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">_</span>?: <span class="built_in">print</span> (<span class="string">"Has String"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="literal">nil</span>: <span class="built_in">print</span> (<span class="string">"No String"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°±åƒä½ åœ¨äº¤æ˜“ä¾‹å­é‡Œé¢çœ‹åˆ°çš„ä¸€æ ·ï¼Œå®ƒä¹Ÿå…è®¸ä½ å¿½ç•¥éœ€è¦åŒ¹é…çš„ <code>enum</code> æˆ–è€… <code>tuples</code> ä¸­æ— ç”¨çš„æ•°æ®ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> (<span class="number">15</span>, <span class="string">"example"</span>, <span class="number">3.14</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> (<span class="number">_</span>, <span class="number">_</span>, <span class="keyword">let</span> pi): <span class="built_in">print</span> (<span class="string">"pi: <span class="subst">\(pi)</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-_æ ‡ç¤ºæ¨¡å¼">2. æ ‡ç¤ºæ¨¡å¼</h2><p>åŒ¹é…ä¸€ä¸ªå…·ä½“çš„å€¼ã€‚è¿™ä¸ªå’Œ Objective-C çš„ <code>switch</code> å®ç°æ˜¯ä¸€æ ·çš„ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> <span class="number">5</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">5</span>: <span class="built_in">print</span>(<span class="string">"5"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-_å€¼ç»‘å®šæ¨¡å¼">3. å€¼ç»‘å®šæ¨¡å¼</h2><p>è¿™ç§æ¨¡å¼å’Œé€šè¿‡ <code>let</code> æˆ–è€… <code>var</code> ç»‘å®šå€¼åˆ°å˜é‡ä¸€æ ·ï¼Œä½†æ˜¯åªèƒ½ç”¨åœ¨ <code>switch</code> ä¸­ã€‚å› ä¸ºä½ ä¹‹å‰å·²ç»è§åˆ°è¿‡ï¼Œæ‰€ä»¥æˆ‘åªç»™å‡ºä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> (<span class="number">4</span>, <span class="number">5</span>) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="keyword">let</span> (x, y): <span class="built_in">print</span>(<span class="string">"<span class="subst">\(x)</span> <span class="subst">\(y)</span>"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-_å…ƒç»„æ¨¡å¼">4. å…ƒç»„æ¨¡å¼</h2><p><a href="http://appventure.me/2015/07/19/tuples-swift-advanced-usage-best-practices/" target="_blank" rel="external">å…³äºå…ƒç»„æˆ‘å·²ç»å†™äº†ä¸€æ•´ç¯‡åšæ–‡</a>ï¼Œè¿™ç¯‡åšæ–‡æ‰€æä¾›çš„ä¿¡æ¯è¿œè¿œæ¯”è¿™é‡Œå¤šï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯åœ¨è¿™é‡Œç»™å‡ºä¸€ä¸ªç®€çŸ­çš„ä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> age = <span class="number">23</span></span><br><span class="line"><span class="keyword">let</span> job: <span class="type">String</span>? = <span class="string">"Operator"</span></span><br><span class="line"><span class="keyword">let</span> payload: <span class="type">AnyObject</span> = <span class="type">NSDictionary</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (age, job, payload) &#123;</span><br><span class="line">  <span class="keyword">case</span> (<span class="keyword">let</span> age, <span class="number">_</span>?, <span class="number">_</span> <span class="keyword">as</span> <span class="type">NSDictionary</span>):</span><br><span class="line">  <span class="built_in">print</span>(age)</span><br><span class="line">  <span class="keyword">default</span>: ()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠ 3 ä¸ªå€¼ç»“åˆæ”¾åˆ°ä¸€ä¸ªå…ƒç»„ä¸­ï¼ˆå‡æƒ³å®ƒä»¬æ˜¯é€šè¿‡è°ƒç”¨ä¸åŒçš„ API å¾—åˆ°çš„ï¼‰ï¼Œç„¶åä¸€å£æ°”åŒ¹é…å®ƒä»¬ï¼Œæ³¨æ„è¿™ä¸ªæ¨¡å¼å®Œæˆäº†ä¸‰ä»¶äº‹æƒ…ï¼š</p>
<ol>
<li>æå– <code>age</code></li>
<li>ç¡®ä¿å­˜åœ¨ä¸€ä¸ª <code>job</code>ï¼Œå°±ç®—æˆ‘ä»¬ä¸éœ€è¦å®ƒ</li>
<li>ç¡®ä¿ <code>payload</code> çš„ç±»å‹æ˜¯ <code>NSDictionary</code>ï¼Œå°½ç®¡æˆ‘ä»¬åŒæ ·ä¸éœ€è¦è®¿é—®å®ƒçš„å…·ä½“å€¼ã€‚</li>
</ol>
<h2 id="5-_æšä¸¾_Case_æ¨¡å¼ï¼ˆEnumeration_Case_Patternï¼‰">5. æšä¸¾ Case æ¨¡å¼ï¼ˆEnumeration Case Patternï¼‰</h2><p>å°±å¦‚ä½ åœ¨äº¤æ˜“ä¾‹å­ä¸­æ‰€è§ï¼Œæ¨¡å¼åŒ¹é…å¯¹ Swift çš„ <code>enum</code> æ”¯æŒ<strong>ç›¸å½“æ£’</strong>ã€‚è¿™æ˜¯å› ä¸º <code>enum cases</code> å°±åƒå¯†å°ã€ä¸å¯å˜ä¸”å¯è§£æ„çš„ç»“æ„ä½“ã€‚è¿™éå¸¸åƒ <code>tuples</code>ï¼Œä½ å¯ä»¥æ‰“å¼€æ­£å¥½åŒ¹é…ä¸Šçš„æŸä¸ªå•ç‹¬ <code>case</code> çš„å†…å®¹ç„¶ååªæŠ½å–å‡ºä½ éœ€è¦çš„ä¿¡æ¯<a href="#2">2</a>ã€‚ </p>
<p>å‡æƒ³ä½ æ­£åœ¨ç”¨å‡½æ•°å¼çš„é£æ ¼å†™ä¸€ä¸ªæ¸¸æˆï¼Œç„¶åä½ éœ€è¦å®šä¹‰ä¸€äº›å®ä½“ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>structs</code> ä½†æ˜¯ä½ çš„å®ä½“çš„çŠ¶æ€å¾ˆå°‘ï¼Œä½ è§‰å¾—è¿™æ ·æœ‰ç‚¹çŸ«æ‰è¿‡æ­£ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Entities</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Soldier</span>(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Tank</span>(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Player</span>(x: <span class="type">Int</span>, y: <span class="type">Int</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ä½ éœ€è¦å®ç°ç»˜å›¾å¾ªç¯ã€‚è¿™é‡Œæˆ‘ä»¬åªéœ€è¦ X å’Œ Y åæ ‡ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> e <span class="keyword">in</span> entities() &#123;</span><br><span class="line">    <span class="keyword">switch</span> e &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Soldier</span>(x, y):</span><br><span class="line">      drawImage(<span class="string">"soldier.png"</span>, x, y)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Tank</span>(x, y):</span><br><span class="line">      drawImage(<span class="string">"tank.png"</span>, x, y)</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">Player</span>(x, y):</span><br><span class="line">      drawImage(<span class="string">"player.png"</span>, x, y)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-_ç±»å‹è½¬æ¢æ¨¡å¼">6. ç±»å‹è½¬æ¢æ¨¡å¼</h2><p>å°±åƒåå­—æ‰€è¡¨ç¤ºçš„ä¸€æ ·ï¼Œè¿™ç§æ¨¡å¼è½¬æ¢æˆ–è€…åŒ¹é…ç±»å‹ã€‚å®ƒæœ‰ä¸¤ç§ä¸åŒçš„å…³é”®è¯ï¼š</p>
<ul>
<li><code>is</code> <strong>ç±»å‹</strong>ï¼šåŒ¹é…å³æ‰‹è¾¹å†…å®¹çš„è¿è¡Œæ—¶ç±»å‹ï¼ˆæˆ–è€…ç±»å‹çš„å­ç±»ï¼‰ã€‚å®ƒä¼šåšç±»å‹è½¬æ¢ä½†æ˜¯ä¸å…³æ³¨è¿”å›å€¼ã€‚æ‰€ä»¥ä½ çš„ <code>case</code> å—ä¸çŸ¥é“æ‰€åŒ¹é…çš„ç±»å‹æ˜¯ä»€ä¹ˆã€‚</li>
<li>æ¨¡å¼ <code>as</code> <strong>ç±»å‹</strong>ï¼šå’Œ <code>is</code> æ¨¡å¼åšåŒæ ·çš„åŒ¹é…æ“ä½œï¼Œä½†æ˜¯å¦‚æœæˆåŠŸçš„è¯ä¼šæŠŠç±»å‹è½¬æ¢åˆ°å·¦ä¾§æŒ‡å®šçš„æ¨¡å¼ä¸­ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯è¿™ä¸¤ç§å…³é”®è¯çš„ä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a: <span class="type">Any</span> = <span class="number">5</span> </span><br><span class="line"><span class="keyword">switch</span> a &#123;</span><br><span class="line">  <span class="comment">// è¿™ä¼šå¤±è´¥å› ä¸ºå®ƒçš„ç±»å‹ä»ç„¶æ˜¯ `Any`</span></span><br><span class="line">  <span class="comment">// é”™è¯¯: binary operator '+' cannot be applied to operands of type 'Any' and 'Int'</span></span><br><span class="line">  <span class="keyword">case</span> <span class="keyword">is</span> <span class="type">Int</span>: <span class="built_in">print</span> (a + <span class="number">1</span>)</span><br><span class="line">  <span class="comment">// æœ‰æ•ˆå¹¶è¿”å› '6'</span></span><br><span class="line">  <span class="keyword">case</span> <span class="keyword">let</span> n <span class="keyword">as</span> <span class="type">Int</span>: <span class="built_in">print</span> (n + <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">default</span>: ()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ <code>is</code> å‰æ²¡æœ‰ <code>pattern</code>ã€‚å®ƒç›´æ¥å’Œ <code>a</code> åšåŒ¹é…ã€‚</p>
<h2 id="7-_è¡¨è¾¾æ¨¡å¼">7. è¡¨è¾¾æ¨¡å¼</h2><p>è¡¨è¾¾æ¨¡å¼éå¸¸å¼ºå¤§ã€‚å®ƒå¯ä»¥æŠŠ <code>switch</code> çš„å€¼å’Œå®ç°äº† <code>~=</code> æ“ä½œç¬¦çš„è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…ã€‚è€Œä¸”å¯¹äºè¿™ä¸ªæ“ä½œç¬¦æœ‰é»˜è®¤çš„å®ç°ï¼Œæ¯”å¦‚å¯¹äºèŒƒå›´åŒ¹é…ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> <span class="number">5</span> &#123;</span><br><span class="line"> <span class="keyword">case</span> <span class="number">0</span>..<span class="number">10</span>: <span class="built_in">print</span>(<span class="string">"In range 0-10"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼Œæ›´æœ‰è¶£çš„å¯èƒ½æ˜¯è‡ªå·±é‡å†™æ“ä½œç¬¦ï¼Œç„¶åä½¿ä½ çš„è‡ªå®šä¹‰ç±»å‹å¯ä»¥åŒ¹é…ã€‚æˆ‘ä»¬å‡å®šä½ æƒ³é‡å†™ä¹‹å‰å†™çš„å£«å…µæ¸¸æˆï¼Œè€Œä¸”ä½ æ— è®ºå¦‚ä½•éƒ½è¦ä½¿ç”¨ç»“æ„ä½“ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Soldier</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> hp: <span class="type">Int</span></span><br><span class="line">  <span class="keyword">let</span> x: <span class="type">Int</span></span><br><span class="line">  <span class="keyword">let</span> y: <span class="type">Int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ä½ æƒ³è½»æ¾çš„åŒ¹é…æ‰€æœ‰è¡€é‡ä¸º <strong>0</strong> çš„å®ä½“ã€‚æˆ‘ä»¬å¯ä»¥åƒä¸‹é¢ä¸€æ ·å®ç° <code>~=</code> æ“ä½œç¬¦ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> ~= <span class="params">(pattern: Int, value: Soldier)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> pattern == value.hp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å¯¹ä¸€ä¸ªå®ä½“åšåŒ¹é…äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> soldier = <span class="type">Soldier</span>(hp: <span class="number">99</span>, x: <span class="number">10</span>, y: <span class="number">10</span>)</span><br><span class="line"><span class="keyword">switch</span> soldier &#123;</span><br><span class="line">   <span class="keyword">case</span> <span class="number">0</span>: <span class="built_in">print</span>(<span class="string">"dead soldier"</span>)</span><br><span class="line">   <span class="keyword">default</span>: ()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸å¹¸çš„æ˜¯ï¼Œå¯¹å…ƒç»„åšå…¨åŒ¹é…ä¼¼ä¹ä¸å¥½ä½¿ã€‚å¦‚æœä½ ç¼–å†™ä¸‹é¢çš„ä»£ç ï¼Œå°±ä¼šå‡ºç°ç±»å‹æ£€æŸ¥é”™è¯¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> ~= <span class="params">(pattern: <span class="params">(hp: Int, x: Int, y: Int)</span></span></span>, value: <span class="type">Soldier</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">   <span class="keyword">let</span> (hp, x, y) = pattern</span><br><span class="line">   <span class="keyword">return</span> hp == value.hp &amp;&amp; x == value.x &amp;&amp; y == value.y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªå¯èƒ½è§£å†³ä¸Šè¿°ç±»ä¼¼é—®é¢˜çš„æ–¹æ¡ˆæ˜¯ç»™ä½ çš„ <code>struct</code> å¢åŠ ä¸€ä¸ª <code>unapply</code> æ–¹æ³•ç„¶åå†è¿›è¡ŒåŒ¹é…ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Soldier</span> </span>&#123;</span><br><span class="line">   <span class="func"><span class="keyword">func</span> <span class="title">unapply</span><span class="params">()</span></span> -&gt; (<span class="type">Int</span>, <span class="type">Int</span>, <span class="type">Int</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (<span class="keyword">self</span>.hp, <span class="keyword">self</span>.x, <span class="keyword">self</span>.y)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> ~= <span class="params">(p: <span class="params">(Int, Int, Int)</span></span></span>, t: (<span class="type">Int</span>, <span class="type">Int</span>, <span class="type">Int</span>)) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> p.<span class="number">0</span> == t.<span class="number">0</span> &amp;&amp; p.<span class="number">1</span> == t.<span class="number">1</span> &amp;&amp; p.<span class="number">2</span> == t.<span class="number">2</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> soldier = <span class="type">Soldier</span>(hp: <span class="number">99</span>, x: <span class="number">10</span>, y: <span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(soldier.unapply() ~= (<span class="number">99</span>, <span class="number">10</span>, <span class="number">10</span>))</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯è¿™ç›¸å½“ç¹çè€Œä¸”æ²¡æœ‰åˆ©ç”¨å¥½æ¨¡å¼åŒ¹é…èƒŒåçš„å¤§é‡é­”æ³•èˆ¬çš„æ•ˆæœã€‚</p>
<p>åœ¨è¿™ç¯‡åšæ–‡ä¹‹å‰çš„ç‰ˆæœ¬ä¸­æˆ‘å†™è¿‡ <code>~=</code> ä¸é€‚ç”¨äºåè®®ï¼Œä½†æ˜¯æˆ‘é”™äº†ã€‚æˆ‘è®°å¾—æˆ‘åœ¨ä¸€ä¸ª <code>Playground</code> ä¸­è¯•è¿‡ã€‚è€Œè¿™ä¸ªä¾‹å­ï¼ˆ<a href="https://www.reddit.com/r/swift/comments/3hq6id/match_me_if_you_can_swift_pattern_matching_in/cub187r" target="_blank" rel="external">ç”± reddit ä¸Šçš„ latrodectus å‹æƒ…æä¾›</a>ï¼‰æ˜¯å®Œå…¨å¯ç”¨çš„ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Entity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value: <span class="type">Int</span> &#123;<span class="keyword">get</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Tank</span>: <span class="title">Entity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="number">_</span> value: <span class="type">Int</span>) &#123; <span class="keyword">self</span>.value = value &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Peasant</span>: <span class="title">Entity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="number">_</span> value: <span class="type">Int</span>) &#123; <span class="keyword">self</span>.value = value &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> ~=<span class="params">(pattern: Entity, x: Entity)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> pattern.value == x.value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> <span class="type">Tank</span>(<span class="number">42</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Peasant</span>(<span class="number">42</span>): <span class="built_in">print</span>(<span class="string">"Matched"</span>) <span class="comment">// åŒ¹é…æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">default</span>: ()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥åˆ©ç”¨ <code>Expression Patterns</code> åšå¾ˆå¤šäº‹æƒ…ã€‚å¦‚æœæƒ³è¦äº†è§£æ›´å¤šè¡¨è¾¾æ¨¡å¼çš„ç»†èŠ‚ï¼Œ<a href="http://austinzheng.com/2014/12/17/custom-pattern-matching/" target="_blank" rel="external">çœ‹çœ‹è¿™ç¯‡ç”± Austin Zheng å†™çš„è¶…æ£’åšæ–‡</a>ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»è®²å®Œäº†æ‰€æœ‰å¯èƒ½çš„ <code>switch</code> æ¨¡å¼ã€‚åœ¨æˆ‘ä»¬ç»§ç»­è®²è§£ä¹‹å‰ï¼Œè¿˜éœ€è¦è®¨è®ºæœ€åä¸€ä»¶äº‹æƒ…ã€‚</p>
<h2 id="fallthroughï¼Œbreak_å’Œæ ‡ç­¾">fallthroughï¼Œbreak å’Œæ ‡ç­¾</h2><p>ä¸‹é¢çš„å†…å®¹å’Œæ¨¡å¼åŒ¹é…æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œä»…ä»…æ˜¯å’Œ <code>switch</code> å…³é”®è¯æœ‰å…³ï¼Œæ‰€ä»¥æˆ‘å°±ç®€å•è¯´äº†ã€‚å’Œ C/C++/Objective-C ä¸ä¸€æ ·çš„æ˜¯ï¼š<code>switch cases</code> ä¸ä¼šè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€ä¸ª <code>case</code>ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Swift ä¸éœ€è¦ç»™æ¯ä¸ª <code>case</code> éƒ½å†™ä¸Š <code>break</code>ã€‚ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ <code>fallthrough</code> å…³é”®è¯æ¥å®ç°ä¼ ç»Ÿçš„è‡ªåŠ¨è¿›å…¥ä¸‹ä¸€ä¸ª <code>case</code> çš„è¡Œä¸ºã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> <span class="number">5</span> &#123;</span><br><span class="line">   <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Is 5"</span>)</span><br><span class="line">    <span class="keyword">fallthrough</span></span><br><span class="line">   <span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Is a number"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¼šåœ¨å‘½ä»¤è¡Œè¾“å‡º: "Is 5" "Is a number"</span></span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>break</code> æ¥æå‰è·³å‡º <code>switch</code> è¯­å¥ã€‚æ—¢ç„¶ä¸ä¼šé»˜è®¤è¿›å…¥ä¸‹ä¸€ä¸ª <code>case</code>ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦è¿™ä¹ˆåšå‘¢ï¼Ÿæ¯”å¦‚ä½ çŸ¥é“åœ¨ä¸€ä¸ª <code>case</code> ä¸­æœ‰ä¸€ä¸ªå¿…é¡»çš„è¦æ±‚æ˜¯ä¸æ»¡è¶³çš„ï¼Œè¿™æ ·ä½ å°±ä¸èƒ½ç»§ç»­æ‰§è¡Œè¿™ä¸ª <code>case</code> äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> userType = <span class="string">"system"</span></span><br><span class="line"><span class="keyword">let</span> userID = <span class="number">10</span></span><br><span class="line"><span class="keyword">switch</span> (userType, userID)  &#123;</span><br><span class="line">   <span class="keyword">case</span> (<span class="string">"system"</span>, <span class="number">_</span>):</span><br><span class="line">     <span class="keyword">guard</span> <span class="keyword">let</span> userData = getSystemUser(userID) <span class="keyword">else</span> &#123; <span class="keyword">break</span> &#125;</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">"user info: <span class="subst">\(userData)</span>"</span>)</span><br><span class="line">     insertIntoRemoteDB(userData)</span><br><span class="line">   <span class="keyword">default</span>: ()</span><br><span class="line">&#125;</span><br><span class="line">... å…¶ä»–ä½ éœ€è¦æ‰§è¡Œçš„ä»£ç </span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œå½“ <code>getSystemUser</code> è¿”å›çš„ç»“æœæ˜¯ <code>nil</code> æ—¶ä½ ä¸æƒ³å†ç»§ç»­è°ƒç”¨ <code>insertIntoRemoteData</code>ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œä½¿ç”¨ <code>if let</code>ï¼Œä½†æ˜¯å¦‚æœå¤šä¸ªè¿™æ ·çš„æƒ…å†µç»“åˆåˆ°ä¸€èµ·çš„æ—¶å€™ï¼Œå¾ˆå¿«ä½ å°±ä¼šå¾—åˆ°ä¸€å †å¯æ€•ä¸‘é™‹çš„ <code>if lets</code> åµŒå¥—ä»£ç ã€‚</p>
<p>ä½†æ˜¯å¦‚æœä½ æ˜¯åœ¨ä¸€ä¸ª <code>while</code> å¾ªç¯ä¸­æ‰§è¡Œä½ çš„ <code>switch</code> è¯­å¥ï¼Œç„¶åä½ æƒ³è·³å‡ºå¾ªç¯ï¼Œè€Œä¸æ˜¯ <code>switch</code> çš„æ—¶å€™ï¼Œä½ éœ€è¦æ€ä¹ˆåšå‘¢ï¼Ÿå¯¹ä¸è¿™ç§æƒ…å†µï¼Œ Swift å…è®¸ä½ å®šä¹‰ä¸€ä¸ª <code>labels</code> ï¼Œç„¶å <code>break</code> æˆ–è€… <code>continue</code> åˆ°è¿™ä¸ª <code>labels</code>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">gameLoop: <span class="keyword">while</span> <span class="literal">true</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> state() &#123;</span><br><span class="line">     <span class="keyword">case</span> .<span class="type">Waiting</span>: <span class="keyword">continue</span> gameLoop</span><br><span class="line">     <span class="keyword">case</span> .<span class="type">Done</span>: calculateNextState()</span><br><span class="line">     <span class="keyword">case</span> .<span class="type">GameOver</span>: <span class="keyword">break</span> gameLoop</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡ <code>switch</code> å’Œæ¨¡å¼åŒ¹é…çš„è¯­æ³•å’Œå®ç°ç»†èŠ‚ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€äº›ï¼ˆå¤šå°‘æœ‰ç‚¹ï¼‰æœ‰è¶£çš„çœŸå®æ¡ˆä¾‹ã€‚</p>
<h1 id="çœŸå®æ¡ˆä¾‹">çœŸå®æ¡ˆä¾‹</h1><h2 id="å¯é€‰å€¼">å¯é€‰å€¼</h2><p><a href="http://appventure.me/2014/06/13/swift-optionals-made-simple/" target="_blank" rel="external">å¯¹å¯é€‰å€¼è¿›è¡Œè§£åŒ…çš„æ–¹å¼æœ‰å¾ˆå¤šç§</a>ï¼Œæ¨¡å¼åŒ¹é…å°±æ˜¯å…¶ä¸­ä¸€ç§ã€‚å¯èƒ½åˆ°ç°åœ¨è¿™ç§æ–¹æ³•ä½ å·²ç»ç”¨å¾—éå¸¸é¢‘ç¹äº†ï¼Œä½†è¿˜æ˜¯ç»™ä¸€ä¸ªç®€çŸ­çš„ä¾‹å­å§ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result: <span class="type">String</span>? = secretMethod()</span><br><span class="line"><span class="keyword">switch</span> result &#123;</span><br><span class="line"><span class="keyword">case</span> .<span class="type">None</span>:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">"is nothing"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> a:</span><br><span class="line">    <span class="built_in">println</span>(<span class="string">"<span class="subst">\(a)</span> is a value"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯ Swift 2.0 çš„è¯ï¼Œè¿™ä¼šæ›´ç®€å•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result: <span class="type">String</span>? = secretMethod()</span><br><span class="line"><span class="keyword">switch</span> result &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="literal">nil</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"is nothing"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> a?:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"<span class="subst">\(a)</span> is a value"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­£å¦‚ä½ æ‰€è§ï¼Œ<code>result</code> å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯å®ƒä¹Ÿå¯èƒ½æ˜¯ <code>nil</code>ï¼Œå› ä¸ºå®ƒæ˜¯ <code>optional</code> å€¼ã€‚é€šè¿‡å¯¹ <code>result</code> æ‰§è¡Œ <code>switch</code>ã€‚æˆ‘ä»¬å¯ä»¥ç¡®å®šå®ƒæ˜¯ <code>.None</code> æˆ–è€…æ˜¯ä¸€ä¸ªç¡®å®šçš„å€¼ã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¦‚æœä»–æ˜¯ä¸€ä¸ªç¡®å®šçš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>a</code> è¿™ç§æƒ…å†µä¸‹é©¬ä¸ŠæŠŠè¿™ä¸ªå€¼ç»‘å®šåˆ°ä¸€ä¸ªå˜é‡ã€‚è¿™æ®µä»£ç ä»£ç çš„ä¼˜ç¾ä¹‹å¤„åœ¨äºï¼šå˜é‡ <code>result</code> å¯èƒ½å­˜åœ¨çš„ä¸¤ç§çŠ¶æ€è¢«éå¸¸æ˜æ˜¾çš„åŒºåˆ†å¼€æ¥ã€‚</p>
<h2 id="ç±»å‹åŒ¹é…">ç±»å‹åŒ¹é…</h2><p>åšä¸ºå¼ºç±»å‹è¯­è¨€ï¼ŒSwift é€šå¸¸ä¸ä¼šåƒ Objective-C é‚£æ ·ç»å¸¸éœ€è¦è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ã€‚ç„¶è€Œï¼Œå½“ä½ éœ€è¦ä¸ä¼ ç»Ÿçš„ Objective-C ä»£ç äº¤äº’æ—¶ï¼ˆ<a href="https://netguru.co/blog/objective-c-generics" target="_blank" rel="external">è¿™è¿˜æ²¡æœ‰æ›´æ–°åˆ°ç®€å•æ³›å‹çš„åå°„ä¸€æ–‡ä¸­</a>ï¼‰ï¼Œé‚£ä½ å°±ç»å¸¸ä¼šç¢°åˆ°éœ€è¦åšç±»å‹æ£€æŸ¥çš„ä»£ç ã€‚å‡æƒ³ä½ å¾—åˆ°äº†ä¸€ä¸ªåŒ…å« <code>NSString</code> å’Œ <code>NSNumber</code> å…ƒç´ çš„æ•°ç»„ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> u = <span class="type">NSArray</span>(array: [<span class="type">NSString</span>(string: <span class="string">"String1"</span>), <span class="type">NSNumber</span>(int: <span class="number">20</span>), <span class="type">NSNumber</span>(int: <span class="number">40</span>)])</span><br></pre></td></tr></table></figure>
<p>å½“ä½ éå†è¿™ä¸ª <code>NSArray</code> æ—¶ï¼Œä½ æ°¸è¿œä¸çŸ¥é“å¾—åˆ°çš„æ˜¯ä»€ä¹ˆç±»å‹ã€‚ç„¶è€Œï¼Œ <code>switch</code> è¯­å¥å¯ä»¥è®©ä½ å¾ˆç®€å•çš„æ£€æŸ¥è¿™äº›ç±»å‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> u &#123;</span><br><span class="line">    <span class="keyword">switch</span> x &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">_</span> <span class="keyword">as</span> <span class="type">NSString</span>:</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">"string"</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">_</span> <span class="keyword">as</span> <span class="type">NSNumber</span>:</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">"number"</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">"Unknown types"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æŒ‰èŒƒå›´åšåˆ†çº§">æŒ‰èŒƒå›´åšåˆ†çº§</h2><p>ç°åœ¨ä½ æ­£åœ¨ç»™ä½ å½“åœ°çš„é«˜æ ¡å†™åˆ†çº§çš„ iOS åº”ç”¨ã€‚è€å¸ˆæƒ³è¦è¾“å…¥ä¸€ä¸ª 0 åˆ° 100 çš„æ•°å€¼ï¼Œç„¶åå¾—åˆ°ä¸€ä¸ªç›¸åº”çš„ç­‰çº§å­—ç¬¦ï¼ˆA-Fï¼‰ã€‚æ¨¡å¼åŒ¹é…ç°åœ¨è¦æ¥æ‹¯æ•‘ä½ äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> aGrade = <span class="number">84</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> aGrade &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">90</span>...<span class="number">100</span>: <span class="built_in">print</span>(<span class="string">"A"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">80</span>...<span class="number">90</span>: <span class="built_in">print</span>(<span class="string">"B"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">70</span>...<span class="number">80</span>: <span class="built_in">print</span>(<span class="string">"C"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">60</span>...<span class="number">70</span>: <span class="built_in">print</span>(<span class="string">"D"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>...<span class="number">60</span>: <span class="built_in">print</span>(<span class="string">"F"</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Incorrect Grade"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å­—é¢‘ç‡ç»Ÿè®¡">å­—é¢‘ç‡ç»Ÿè®¡</h2><p>æœ‰ä¸€ç³»åˆ—çš„æ•°æ®å¯¹ï¼Œæ¯ä¸ªæ•°æ®å¯¹ä»£è¡¨ä¸€ä¸ªå­—å’Œå®ƒåœ¨æŸæ®µæ–‡å­—ä¸­å‡ºç°çš„é¢‘ç‡ã€‚æˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯æŠŠé‚£äº›ä½äºæˆ–è€…é«˜äºæŸä¸ªå›ºå®šé˜ˆå€¼çš„æ•°æ®å¯¹è¿‡æ»¤æ‰ï¼Œç„¶ååªè¿”å›å‰©ä¸‹çš„ä¸åŒ…å«å…¶é¢‘ç‡çš„æ‰€æœ‰å­—ã€‚</p>
<p>è¿™æ˜¯æˆ‘ä»¬çš„å­—é›†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> wordFreqs = [(<span class="string">"k"</span>, <span class="number">5</span>), (<span class="string">"a"</span>, <span class="number">7</span>), (<span class="string">"b"</span>, <span class="number">3</span>)]</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ <code>map</code> å’Œ <code>filter</code> è¿›è¡Œå»ºæ¨¡ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> res = wordFreqs.<span class="built_in">filter</span>(&#123; (e) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">if</span> e.<span class="number">1</span> &gt; <span class="number">3</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;).<span class="built_in">map</span> &#123; $<span class="number">0.0</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼Œå› ä¸º <code>flatmap</code> åªèƒ½è¿”å›éç©ºå…ƒç´ ï¼Œæ‰€ä»¥è¿™ä¸ªè§£å†³æ–¹æ¡ˆè¿˜æœ‰å¾ˆå¤§çš„æ”¹è¿›ç©ºé—´ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥æ”¾å¼ƒä½¿ç”¨ <code>e.1</code> è€Œåˆ©ç”¨å…ƒç»„æ¥åšé€‚å½“çš„è§£æ„ï¼ˆä½ çŒœå¯¹äº†ï¼‰ã€‚ç„¶åæˆ‘ä»¬åªéœ€è¦è°ƒç”¨ä¸€æ¬¡ <code>flatmap</code>ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å…ˆ <code>filter</code> å <code>map</code> æ‰€å¸¦æ¥çš„ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> res = wordFreqs.flatMap &#123; (e) -&gt; <span class="type">String</span>? <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">switch</span> e &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> (s, t) <span class="keyword">where</span> t &gt; <span class="number">3</span>: <span class="keyword">return</span> s</span><br><span class="line">    <span class="keyword">default</span>: <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>
<h2 id="éå†ç›®å½•">éå†ç›®å½•</h2><p>å‡æƒ³ä½ éœ€è¦éå†ä¸€ä¸ªæ–‡ä»¶æ ‘ç„¶åæŸ¥æ‰¾ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>æ‰€æœ‰ customer1 å’Œ customer2 åˆ›å»ºçš„ â€œpsdâ€œæ–‡ä»¶</li>
<li>æ‰€æœ‰ customer2 åˆ›å»ºçš„ â€œblendâ€œæ–‡ä»¶</li>
<li>æ‰€æœ‰ç”¨æˆ·åˆ›å»ºçš„ â€œjpegâ€œæ–‡ä»¶</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">guard</span> <span class="keyword">let</span> enumerator = <span class="type">NSFileManager</span>.defaultManager().enumeratorAtPath(<span class="string">"/customers/2014/"</span>)</span><br><span class="line"><span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> enumerator &#123;</span><br><span class="line">    <span class="keyword">switch</span> (url.pathComponents, url.pathExtension) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// customer1 å’Œ customer2 åˆ›å»ºçš„ â€œpsdâ€œæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">case</span> (<span class="keyword">let</span> f, <span class="string">"psd"</span>) </span><br><span class="line">	    <span class="keyword">where</span> f.<span class="built_in">contains</span>(<span class="string">"customer1"</span>) </span><br><span class="line">	    || f.<span class="built_in">contains</span>(<span class="string">"customer2"</span>): <span class="built_in">print</span>(url)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// customer2 åˆ›å»ºçš„ â€œblendâ€œæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">case</span> (<span class="keyword">let</span> f, <span class="string">"blend"</span>) <span class="keyword">where</span> f.<span class="built_in">contains</span>(<span class="string">"customer2"</span>): <span class="built_in">print</span>(url)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰€æœ‰çš„ â€œjpegâ€œæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">case</span> (<span class="number">_</span>, <span class="string">"jpg"</span>): <span class="built_in">print</span>(url)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span>: ()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ <code>contains</code> åœ¨ç¬¬ä¸€ä¸ªåŒ¹é…å°±ç»“æŸç„¶åå°±ä¸ç”¨éå†å®Œæ•´çš„è·¯å¾„äº†ã€‚åŒæ ·ï¼Œæ¨¡å¼åŒ¹é…çš„ä»£ç éå¸¸ç®€æ´æ˜äº†ã€‚</p>
<h2 id="Fibonacci">Fibonacci</h2><p>åŒæ ·ï¼Œæ¥çœ‹ä¸€ä¸‹ä½¿ç”¨æ¨¡å¼åŒ¹é…å®ç°çš„ fibonacci ç®—æ³•æœ‰å¤šä¼˜ç¾<a href="#3">3</a></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">fibonacci</span><span class="params">(i: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span>(i) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> n <span class="keyword">where</span> n &lt;= <span class="number">0</span>: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>, <span class="number">1</span>: <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> n: <span class="keyword">return</span> fibonacci(n - <span class="number">1</span>) + fibonacci(n - <span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(fibonacci(<span class="number">8</span>))</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œå¦‚æœæ˜¯å¤§æ•°çš„è¯ï¼Œç¨‹åºæ ˆä¼šçˆ†æ‰ã€‚</p>
<h2 id="ä¼ ç»Ÿçš„_API_å’Œå€¼æå–">ä¼ ç»Ÿçš„ API å’Œå€¼æå–</h2><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå½“ä½ ä»å¤–éƒ¨æºå–æ•°æ®çš„æ—¶å€™ï¼Œæ¯”å¦‚ä¸€ä¸ªåº“ï¼Œæˆ–è€…ä¸€ä¸ª APIï¼Œå®ƒä¸ä»…æ˜¯ä¸€ç§å¾ˆå¥½çš„åšæ³•ï¼Œè€Œä¸”é€šå¸¸åœ¨è§£ææ•°æ®ä¹‹å‰éœ€è¦æ£€æŸ¥æ•°æ®çš„ä¸€è‡´æ€§ã€‚ä½ éœ€è¦ç¡®ä¿æ‰€æœ‰çš„ <code>key</code> éƒ½æ˜¯å­˜åœ¨çš„ã€æˆ–è€…æ•°æ®çš„ç±»å‹éƒ½æ­£ç¡®ã€æˆ–è€…æ•°ç»„çš„é•¿åº¦æ»¡è¶³è¦æ±‚ã€‚å¦‚æœä¸è¿™ä¹ˆåšå°±ä¼šå› ä¸º bugï¼ˆæœ‰çš„ <code>key</code> ä¸å­˜åœ¨ï¼‰è€Œå¯¼è‡´ app å´©æºƒï¼ˆç´¢å¼•ä¸å­˜åœ¨çš„æ•°ç»„é¡¹ï¼‰ã€‚è€Œä¼ ç»Ÿçš„åšæ³•é€šå¸¸æ˜¯åµŒå¥— <code>if</code> è¯­å¥ã€‚</p>
<p>å‡æƒ³æœ‰ API è¿”å›ä¸€æ¡ç”¨æˆ·ä¿¡æ¯ã€‚ä½†æ˜¯æœ‰ä¸¤ç§ç±»å‹çš„ç”¨æˆ·ï¼šç³»ç»Ÿç”¨æˆ·â€”â€”å¦‚ç®¡ç†å‘˜æˆ–è€…é‚®æ”¿å±€é•¿â€”â€”å’Œæœ¬åœ°ç”¨æˆ·â€”â€”å¦‚ â€œJohn Bâ€ã€â€œBill Gatesâ€ç­‰ã€‚å› ä¸ºç³»ç»Ÿçš„è®¾è®¡å’Œå¢é•¿ï¼ŒAPI çš„ä½¿ç”¨è€…éœ€è¦å¤„ç†ä¸€äº›éº»çƒ¦çš„äº‹æƒ…ï¼š</p>
<ul>
<li><code>system</code> å’Œ <code>local</code> ç”¨æˆ·æ¥è‡ªåŒä¸€ä¸ª API è°ƒç”¨ã€‚</li>
<li>å› ä¸ºæ—©æœŸç‰ˆæœ¬çš„æ•°æ®åº“æ²¡æœ‰ <code>department</code> è¿™ä¸ªå­—æ®µï¼Œæ‰€ä»¥è¿™ä¸ª <code>key</code> å¯èƒ½æ˜¯ä¸å­˜åœ¨çš„ï¼Œè€Œä¸”æ—©æœŸçš„é›‡å‘˜ä»æ¥éƒ½ä¸éœ€è¦å¡«å†™è¿™ä¸ªå­—æ®µã€‚</li>
<li>æ ¹æ®ç”¨æˆ·è¢«åˆ›å»ºçš„æ—¶é—´ï¼Œ<code>name</code> æ•°ç»„å¯èƒ½åŒ…å« 4 ä¸ªå…ƒç´ ï¼ˆusernameï¼Œmiddlenameï¼Œlastname å’Œ firstnameï¼‰æˆ–è€… 2 ä¸ªå…ƒç´ ï¼ˆfull nameï¼Œusernameï¼‰</li>
<li><code>age</code> æ˜¯ä»£è¡¨ç”¨æˆ·å¹´é¾„çš„æ•´å‹æ•°</li>
</ul>
<p>æˆ‘ä»¬çš„ç³»ç»Ÿéœ€è¦ç»™è¿™ä¸ª API è¿”å›çš„æ‰€æœ‰ç³»ç»Ÿç”¨æˆ·åˆ›å»ºç”¨æˆ·è´¦å·ï¼Œè´¦å·ä¿¡æ¯åªåŒ…å«å¦‚ä¸‹ä¿¡æ¯ï¼šusername å’Œ departmentã€‚æˆ‘ä»¬åªéœ€è¦ 1980 å¹´ä»¥å‰å‡ºç”Ÿçš„ç”¨æˆ·ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š departmentï¼Œå°±æŒ‡å®šä¸º â€œCorpâ€ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">legacyAPI</span><span class="params">(id: Int)</span></span> -&gt; [<span class="type">String</span>: <span class="type">AnyObject</span>] &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="string">"type"</span>: <span class="string">"system"</span>, <span class="string">"department"</span>: <span class="string">"Dark Arts"</span>, <span class="string">"age"</span>: <span class="number">57</span>, </span><br><span class="line">	   <span class="string">"name"</span>: [<span class="string">"voldemort"</span>, <span class="string">"Tom"</span>, <span class="string">"Marvolo"</span>, <span class="string">"Riddle"</span>]] </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¸ºç»™å®šçš„çº¦æŸå®ç°ä¸€ä¸ªæ¨¡å¼æ¥è¿›è¡ŒåŒ¹é…ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> item = legacyAPI(<span class="number">4</span>)</span><br><span class="line"><span class="keyword">switch</span> (item[<span class="string">"type"</span>], item[<span class="string">"department"</span>], item[<span class="string">"age"</span>], item[<span class="string">"name"</span>]) &#123;</span><br><span class="line">   <span class="keyword">case</span> <span class="keyword">let</span> (sys <span class="keyword">as</span> <span class="type">String</span>, dep <span class="keyword">as</span> <span class="type">String</span>, age <span class="keyword">as</span> <span class="type">Int</span>, name <span class="keyword">as</span> [<span class="type">String</span>]) <span class="keyword">where</span> </span><br><span class="line">      age &lt; <span class="number">1980</span> &amp;&amp;</span><br><span class="line">      sys == <span class="string">"system"</span>:</span><br><span class="line">     createSystemUser(name.<span class="built_in">count</span> == <span class="number">2</span> ? name.last! : name.first!, dep: dep ?? <span class="string">"Corp"</span>)</span><br><span class="line">  <span class="keyword">default</span>:()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å› ("voldemort", "Dark Arts")</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„è¿™æ®µä»£ç åšäº†ä¸€ä¸ªå¾ˆå±é™©çš„å‡è®¾ï¼šå°±æ˜¯å¦‚æœ <code>name</code> æ•°ç»„å…ƒç´ çš„ä¸ªæ•°ä¸æ˜¯ 2 ä¸ªçš„è¯ï¼Œé‚£ä¹ˆå®ƒ<strong>ä¸€å®š</strong>åŒ…å« 4 ä¸ªå…ƒç´ ã€‚å¦‚æœè¿™ç§å‡è®¾ä¸æˆç«‹ï¼Œæˆ‘ä»¬è·å¾—äº†åŒ…å« 0 ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œè¿™æ®µä»£ç å°±ä¼šå´©æºƒã€‚</p>
<p>é™¤äº†è¿™ä¸€ç‚¹ï¼Œæ¨¡å¼åŒ¹é…å‘ä½ å±•ç¤ºäº†å®ƒæ˜¯å¦‚ä½•åœ¨åªæœ‰ä¸€ä¸ª <code>case</code> çš„æƒ…å†µä¸‹å¸®åŠ©ä½ ç¼–å†™å¹²å‡€çš„ä»£ç å’Œç®€åŒ–å€¼çš„æå–çš„ã€‚</p>
<p>åŒæ ·æ¥çœ‹çœ‹æˆ‘ä»¬æ˜¯æ€ä¹ˆå†™ç´§è·Ÿåœ¨ <code>case</code> ä¹‹å <code>let</code> çš„ï¼Œè¿™æ ·ä¸€æ¥å°±ä¸å¿…åœ¨æ¯ä¸€æ¬¡èµ‹å€¼çš„æ—¶å€™éƒ½é‡å¤å†™å®ƒã€‚</p>
<h1 id="æ¨¡å¼å’Œå…¶ä»–å…³é”®è¯">æ¨¡å¼å’Œå…¶ä»–å…³é”®è¯</h1><p>Swift çš„æ–‡æ¡£æŒ‡å‡ºä¸æ˜¯æ‰€æœ‰çš„æ¨¡å¼éƒ½å¯ä»¥åœ¨ <code>if</code>ã€<code>for</code> æˆ–è€… <code>guard</code> è¯­å¥ä¸­ä½¿ç”¨ã€‚ç„¶è€Œï¼Œè¿™ä¸ªæ–‡æ¡£ä¼¼ä¹ä¸æ˜¯æœ€æ–°çš„ã€‚æ‰€æœ‰ 7 ç§æ¨¡å¼å¯¹è¿™ä¸‰ä¸ªå…³é”®è¯éƒ½æœ‰æ•ˆã€‚</p>
<p>æˆ‘ä¸ºé‚£äº›æ„Ÿå…´è¶£çš„äººç¼–äº†ä¸€ä¸ªä¾‹å­è¦ç‚¹ï¼Œä¸ºæ¯ä¸ªæ¨¡å¼å’Œæ¯ä¸ªå…³é”®è¯éƒ½å†™äº†ä¸€ä¸ªä¾‹å­ã€‚</p>
<p><a href="https://gist.github.com/terhechte/6eaeb90276bbfcd1ea41" target="_blank" rel="external">ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹æ‰€æœ‰çš„æ ·ä¾‹æ¨¡å¼</a></p>
<p>æ¥çœ‹ä¸€ä¸ªå¯¹ä¸‰ä¸ªå…³é”®è¯ä½¿ç”¨ <strong>å€¼ç»‘å®š</strong>ã€<strong>å…ƒç»„</strong>å’Œ<strong>ç±»å‹è½¬æ¢</strong>æ¨¡å¼çš„ç®€çŸ­ä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ°å—ç¼–è¯‘ååªæ˜¯ä¸€ä¸ªå…³é”®è¯çš„é›†åˆã€‚å…¶æœ¬èº«æ²¡æœ‰ä»»ä½•æ„ä¹‰</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">valueTupleType</span><span class="params">(a: <span class="params">(Int, Any)</span></span></span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="comment">// guard case çš„ä¾‹å­</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">case</span> <span class="keyword">let</span> (x, <span class="number">_</span> <span class="keyword">as</span> <span class="type">String</span>) = a <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="literal">false</span>&#125;</span><br><span class="line">    <span class="built_in">print</span>(x)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// for case çš„ä¾‹å­</span></span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">case</span> <span class="keyword">let</span> (a, <span class="number">_</span> <span class="keyword">as</span> <span class="type">String</span>) <span class="keyword">in</span> [a] &#123;</span><br><span class="line">	<span class="built_in">print</span>(a)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if case çš„ä¾‹å­</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">case</span> <span class="keyword">let</span> (x, <span class="number">_</span> <span class="keyword">as</span> <span class="type">String</span>) = a &#123;</span><br><span class="line">       <span class="built_in">print</span>(<span class="string">"if"</span>, x)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// switch case example</span></span><br><span class="line">    <span class="keyword">switch</span> a &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> (a, <span class="number">_</span> <span class="keyword">as</span> <span class="type">String</span>):</span><br><span class="line">	<span class="built_in">print</span>(a)</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">default</span>: <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> u: <span class="type">Any</span> = <span class="string">"a"</span></span><br><span class="line"><span class="keyword">let</span> b: <span class="type">Any</span> = <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(valueTupleType((<span class="number">5</span>, u)))</span><br><span class="line"><span class="built_in">print</span>(valueTupleType((<span class="number">5</span>, b)))</span><br><span class="line"><span class="comment">// 5, 5, "if 5", 5, true, false</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥å¸¦ç€è¿™ä¸ªæƒ³æ³•è¯¦ç»†åœ°çœ‹ä¸€çœ‹æ¯ä¸€ä¸ªå…³é”®è¯ã€‚</p>
<h1 id="ä½¿ç”¨_for_case"><strong>ä½¿ç”¨</strong> for case</h1><p>åˆ°äº† Swift 2.0 åï¼Œæ¨¡å¼åŒ¹é…å˜å¾—æ›´åŠ é‡è¦ï¼Œå› ä¸ºå®ƒè¢«æ‰©å±•åˆ°ä¸ä»…å¯ä»¥æ”¯æŒ <code>switch</code> ï¼Œè¿˜å¯ä»¥æ”¯æŒå…¶ä»–çš„å…³é”®è¯ã€‚æ¯”å¦‚ï¼Œè®©æˆ‘ä»¬å†™ä¸€ä¸ªç®€å•çš„åªè¿”å›éç©ºå…ƒç´ çš„æ•°ç»„å‡½æ•°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">nonnil</span><span class="generics">&lt;T&gt;</span><span class="params">(array: [T?])</span></span> -&gt; [<span class="type">T</span>] &#123;</span><br><span class="line">   <span class="keyword">var</span> result: [<span class="type">T</span>] = []</span><br><span class="line">   <span class="keyword">for</span> <span class="keyword">case</span> <span class="keyword">let</span> x? <span class="keyword">in</span> array &#123;</span><br><span class="line">      result.append(x)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(nonnil([<span class="string">"a"</span>, <span class="literal">nil</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="literal">nil</span>]))</span><br></pre></td></tr></table></figure>
<p>å…³é”®è¯ <code>case</code> å¯ä»¥è¢« <code>for</code> å¾ªç¯ä½¿ç”¨ï¼Œå°±åƒ <code>switch</code> ä¸­çš„ <code>case</code> ä¸€æ ·ã€‚ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰è¯´çš„æ¸¸æˆä¹ˆï¼Ÿç»è¿‡ç¬¬ä¸€æ¬¡é‡æ„ä¹‹åï¼Œç°åœ¨æˆ‘ä»¬çš„å®ä½“ç³»ç»Ÿçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Entity</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">EntityType</span> </span>&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="type">Soldier</span></span><br><span class="line">	<span class="keyword">case</span> <span class="type">Player</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Entry</span>(type: <span class="type">EntityType</span>, x: <span class="type">Int</span>, y: <span class="type">Int</span>, hp: <span class="type">Int</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çœŸæ£’ï¼è¿™å¯ä»¥è®©æˆ‘ä»¬ç”¨æ›´å°‘çš„ä»£ç ç»˜åˆ¶å‡ºæ‰€æœ‰çš„é¡¹ç›®ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="keyword">case</span> <span class="keyword">let</span> <span class="type">Entity</span>.<span class="type">Entry</span>(t, x, y, <span class="number">_</span>) <span class="keyword">in</span> gameEntities()</span><br><span class="line"><span class="keyword">where</span> x &gt; <span class="number">0</span> &amp;&amp; y &gt; <span class="number">0</span> &#123;</span><br><span class="line">    drawEntity(t, x, y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç”¨ä¸€è¡Œå°±è§£æå‡ºäº†æ‰€æœ‰å¿…éœ€çš„å±æ€§ï¼Œç„¶åç¡®ä¿æˆ‘ä»¬ä¸ä¼šåœ¨ 0 ä¸€ä¸‹çš„èŒƒå›´ç»˜åˆ¶ï¼Œæœ€åæˆ‘ä»¬è°ƒç”¨æ¸²æŸ“æ–¹æ³•ï¼ˆ<code>drawEntity</code>ï¼‰ã€‚</p>
<p>ä¸ºäº†çŸ¥é“é€‰æ‰‹æ˜¯å¦åœ¨æ¸¸æˆä¸­èƒœå‡ºï¼Œæˆ‘ä»¬æƒ³è¦çŸ¥é“æ˜¯å¦æœ‰è‡³å°‘ä¸€ä¸ªå£«å…µçš„è¡€é‡æ˜¯å¤§äº 0 çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">gameOver</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">case</span> <span class="type">Entity</span>.<span class="type">Entry</span>(.<span class="type">Soldier</span>, <span class="number">_</span>, <span class="number">_</span>, <span class="keyword">let</span> hp) <span class="keyword">in</span> gameEntities() </span><br><span class="line">    <span class="keyword">where</span> hp &gt; <span class="number">0</span> &#123;<span class="keyword">return</span> <span class="literal">false</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(gameOver())</span><br></pre></td></tr></table></figure>
<p>å¥½çš„æ˜¯ <code>Soldier</code> çš„åŒ¹é…æ˜¯ <code>for</code> æŸ¥è¯¢çš„ä¸€éƒ¨åˆ†ã€‚è¿™æ„Ÿè§‰æœ‰ç‚¹åƒ <code>SQL</code> è€Œä¸æ˜¯å‘½ä»¤å¾ªç¯ç¼–ç¨‹ã€‚åŒæ—¶ï¼Œè¿™ä¹Ÿå¯ä»¥è®©ç¼–è¯‘å™¨æ›´æ¸…æ™°çš„çŸ¥é“æˆ‘ä»¬çš„æ„å›¾ï¼Œä»è€Œå°±æœ‰äº†æ‰“é€šè°ƒåº¦å¢å¼ºè¿™æ¡è·¯çš„å¯èƒ½æ€§ã€‚å¦å¤–ä¸€ä¸ªå¾ˆå¥½çš„ä½“éªŒå°±æ˜¯æˆ‘ä»¬ä¸éœ€è¦å®Œæˆçš„æ‹¼å†™å‡º <code>Entity.EntityType.Soldier</code>ã€‚å°±ç®—æˆ‘ä»¬åƒä¸Šé¢ä¸€æ ·åªå†™ <code>.Soldier</code>ï¼ŒSwift ä¹Ÿèƒ½æ˜ç™½æˆ‘ä»¬çš„æ„å›¾ã€‚</p>
<h1 id="ä½¿ç”¨_guard_case"><strong>ä½¿ç”¨</strong> guard case</h1><p>å¦å¤–ä¸€ä¸ªæ”¯æŒæ¨¡å¼åŒ¹é…çš„å…³é”®è¯å°±æ˜¯æ–°å¼•å…¥çš„ <code>guard</code> å…³é”®è¯ã€‚å®ƒå…è®¸ä½ åƒ <code>if let</code> ä¸€æ ·æŠŠ <code>optionals</code> ç»‘å®šåˆ°æœ¬åœ°èŒƒå›´ï¼Œè€Œä¸”ä¸éœ€è¦ä»»ä½•åµŒå¥—ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">example</span><span class="params">(a: String?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> a = a <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line">&#125;</span><br><span class="line">example(<span class="string">"yes"</span>)</span><br></pre></td></tr></table></figure>
<p><code>guard let case</code> å…è®¸ä½ åšä¸€äº›ç±»ä¼¼æ¨¡å¼åŒ¹é…æ‰€ä»‹ç»çš„äº‹æƒ…ã€‚è®©æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹å£«å…µçš„ä¾‹å­ã€‚åœ¨ç©å®¶çš„è¡€é‡å˜æ»¡ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—éœ€è¦å¢åŠ çš„è¡€é‡ã€‚å£«å…µä¸èƒ½æ¶¨è¡€ï¼Œæ‰€ä»¥å¯¹äºå£«å…µå®ä½“è€Œè¨€ï¼Œæˆ‘ä»¬å§‹ç»ˆè¿”å› 0ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="type">MAX_HP</span> = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">healthHP</span><span class="params">(entity: Entity)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">case</span> <span class="keyword">let</span> <span class="type">Entity</span>.<span class="type">Entry</span>(.<span class="type">Player</span>, <span class="number">_</span>, <span class="number">_</span>, hp) = entity </span><br><span class="line">    <span class="keyword">where</span> hp &lt; <span class="type">MAX_HP</span> </span><br><span class="line">    <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="number">0</span> &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">MAX_HP</span> - hp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Soldier"</span>, healthHP(<span class="type">Entity</span>.<span class="type">Entry</span>(type: .<span class="type">Soldier</span>, x: <span class="number">10</span>, y: <span class="number">10</span>, hp: <span class="number">79</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Player"</span>, healthHP(<span class="type">Entity</span>.<span class="type">Entry</span>(type: .<span class="type">Player</span>, x: <span class="number">10</span>, y: <span class="number">10</span>, hp: <span class="number">57</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º:</span></span><br><span class="line"><span class="string">"Soldier 0"</span></span><br><span class="line"><span class="string">"Player 43"</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯æŠŠæˆ‘ä»¬ç›®å‰è®¨è®ºçš„å„ç§æœºåˆ¶ç”¨åˆ°æè‡´çš„ä¸€ä¸ªä¾‹å­ã€‚</p>
<ul>
<li>å®ƒéå¸¸æ¸…æ™°ï¼Œæ²¡æœ‰ç‰µæ‰¯åˆ°ä»»ä½•åµŒå¥—</li>
<li>çŠ¶æ€çš„é€»è¾‘å’Œåˆå§‹åŒ–æ˜¯åœ¨ <code>func</code> ä¹‹å‰å¤„ç†çš„ï¼Œè¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§</li>
<li>éå¸¸ç®€æ´</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ <code>switch</code> å’Œ <code>for</code> çš„å®Œç¾ç»“åˆï¼Œå¯ä»¥æŠŠå¤æ‚çš„é€»è¾‘ç»“æ„å°è£…æˆæ˜“è¯»çš„æ ¼å¼ã€‚å½“ç„¶ï¼Œå®ƒä¸ä¼šè®©é€»è¾‘å˜å¾—æ›´å®¹æ˜“ç†è§£ï¼Œä½†æ˜¯è‡³å°‘ä¼šä»¥æ›´æ¸…æ™°çš„æ–¹å¼å±•ç°ç»™ä½ ã€‚ç‰¹åˆ«æ˜¯ä½¿ç”¨ <code>enums</code> çš„æ—¶å€™ã€‚</p>
<h1 id="ä½¿ç”¨_if_case"><strong>ä½¿ç”¨</strong> if case</h1><p><code>if case</code> çš„ä½œç”¨å’Œ <code>guard case</code> ç›¸åã€‚å®ƒæ˜¯ä¸€ç§éå¸¸æ£’çš„åœ¨åˆ†æ”¯ä¸­æ‰“å¼€å’ŒåŒ¹é…æ•°æ®çš„æ–¹å¼ã€‚ç»“åˆä¹‹å‰ <code>guard</code> çš„ä¾‹å­ã€‚å¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª <code>move</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å…è®¸æˆ‘ä»¬è¡¨ç¤ºä¸€ä¸ªå®ä½“åœ¨æœä¸€ä¸ªæ–¹å‘ç§»åŠ¨ã€‚å› ä¸ºæˆ‘ä»¬çš„å®ä½“æ˜¯ <code>enums</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿”å›ä¸€ä¸ªæ›´æ–°è¿‡çš„å®ä½“ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">move</span><span class="params">(entity: Entity, xd: Int, yd: Int)</span></span> -&gt; <span class="type">Entity</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">case</span> <span class="type">Entity</span>.<span class="type">Entry</span>(<span class="keyword">let</span> t, <span class="keyword">let</span> x, <span class="keyword">let</span> y, <span class="keyword">let</span> hp) = entity</span><br><span class="line">	<span class="keyword">where</span> (x + xd) &lt; <span class="number">1000</span> &amp;&amp;</span><br><span class="line">	    (y + yd) &lt; <span class="number">1000</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="type">Entity</span>.<span class="type">Entry</span>(type: t, x: (x + xd), y: (y + yd), hp: hp)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> entity</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(move(<span class="type">Entity</span>.<span class="type">Entry</span>(type: .<span class="type">Soldier</span>, x: <span class="number">10</span>, y: <span class="number">10</span>, hp: <span class="number">79</span>), xd: <span class="number">30</span>, yd: <span class="number">500</span>))</span><br><span class="line"><span class="comment">// è¾“å‡º: Entry(main.Entity.EntityType.Soldier, 40, 510, 79)</span></span><br></pre></td></tr></table></figure>
<h1 id="é™åˆ¶">é™åˆ¶</h1><p>ä¸€äº›é™åˆ¶å·²ç»åœ¨æ–‡ç« ä¸­è¯´è¿‡ï¼Œæ¯”å¦‚æœ‰å…³ <code>Expression Patterns</code> çš„é—®é¢˜ï¼Œçœ‹èµ·æ¥å®ƒä¼¼ä¹ä¸èƒ½åŒ¹é… <code>tuples</code> ï¼ˆé‚£æ ·çš„è¯å°±çœŸçš„å¾ˆæ–¹ä¾¿äº†ï¼‰ã€‚åœ¨ Scala å’Œ Clojure ä¸­ï¼Œæ¨¡å¼åŒ¹é…åœ¨é›†åˆä¸ŠåŒæ ·å¯ç”¨ï¼Œæ‰€ä»¥ä½ å¯ä»¥åŒ¹é…å®ƒçš„å¤´éƒ¨ã€å°¾éƒ¨å’Œéƒ¨åˆ†ç­‰ã€‚<a href="#4">4</a>ã€‚è¿™åœ¨ Swift ä¸­æ˜¯ä¸æ”¯æŒçš„ï¼ˆ<a href="http://austinzheng.com/2014/12/17/custom-pattern-matching/" target="_blank" rel="external">å°½ç®¡ Austin Zheng åœ¨æˆ‘ä¹‹å‰é“¾æ¥çš„åšå®¢é‡Œå·®ä¸å¤šå®ç°äº†è¿™ä¸€ç‚¹</a>ï¼‰</p>
<p>å¦å¤–ä¸€ç§ä¸å¯ç”¨çš„çš„æƒ…å†µæ˜¯ï¼ˆè¿™ä¸€ç‚¹ Scala åŒæ ·åšå¾—å¾ˆå¥½ï¼‰å¯¹ç±»æˆ–è€…ç»“æ„ä½“è¿›è¡Œè§£æ„ã€‚Swift å…è®¸æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª <code>unapply</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åšçš„äº‹æƒ…å¤§ä½“å’Œ <code>init</code> ç›¸åã€‚å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œç„¶åå°±å¯ä»¥è®©ç±»å‹æ£€æŸ¥å™¨å¯¹ç±»è¿›è¡ŒåŒ¹é…ã€‚è€Œåœ¨ Swift ä¸­ï¼Œå®ƒçœ‹èµ·æ¥å°±åƒä¸‹é¢ä¸€æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Imaginary</span> </span>&#123;</span><br><span class="line">   <span class="keyword">let</span> x: <span class="type">Int</span></span><br><span class="line">   <span class="keyword">let</span> y: <span class="type">Int</span></span><br><span class="line">   <span class="func"><span class="keyword">func</span> <span class="title">unapply</span><span class="params">()</span></span> -&gt; (<span class="type">Int</span>, <span class="type">Int</span>) &#123;</span><br><span class="line">     <span class="comment">// å®ç°è¿™ä¸ªæ–¹æ³•ä¹‹åï¼Œç†è®ºä¸Šæ¥è¯´å®ç°äº†è§£æ„å˜é‡æ‰€éœ€çš„æ‰€æœ‰ç»†èŠ‚</span></span><br><span class="line">     <span class="keyword">return</span> (<span class="keyword">self</span>.x, <span class="keyword">self</span>.y)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç„¶åè¿™ä¸ªå°±ä¼šè‡ªåŠ¨ unapply ç„¶åå†è¿›è¡ŒåŒ¹é…</span></span><br><span class="line"><span class="keyword">guard</span> <span class="keyword">case</span> <span class="keyword">let</span> <span class="type">Imaginary</span>(x, y) = anImaginaryObject <span class="keyword">else</span> &#123; <span class="keyword">break</span> &#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ›´æ–°">æ›´æ–°</h1><p><strong>08/21/2015</strong> ç»“åˆ <a href="https://www.reddit.com/r/swift/comments/3hq6id/match_me_if_you_can_swift_pattern_matching_in/" target="_blank" rel="external">Reddit ä¸Š foBrowsing çš„æœ‰ç”¨åé¦ˆ</a></p>
<ul>
<li>å¢åŠ  <code>guard case let</code></li>
<li>å¢åŠ ç®€åŒ–ç‰ˆçš„ let è¯­æ³•ï¼ˆå¦‚ï¼š<code>let (x, y)</code> æ›¿ä»£ <code>(let x, let y)</code>ï¼‰</li>
</ul>
<p><strong>08/22/2015</strong> <a href="https://www.reddit.com/r/swift/comments/3hq6id/match_me_if_you_can_swift_pattern_matching_in/" target="_blank" rel="external">ä¼¼ä¹æœ‰ä¸€äº›ä¸œè¥¿æˆ‘æ²¡æµ‹è¯•å¥½</a>ã€‚æˆ‘åˆ—ä¸¾çš„ä¸€äº›é™åˆ¶å®é™…ä¸Šæ˜¯å¯ç”¨çš„ï¼Œå¦å¤–ä¸€ä¸ª Reddit ä¸Šçš„è¯„è®ºè€…ï¼ˆlatrodectusï¼‰æå‡ºäº†ä¸€äº›éå¸¸æœ‰ç”¨çš„æŒ‡æ­£ã€‚</p>
<ul>
<li>å°†ä¹‹å‰çš„ä¿®æ­£ä¸ºï¼šæ‰€æœ‰çš„æ¨¡å¼å¯¹ä¸‰ä¸ªå…³é”®è¯éƒ½é€‚ç”¨ï¼Œç„¶åå¢åŠ äº†ä¸€äº›è¦ç‚¹æ¡ˆä¾‹</li>
<li>å…³äºåè®®å’Œè¡¨è¾¾å¼æ¨¡å¼æ— æ•ˆè¿™ä¸ªé™åˆ¶ï¼Œå…¶å®æ²¡æœ‰çš„</li>
<li>å¢åŠ  â€œæ¨¡å¼å¯ç”¨æ€§â€œç« èŠ‚</li>
</ul>
<p><strong>08/24/2015</strong> </p>
<ul>
<li>å¢åŠ  <code>if case</code> æ ·ä¾‹ï¼Œé‡å‘½åäº†ä¸€äº›ç« èŠ‚ã€‚</li>
<li>ä¿®å¤äº†ä¸€äº›æ–‡æœ¬æ‹¼å†™é”™è¯¯ã€‚å°¤å…¶æˆ‘ä¸å°å¿ƒå†™é“ï¼š<code>_</code> ä¸èƒ½åŒ¹é… <code>nil</code>ã€‚é‚£å½“ç„¶æ˜¯ä¸å¯¹çš„ï¼Œ<code>_</code> å¯ä»¥åŒ¹é…æ‰€æœ‰çš„ä¸œè¥¿ã€‚ï¼ˆæ„Ÿè°¢ <a href="https://github.com/obecker" target="_blank" rel="external">obecker</a>ï¼‰</li>
</ul>
<p><strong>09/18/2015</strong></p>
<ul>
<li>æ·»åŠ äº†æ—¥è¯­ç¿»è¯‘çš„é“¾æ¥</li>
</ul>
<hr>
<p><a name="1">1.å¯ä»¥æŠŠå®ƒå½“åš <code>shell</code> é‡Œé¢çš„ <code>*</code> é€šé…ç¬¦</a></p>
<p><a name="2">2.æˆ‘ä¸æ¸…æ¥šç¼–è¯‘å™¨æ˜¯å¦åœ¨å¯¹è¿™ç‚¹è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä½†ç†è®ºä¸Šæ¥è¯´ï¼Œå®ƒåº”è¯¥èƒ½è®¡ç®—å‡ºæ‰€éœ€æ•°æ®çš„æ­£ç¡®ä½ç½®ï¼Œç„¶åå¿½ç•¥ <code>enum</code> çš„å…¶ä»–æƒ…å†µå¹¶å†…è”è¿™ä¸ªåœ°å€</a></p>
<p><a name="3">3.å½“ç„¶ï¼Œä¸æ˜¯ Haskellå®ç°çš„å¯¹æ‰‹ï¼š<br>fib 0 = 0<br>fib 1 = 1<br>fib n = fib (n-1) + fib (n-2)<br></a></p>
<p><a name="4">4.æ¯”å¦‚ï¼šswitch [1, 2, 4, 3] {<br>case [<em>, 2, </em>, 3]:<br>}</a></p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šBenedikt Terhechteï¼Œ<a href="http://appventure.me/2015/08/20/swift-pattern-matching-in-detail/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-08-20<br>è¯‘è€…ï¼š<a href="http://blog.csdn.net/mmoaay">mmoaay</a>ï¼›æ ¡å¯¹ï¼š<a href="https://github.com/numbbbbb">numbbbbb</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao">åƒå¶çŸ¥é£</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>åœ¨ä¼—å¤š Swift æä¾›ç»™ Objective-C ç¨‹åºå‘˜ä½¿ç”¨çš„æ–°ç‰¹æ€§ä¸­ï¼Œæœ‰ä¸ªç‰¹æ€§æŠŠè‡ªå·±ä¼ªè£…æˆä¸€ä¸ªæ— èŠçš„è€å¤´ï¼Œä½†æ˜¯å´åœ¨å¦‚ä½•ä¼˜é›…çš„è§£å†³â€œé­å°¸é‡‘å­—å¡”â€œçš„é—®é¢˜ä¸Šæœ‰ç€å·¨å¤§çš„æ½œåŠ›ã€‚å¾ˆæ˜¾ç„¶æˆ‘æ‰€è¯´çš„è¿™ä¸ªç‰¹æ€§å°±æ˜¯ <code>switch</code> è¯­å¥ï¼Œ å¯¹äºå¾ˆå¤š Objective-C ç¨‹åºå‘˜æ¥è¯´ï¼Œé™¤äº†ç”¨åœ¨ <a href="http://en.wikipedia.org/wiki/Duff%27s_device">Duffâ€™s Device</a> ä¸Šæ¯”è¾ƒæœ‰è¶£ä¹‹å¤–ï¼Œ<code>switch</code> è¯­å¥éå¸¸ç¬¨æ‹™ï¼Œä¸å¤šä¸ª <code>if</code> è¯­å¥ç›¸æ¯”ï¼Œå®ƒå‡ ä¹æ²¡æœ‰ä»»ä½•ä¼˜åŠ¿ã€‚</p>]]>
    
    </summary>
    
      <category term="APPVENTURE" scheme="http://swiftggteam.github.io/tags/APPVENTURE/"/>
    
      <category term="Swift è¿›é˜¶" scheme="http://swiftggteam.github.io/categories/Swift-%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Swift ä¸­çš„èŒƒå›´å’ŒåŒºé—´]]></title>
    <link href="http://swiftggteam.github.io/2015/10/26/swift-ranges-and-intervals/"/>
    <id>http://swiftggteam.github.io/2015/10/26/swift-ranges-and-intervals/</id>
    <published>2015-10-26T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šOle Begemannï¼Œ<a href="http://oleb.net/blog/2015/09/swift-ranges-and-intervals/" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-09-24<br>è¯‘è€…ï¼š<a href="http://www.dianqk.org/" target="_blank" rel="external">é›é’K</a>ï¼›æ ¡å¯¹ï¼š<a href="http://www.jianshu.com/users/596f2ba91ce9/latest_articles" target="_blank" rel="external">pmst</a>ï¼›å®šç¨¿ï¼š<a href="http://www.swiftyper.com/" target="_blank" rel="external">å°é”…</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>æœ¬ç³»åˆ—å…¶å®ƒæ–‡ç« ï¼š</p>
<p>(1)<a href="http://oleb.net/blog/2015/09/swift-pattern-matching/" target="_blank" rel="external">è‡ªå®šä¹‰æ¨¡å¼åŒ¹é…</a></p>
<p>(2)èŒƒå›´å’ŒåŒºé—´(å³æœ¬ç¯‡)</p>
<p>(3)<a href="http://oleb.net/blog/2015/09/more-pattern-matching-examples/" target="_blank" rel="external">æ›´å¤šæœ‰å…³æ¨¡å¼åŒ¹é…çš„ä¾‹å­</a></p>
<blockquote>
<p>ä¸‹è½½æœ¬ç¯‡æ–‡ç« æ‰€éœ€è¦çš„ <a href="http://oleb.net/media/swift-ranges-and-intervals.playground.zip" target="_blank" rel="external">playground</a> ï¼ˆXcode7 è¿è¡Œç¯å¢ƒï¼‰</p>
</blockquote>
<a id="more"></a>
<p>åœ¨å‰ä¸€ç¯‡<a href="http://oleb.net/blog/2015/09/swift-pattern-matching/" target="_blank" rel="external">æœ‰å…³æ¨¡å¼åŒ¹é…</a>çš„æ–‡ç« ä¸­ï¼Œæˆ‘æåŠæ ‡å‡†åº“ä¸­å·²ç»é’ˆå¯¹<strong>èŒƒå›´å’ŒåŒºé—´</strong>ä½¿ç”¨<code>~=</code>æ¨¡å¼åŒ¹é…æ“ä½œç¬¦è¿›è¡Œäº†é‡è½½ã€‚</p>
<p>è¿™ä¸¤ä¸ªæ•°æ®ç±»å‹æ˜¯ç›¸å…³çš„ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚å¯¹äºå¦‚ä½•åœ¨<code>switch</code>ä¸­è¿›è¡Œä¸ç­‰å¼æ¡ä»¶åŒ¹é…çš„é—®é¢˜ï¼Œå®ƒä»¬ä¸å¤±ä¸ºä¸€ä¸ªå¯é€‰çš„è§£å†³æ–¹æ¡ˆï¼Œæœ¬æ–‡å°†å¯¹å®ƒä»¬è¿›è¡Œæ·±å…¥è®¨è®ºã€‚</p>
<h2 id="Ranges">Ranges</h2><p>èŒƒå›´æ˜¯ç”¨<a href="http://swiftdoc.org/swift-2/type/Range/" target="_blank" rel="external">Range</a>ç±»å‹è¡¨è¾¾çš„ã€‚ä¸€ä¸ªèŒƒå›´å°±æ˜¯ä¸€ä¸ª<em>ç´¢å¼•</em>é›†åˆã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šä¸€ä¸ªèŒƒå›´å°±æ˜¯ä¸€ä¸ªç´¢å¼•é›†åˆã€‚</p>
</blockquote>
<p><em>Range</em>åœ¨æ ‡å‡†åº“ä¸­è¢«é¢‘ç¹ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯å¤„åœ¨é›†åˆçš„ä¸Šä¸‹æ–‡å½“ä¸­æ—¶ã€‚å½“æˆ‘ä»¬æŸ¥çœ‹<code>Range</code>å®šä¹‰æ—¶ï¼ŒèŒƒå›´å’Œé›†åˆä¹‹é—´çš„ç´§å¯†å…³ç³»ä¸€ç›®äº†ç„¶ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Range</span>&lt;<span class="title">Element</span> : <span class="title">ForwardIndexType</span>&gt; : <span class="title">CollectionType</span>, <span class="title">Indexable</span>, ... </span>&#123; </span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸€ä¸ªèŒƒå›´ä¸­çš„å…ƒç´ å¿…éœ€éµå®ˆ<code>ForwardIndexType</code>åè®®ï¼ŒåŒæ—¶<code>CollecitonType</code>åè®®ä¸­çš„å¤§é‡åŠŸèƒ½ä¹Ÿæ˜¯åŸºäºå®ƒå®ç°çš„ã€‚æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ç±»å‹ç”¨æ¥è¡¨ç¤ºé›†åˆç´¢å¼•çš„èŒƒå›´ï¼Œå¯¹äºè·å–ä¸€ä¸ªé›†åˆçš„å­é›†æ˜¯ç›¸å½“æœ‰æ„ä¹‰çš„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨èŒƒå›´è·å–ä¸€ä¸ªæ•°ç»„çš„éƒ¨åˆ†:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]</span><br><span class="line"><span class="comment">// 1..&lt;5 ç­‰ä»·äº Range(start: 1, end: 5)</span></span><br><span class="line">numbers[<span class="number">1</span>..&lt;<span class="number">5</span>] <span class="comment">// [2,3,4,5]</span></span><br></pre></td></tr></table></figure>
<p>æ­£å¦‚ç±»å‹å®šä¹‰ä¸­æ‰€çœ‹åˆ°çš„ï¼Œ<em>Range</em>è‡ªèº«éµå¾ª<code>CollectionType</code>åè®®ï¼Œæ‰€ä»¥å‡ ä¹æ‰€æœ‰æ•°ç»„å¯ä»¥åšçš„äº‹æƒ…ï¼ŒèŒƒå›´ä¹Ÿèƒ½å¤Ÿé€‚ç”¨ã€‚æ¯”å¦‚ç”¨<code>for</code>å¾ªç¯éå†å…ƒç´ ï¼Œæˆ–è€…ä½¿ç”¨<code>contains(_:)</code>æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦åœ¨è¿™ä¸ªèŒƒå›´å†…ã€‚</p>
<p>è™½ç„¶èŒƒå›´ä¸»è¦é€‚ç”¨äºä¸å…¶ä»–é›†åˆé…åˆä½¿ç”¨ï¼Œä½†è°ä¹Ÿæ— æ³•é˜»æ­¢ä½ åˆ›å»ºä¸€ä¸ªç”¨äºè¡¨ç¤ºæ•°å­—åŒºé—´çš„<code>Range&lt;Int&gt;</code>ã€‚æ¯•ç«Ÿ<a href="http://swiftdoc.org/swift-2/type/Int/" target="_blank" rel="external">Int</a>å·²ç»å®ç°äº†<code>ForwardIndexType</code>åè®®ã€‚ç°åœ¨å›åˆ°æˆ‘ä»¬çš„æ¨¡å¼åŒ¹é…é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªèŒƒå›´<code>(Int.min..&lt;0).contains(x)</code>è¡¨ç¤º x &lt; 0 çš„æƒ…å†µï¼Œè¿™æ˜¯å®Œå…¨ç­‰ä»·çš„ï¼Œä¸è¿‡æ‰§è¡Œé€Ÿåº¦å·¨æ…¢ã€‚æ¯•ç«Ÿé»˜è®¤éœ€è¦éå†æ•´ä¸ªé›†åˆï¼Œæœ€ç³Ÿç³•çš„æƒ…å†µä¸‹ï¼Œå°†æ‰§è¡Œ<a href="https://en.wikipedia.org/wiki/9223372036854775807" target="_blank" rel="external">9,223,372,036,854,775,808æ¬¡</a>ï¼Œè¿™ç›¸å½“è€—è´¹èµ„æºã€‚æˆ‘ä»¬å¯ä»¥ä¸º<code>Comparable</code>ï¼ˆæ¯”å¦‚<code>Int</code>ï¼‰ç±»å‹çš„ç´¢å¼•æä¾›ä¸€ä¸ªæ›´å¥½å®ç°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Range</span> <span class="title">where</span> <span class="title">Element</span> : <span class="title">Comparable</span> </span>&#123;</span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">contains</span><span class="params">(element: Element)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> element &gt;= startIndex &amp;&amp; element &lt; endIndex</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="type">Int</span>.<span class="built_in">min</span>..&lt;<span class="number">0</span>).<span class="built_in">contains</span>(-<span class="number">1</span>) <span class="comment">// true</span></span><br><span class="line">(<span class="type">Int</span>.<span class="built_in">min</span>..&lt;<span class="number">0</span>).<span class="built_in">contains</span>(<span class="number">0</span>) <span class="comment">// false</span></span><br><span class="line">(<span class="type">Int</span>.<span class="built_in">min</span>..&lt;<span class="number">0</span>).<span class="built_in">contains</span>(<span class="number">1</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ç»ƒä¹ ï¼Œä¸è¿‡åœ¨æˆ‘ä»¬æ¡ˆä¾‹ä¸­å¯æœ‰å¯æ— ï¼Œå› ä¸º<code>~=</code>æ“ä½œç¬¦ä¸º<code>Range</code>å®ç°çš„åŒ¹é…è¶³å¤Ÿé«˜æ•ˆï¼ˆå°±åƒæˆ‘ä»¬çš„<code>contains(_:)</code>ï¼Œ<code>Comparable</code>åªæ˜¯åœ¨ç´¢å¼•ä¸­å·¥ä½œï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·çš„åšï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Int</span>.<span class="built_in">min</span>..&lt;<span class="number">0</span> ~= -<span class="number">1</span> <span class="comment">// true</span></span><br><span class="line"><span class="type">Int</span>.<span class="built_in">min</span>..&lt;<span class="number">0</span> ~= <span class="number">0</span> <span class="comment">// false</span></span><br><span class="line"><span class="type">Int</span>.<span class="built_in">min</span>..&lt;<span class="number">0</span> ~= <span class="number">1</span> <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ª<code>switch</code>è¯­å¥ï¼Œä½¿ç”¨èŒƒå›´æŸ¥è¯¢åˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯å¦å¤§äºï¼Œå°äºè¿˜æ˜¯ç­‰äº 0ï¼Œå¯¹å—ï¼Ÿä¸å¹¸åœ°æ˜¯ï¼Œè¿™å¹¶ä¸é€‚ç”¨ã€‚è¿™æ®µä»£ç ä¼šå´©æºƒï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">10</span></span><br><span class="line"><span class="keyword">switch</span> x &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>...<span class="type">Int</span>.<span class="built_in">max</span>: <span class="comment">// EXC_BAD_INSTRUCTION</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"positive"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="type">Int</span>.<span class="built_in">min</span>..&lt;<span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"negative"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"zero"</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">fatalError</span>(<span class="string">"Should be unreachable"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¼šåœ¨<code>case 1...Int.max</code>è¿™ä¸€è¡Œä¸­å¾—åˆ°ä¸€ä¸ª<code>EXC_BAD_INSTRUCTION</code> é”™è¯¯ä¿¡æ¯è¡¨æ˜â€œfatal error: Range end index has no valid successorâ€ã€‚å¯¼è‡´é”™è¯¯çš„åŸå› åœ¨äº:<code>range</code>ä¸­çš„<code>endIndex</code>æ€»æ˜¯æŒ‡å‘èŒƒå›´ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„åé¢ã€‚è¿™å¯¹äºåŠå¼€åŒºé—´ï¼ˆç”¨ ..&lt; æ“ä½œç¬¦åˆ›å»ºï¼‰å’Œé—­åˆåŒºé—´ï¼ˆç”¨ â€¦ æ“ä½œç¬¦åˆ›å»ºï¼‰éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºäºŒè€…çš„å†…éƒ¨å®ç°æ˜¯ä¸€æ ·çš„ï¼Œ<code>a...b</code>äº‹å®ä¸Šå°±æ˜¯<code>a..&lt;b.successor()</code>ã€‚ </p>
<blockquote>
<p>æ³¨æ„ï¼šä¸€ä¸ª<code>Range&lt;Int&gt;</code>æ°¸è¿œéƒ½ä¸èƒ½æœ‰<code>Int.max</code></p>
</blockquote>
<p>è¿™æ„å‘³ç€<code>Int.max</code>æ°¸è¿œéƒ½ä¸ä¼šæˆä¸ºä¸€ä¸ª<code>Range&lt;Int&gt;</code>çš„æˆå‘˜ï¼Œè¿™åŒæ ·é€‚ç”¨äºå…¶ä»–æœ‰æœ€å¤§å€¼çš„ç±»å‹ã€‚è¿™ä¸ªé™åˆ¶ä½¿èŒƒå›´ä¸èƒ½æ»¡è¶³æˆ‘ä»¬æ‰€è¦çš„éœ€æ±‚ã€‚æ‰€ä»¥æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥çœ‹çœ‹åŒºé—´èƒ½ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚ã€‚</p>
<h2 id="åŒºé—´">åŒºé—´</h2><p>èŒƒå›´å’ŒåŒºé—´æ˜¯åŸºæœ¬ç›¸åŒçš„æ¦‚å¿µæ„å»ºçš„ï¼ˆä¸€ä¸ªè¿ç»­å…ƒç´ çš„ç³»åˆ—ï¼Œæœ‰å¼€å§‹æœ‰ç»“å°¾ï¼‰ï¼Œä½†ä½¿ç”¨äº†ä¸åŒçš„æ–¹æ³•ã€‚èŒƒå›´åŸºäºç´¢å¼•ï¼Œå› æ­¤å¯ä»¥æ˜¯ä¸ªé›†åˆï¼Œä»–ä»¬çš„å¤§å¤šæ•°åŠŸèƒ½éƒ½æ˜¯åŸºæœ¬è¿™ä¸ªç‰¹æ€§çš„ã€‚åŒºé—´<em>ä¸æ˜¯</em>é›†åˆï¼Œä»–ä»¬çš„å®ç°æ˜¯ä¾èµ–<code>Comparable</code>åè®®çš„ã€‚æˆ‘ä»¬åªå¯ä»¥ä¸ºæœä»<code>Comparable</code>åè®®çš„ç±»å‹åˆ›å»ºåŒºé—´ç±»å‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">IntervalType</span> </span>&#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">Bound</span> : <span class="type">Comparable</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ‰åˆ«äºèŒƒå›´çš„å®šä¹‰ï¼ŒåŒºé—´ä½¿ç”¨<code>IntervalType</code>åè®®å‘ˆç°ï¼Œè¿™ä¸ªåè®®æœ‰ä¸¤ä¸ªå…·ä½“çš„å®ç°ï¼Œ<code>HalfOpenInterval</code>å’Œ<code>ClosedInterval</code>ã€‚ä¸¤ä¸ªèŒƒå›´æ“ä½œç¬¦ä¹Ÿä¸ºåŒºé—´æä¾›äº†é‡è½½ï¼š..&lt; åˆ›å»ºä¸€ä¸ª<code>HalfOpenInterval</code>å’Œ â€¦ åˆ›å»ºä¸€ä¸ª<code>ClosedInterval</code>ã€‚ç”±äºé»˜è®¤æ˜¯é‡è½½äº†<code>Range</code>ï¼Œæ‰€ä»¥ä½ å¿…é¡»æ˜ç¡®å˜é‡ä¸ºåŒºé—´ç±»å‹(IntervalType)ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> int1: <span class="type">HalfOpenInterval</span> = <span class="number">1</span>..&lt;<span class="number">5</span></span><br><span class="line">int1.<span class="built_in">contains</span>(<span class="number">5</span>) <span class="comment">// false</span></span><br><span class="line"><span class="keyword">let</span> int2: <span class="type">ClosedInterval</span> = <span class="number">1</span>...<span class="number">5</span></span><br><span class="line">int2.<span class="built_in">contains</span>(<span class="number">5</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ä»¶äº‹æƒ…å°±æ˜¯è®°å¾—<code>ClosedInterval</code>ä¸å¯ä»¥ä¸ºç©ºï¼Œxâ€¦x æ€»æ˜¯ä¼šåŒ…å« xï¼Œè€Œ xâ€¦(x-1) ä¼šé€ æˆè¿è¡Œæ—¶é”™è¯¯ã€‚</p>
<p>ç„¶è€Œé—­åˆåŒºé—´å¯ä»¥åŒ…å«ä¸€ä¸ªç±»å‹çš„æœ€å¤§å€¼ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ç°åœ¨å¯ä»¥å†™æˆ‘ä»¬çš„<code>switch</code>è¯­å¥äº†ã€‚é‡å¤ä¸€éï¼Œä¸€å®šè¦æ˜ç¡®ç±»å‹ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬æƒ³è¦çš„æ˜¯åŒºé—´è€Œä¸æ˜¯èŒƒå›´ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">10</span></span><br><span class="line"><span class="keyword">switch</span> x &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>...<span class="type">Int</span>.<span class="built_in">max</span> <span class="keyword">as</span> <span class="type">ClosedInterval</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"positive"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="type">Int</span>.<span class="built_in">min</span>..&lt;<span class="number">0</span> <span class="keyword">as</span> <span class="type">HalfOpenInterval</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"negative"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"zero"</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">fatalError</span>(<span class="string">"Should be unreachable"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸ºå¼€åŒºé—´å®šåˆ¶æ“ä½œç¬¦">ä¸ºå¼€åŒºé—´å®šåˆ¶æ“ä½œç¬¦</h2><p>éå¸¸å¥½ï¼Œä½†æˆ‘æƒ³æ‘†è„±<code>Int.min</code>å’Œ<code>Int.max</code>ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå¼€åŒºé—´å’Œé—­åŒºé—´è‡ªå®šä¹‰å‰ç¼€æ“ä½œç¬¦å’Œåç¼€æ“ä½œç¬¦ï¼Œç”¨äºè¡¨ç¤ºæ‰€æœ‰å°äºä¸€ä¸ªä¸Šè¾¹ç•Œçš„å€¼ï¼Œæˆ–è€…å¤§äºä¸€ä¸ªä¸‹è¾¹ç•Œçš„å€¼ã€‚è¿™æ ·ä¸ä»…åœ¨è¯­æ³•ä¸Šè¦æ›´å‹å–„ï¼›ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™äº›æ“ä½œç¬¦ä¸ä»…é€‚ç”¨äº <code>Int</code> ç±»å‹ï¼Œä¹Ÿå¯ä»¥é€‚åˆäºå…¶å®ƒæ‹¥æœ‰æœ€å°å’Œæœ€å¤§å€¼çš„ç±»å‹ã€‚å®ç°çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™ä¸ªæ ·å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> x &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>...: <span class="comment">// an interval from 1 to Int.max (inclusive)</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"positive"</span>)</span><br><span class="line"><span class="keyword">case</span> ..&lt;<span class="number">0</span>: <span class="comment">// an interval from Int.min to 0 (exclusive)</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"negative"</span>)</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬éœ€è¦ä¸º <code>..&lt;</code> å’Œ <code>...</code> åˆ†åˆ«å®šä¹‰å‰ç¼€å’Œåç¼€çš„å®ç°æ–¹å¼ ã€‚ä¸‹é¢è¿™æ®µä»£ç åŸºæœ¬æ˜¯åŸºäº <a href="http://natecook.com/" target="_blank" rel="external">Nate Cook</a> å†™çš„ <a href="https://gist.github.com/natecook1000/3b15b8bd974c8c08b3df" target="_blank" rel="external">gistç‰‡æ®µ</a> ï¼Œä»–å·²ç»åœ¨ 2014 å¹´ 11 æœˆä½¿ç”¨èŒƒå›´å’ŒåŒºé—´æ··åˆå®ç°äº†å®ƒã€‚æˆ‘æŠŠä½¿ç”¨åŒºé—´çš„éƒ¨åˆ†æ”¾åœ¨è¿™é‡Œã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬å¿…é¡»å£°æ˜éœ€è¦è§£é‡Šçš„æ“ä½œç¬¦ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">prefix</span> <span class="keyword">operator</span> ..&lt; &#123; &#125;</span><br><span class="line"><span class="keyword">prefix</span> <span class="keyword">operator</span> ... &#123; &#125;</span><br><span class="line"><span class="keyword">postfix</span> <span class="keyword">operator</span> ..&lt; &#123; &#125;</span><br><span class="line"><span class="keyword">postfix</span> <span class="keyword">operator</span> ... &#123; &#125;</span><br></pre></td></tr></table></figure>
<p>ç´§æ¥ç€ä¸º<code>Int</code>å®ç°ç¬¬ä¸€ä¸ªè¿ç®—ç¬¦çš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// Forms a half-open interval from `Int.min` to `upperBound`</span></span><br><span class="line"><span class="keyword">prefix</span> <span class="func"><span class="keyword">func</span> ..<span class="generics">&lt; (upperBound: Int) -&gt;</span> <span class="title">HalfOpenInterval</span><span class="generics">&lt;Int&gt;</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">Int</span>.<span class="built_in">min</span>..&lt;upperBound</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥ï¼Œä½†æˆ‘ä»¬åº”è¯¥è®©å®ƒæ›´é€šç”¨ã€‚åŒºé—´è¦æ±‚å®ƒçš„åº•å±‚ç±»å‹éƒ½éµå¾ª<code>Comparable</code>åè®®ï¼Œæ‰€ä»¥ä½¿ç”¨ç›¸åŒçš„æ¡ä»¶çº¦æŸæ˜¯ä¸€ä¸ªå¾ˆè‡ªç„¶çš„é€‰æ‹©ã€‚ä½†åœ¨è¿™é‡Œæˆ‘ä»¬ä¼šç¢°åˆ°ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬éœ€è¦çŸ¥é“ T ç±»å‹çš„æœ€å°å€¼æ¥åˆ›å»ºåŒºé—´ï¼Œä½†è¿™å¹¶æ²¡æœ‰ä¸€ä¸ªé€šç”¨çš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">prefix</span> <span class="func"><span class="keyword">func</span> ..<span class="generics">&lt; &lt;T : Comparable&gt;</span><span class="params">(upperBound: T)</span></span> -&gt; <span class="type">HalfOpenInterval</span>&lt;<span class="type">T</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">T</span>.<span class="built_in">min</span>..&lt;upperBound <span class="comment">// error: type 'T' has no member 'min'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”šè‡³æ˜¯åœ¨æ ‡å‡†åº“ä¸­çš„å…¶ä»–åè®®éƒ½æ²¡æœ‰ä¸ºæ•°å­—ï¼ˆå°±æ¯”å¦‚<code>IntegerType</code>ï¼‰æä¾›è¿™äº›â€“å®šä¹‰åœ¨æ•°å­—ç±»å‹ä¸­çš„<code>min</code>å’Œ<code>max</code>å±æ€§ã€‚</p>
<p>Nate æƒ³å‡ºäº†ä¸€ä¸ªå¾ˆé…·çš„è§£å†³æ–¹æ¡ˆï¼šå®šä¹‰ä¸€ä¸ª<code>MinMaxType</code>çš„è‡ªå®šä¹‰åè®®ï¼Œè¿™ä¸ªåè®®å®šä¹‰äº† <code>min</code> å’Œ <code>max</code> ä¸¤ä¸ªå±æ€§ã€‚å› ä¸ºæ‰€æœ‰æ•´æ•°ç±»å‹éƒ½æœ‰è¿™ä¸¤ä¸ªå±æ€§ï¼Œè®©ä»–ä»¬éµå®ˆæ–°çš„åè®®å°±ä¸ç”¨é¢å¤–å†™ä»£ç äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// Conforming types provide static `max` and `min` constants.</span></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">MinMaxType</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> <span class="built_in">min</span>: <span class="type">Self</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> <span class="built_in">max</span>: <span class="type">Self</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Extend relevant types</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span> : <span class="title">MinMaxType</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int8</span> : <span class="title">MinMaxType</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int16</span> : <span class="title">MinMaxType</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int32</span> : <span class="title">MinMaxType</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int64</span> : <span class="title">MinMaxType</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UInt</span> : <span class="title">MinMaxType</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UInt8</span> : <span class="title">MinMaxType</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UInt16</span> : <span class="title">MinMaxType</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UInt32</span> : <span class="title">MinMaxType</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UInt64</span> : <span class="title">MinMaxType</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªå€¼å¾—ç‰¢è®°çš„æŠ€å·§ã€‚ä»»ä½•æ—¶å€™ï¼Œå½“ä½ æœ‰å‡ ä¸ªä¸ç›¸å…³çš„ç±»å‹ï¼Œä½†å®ƒä»¬å…·æœ‰ç›¸åŒç±»å‹çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ã€å±æ€§ï¼Œä½ éƒ½å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„åè®®ç»™ä»–ä»¬æä¾›ä¸€ä¸ªé€šç”¨æ¥å£ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šä»»ä½•æ—¶å€™ï¼Œå½“ä½ æœ‰å‡ ä¸ªä¸ç›¸å…³çš„ç±»å‹ï¼Œä½†å®ƒä»¬å…·æœ‰ç›¸åŒç±»å‹çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ã€å±æ€§ï¼Œä½ éƒ½å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„åè®®ç»™ä»–ä»¬æä¾›ä¸€ä¸ªé€šç”¨æ¥å£ã€‚</p>
</blockquote>
<p>å‘Šè¯‰æˆ‘ä»¬çš„é€šç”¨ç±»å‹ T éµå®ˆ<code>MinMaxType</code>åè®®ä»¥ä½¿è¿™ä¸ªå®ç°å¯ä»¥æ­£å¸¸è¿è¡Œï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// Forms a half-open interval from `T.min` to `upperBound`</span></span><br><span class="line"><span class="keyword">prefix</span> <span class="func"><span class="keyword">func</span> ..<span class="generics">&lt; &lt;T : Comparable where T : MinMaxType&gt;</span></span><br><span class="line">    <span class="params">(upperBound: T)</span></span> -&gt; <span class="type">HalfOpenInterval</span>&lt;<span class="type">T</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">T</span>.<span class="built_in">min</span>..&lt;upperBound</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ˜¯å…¶ä»–ä¸‰ä¸ªæ“ä½œç¬¦çš„å®ç°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// Forms a closed interval from `T.min` to `upperBound`</span></span><br><span class="line"><span class="keyword">prefix</span> <span class="func"><span class="keyword">func</span> ... <span class="generics">&lt;T : Comparable where T : MinMaxType&gt;</span></span><br><span class="line">    <span class="params">(upperBound: T)</span></span> -&gt; <span class="type">ClosedInterval</span>&lt;<span class="type">T</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">T</span>.<span class="built_in">min</span>...upperBound</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// Forms a half-open interval from `lowerBound` to `T.max`</span></span><br><span class="line"><span class="keyword">postfix</span> <span class="func"><span class="keyword">func</span> ..<span class="generics">&lt; &lt;T : Comparable where T : MinMaxType&gt;</span></span><br><span class="line">    <span class="params">(lowerBound: T)</span></span> -&gt; <span class="type">HalfOpenInterval</span>&lt;<span class="type">T</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> lowerBound..&lt;<span class="type">T</span>.<span class="built_in">max</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// Forms a closed interval from `lowerBound` to `T.max`</span></span><br><span class="line"><span class="keyword">postfix</span> <span class="func"><span class="keyword">func</span> ... <span class="generics">&lt;T : Comparable where T : MinMaxType&gt;</span></span><br><span class="line">    <span class="params">(lowerBound: T)</span></span> -&gt; <span class="type">ClosedInterval</span>&lt;<span class="type">T</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> lowerBound...<span class="type">T</span>.<span class="built_in">max</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ ä¸€äº›æµ‹è¯•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">(..&lt;<span class="number">0</span>).<span class="built_in">contains</span>(<span class="type">Int</span>.<span class="built_in">min</span>) <span class="comment">// true</span></span><br><span class="line">(..&lt;<span class="number">0</span>).<span class="built_in">contains</span>(-<span class="number">1</span>) <span class="comment">// true</span></span><br><span class="line">(..&lt;<span class="number">0</span>).<span class="built_in">contains</span>(<span class="number">0</span>) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">(...<span class="number">0</span>).<span class="built_in">contains</span>(<span class="type">Int</span>.<span class="built_in">min</span>) <span class="comment">// true</span></span><br><span class="line">(...<span class="number">0</span>).<span class="built_in">contains</span>(<span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line">(...<span class="number">0</span>).<span class="built_in">contains</span>(<span class="number">1</span>) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">(<span class="number">0</span>..&lt;).<span class="built_in">contains</span>(-<span class="number">1</span>) <span class="comment">// false</span></span><br><span class="line">(<span class="number">0</span>..&lt;).<span class="built_in">contains</span>(<span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line">(<span class="number">0</span>..&lt;).<span class="built_in">contains</span>(<span class="type">Int</span>.<span class="built_in">max</span>) <span class="comment">// false</span></span><br><span class="line">(<span class="number">0</span>..&lt;).<span class="built_in">contains</span>(<span class="type">Int</span>.<span class="built_in">max</span> - <span class="number">1</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">(<span class="number">0</span>...).<span class="built_in">contains</span>(-<span class="number">1</span>) <span class="comment">// false</span></span><br><span class="line">(<span class="number">0</span>...).<span class="built_in">contains</span>(<span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line">(<span class="number">0</span>...).<span class="built_in">contains</span>(<span class="type">Int</span>.<span class="built_in">max</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>å›åˆ°æˆ‘ä»¬çš„<code>switch</code>è¯­å¥ï¼Œç°åœ¨å¾ˆå¥½åœ°å·¥ä½œäº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> x &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>...:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"positive"</span>)</span><br><span class="line"><span class="keyword">case</span> ..&lt;<span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"negative"</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"zero"</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">fatalError</span>(<span class="string">"Should be unreachable"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç»“è®º">ç»“è®º</h2><p>Swift ä¸­èŒƒå›´å’ŒåŒºé—´éƒ½æœ‰ç›¸ä¼¼çš„ç›®çš„ï¼Œä½†æœ‰ç€ä¸åŒçš„å®ç°å’Œæ³›å‹çº¦æŸã€‚èŒƒå›´åŸºäºç´¢å¼•å¹¶ä¸”ç»å¸¸ç”¨äºé›†åˆä¸Šä¸‹æ–‡ä¸­ã€‚è¿™æ„å‘³ç€èŒƒå›´ä¸èƒ½åŒ…å«ä¸€ä¸ªç±»å‹æœ€å¤§å€¼ï¼Œè¿™å°±ä¸é€‚åˆç”¨åœ¨æ•°å­—çš„åŒºé—´ä¸Šã€‚åŒºé—´å…¼å®¹æ‰€æœ‰çš„<code>Comparable</code>ç±»å‹ï¼Œå¹¶ä¸”æ²¡æœ‰æœ€å¤§å€¼çš„é™åˆ¶ã€‚</p>
<p>è™½ç„¶æˆ‘ä»¬åº”è¯¥å¯¹è‡ªå®šä¹‰æ“ä½œç¬¦æŒè°¨æ…çš„æ€åº¦ï¼Œä½†æˆ‘è®¤ä¸ºåœ¨è¿™ä¸ªç‰¹å®šçš„ä¾‹å­ä¸­ï¼Œä»–ä»¬å¯ä»¥æ˜æ˜¾åœ°æé«˜å¯è¯»æ€§è€Œæ²¡æœ‰é™ä½å¯ç†è§£æ€§â€“è¿™ä¸ªå‰ç¼€å’Œåç¼€æ“ä½œç¬¦éå¸¸æ¥è¿‘ä»–ä»¬åŸæœ¬çš„æ„æ€ï¼Œç”šè‡³æ˜¯ä¸ç†Ÿæ‚‰è¿™æ®µä»£ç çš„è¯»è€…åœ¨ç†è§£å®ƒçš„æ—¶å€™ä¹Ÿä¸ä¼šæœ‰å¤šå¤§çš„å›°éš¾ã€‚</p>
<p>å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘è¿˜æ˜¯è®¤ä¸ºåœ¨è¿™ä¸ªç‰¹å®šçš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨è‡ªå®šä¹‰æ“ä½œç¬¦æ¥æ›¿ä»£æ ‡å‡†çš„ Swift å¥æ³•ï¼ˆcase _ where x &gt; 0ï¼‰æ‰€å¾—åˆ°çš„å¥½å¤„æ˜¯å¾ˆå°çš„ï¼Œå› æ­¤åœ¨å®æˆ˜ä»£ç ä¸­è¿˜æ˜¯ä¸å€¼å¾—ä½¿ç”¨ã€‚æŠŠè¿™ä¸ªæ–¹æ³•æš‚æ—¶è§†ä¸ºæ€è€ƒä¸Šçš„å®è·µï¼Œè€Œéæ¨èä½¿ç”¨ã€‚</p>
<p>å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œä½ å¯èƒ½ä¹Ÿä¼šå–œæ¬¢ Chris Eidhof å’Œ Airspeed Velocity çš„å³å°†å‡ºç‰ˆçš„ä¹¦ï¼Œ<a href="https://www.objc.io/books/advanced-swift/" target="_blank" rel="external">Swift è¿›é˜¶</a>ã€‚ä»–ä»¬å¯¹äºç›¸åŒçš„åœ¨åŒºé—´ä¸‹æ ‡ä¸Šä¸‹æ–‡ä¸­çš„å¼€é—­åŒºé—´ä¸»é¢˜è®¨è®ºäº†å¾ˆå¤šå…¶å®ƒçš„ä¸œè¥¿ã€‚æˆ‘æ˜¯è¿™æœ¬ä¹¦çš„æŠ€æœ¯å®¡æ ¡ï¼Œæ‰€ä»¥æˆ‘çš„æ„è§åå‘çš„ï¼Œä½†æ˜¯å¦‚æœä½ å¯¹ Swift å¾ˆæ„Ÿå…´è¶£ï¼Œæˆ‘è¿˜æ˜¯éå¸¸æ¨èè¿™æœ¬ä¹¦ç»™ä½ ã€‚è¿™æœ¬ä¹¦å½“å‰æ˜¯ beta çŠ¶æ€ï¼Œä½†æ˜¯ç°åœ¨å·²ç»å¯ä»¥ä¹°åˆ°å®ƒçš„æ—©æœŸé¢„è§ˆç‰ˆäº†ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šOle Begemannï¼Œ<a href="http://oleb.net/blog/2015/09/swift-ranges-and-intervals/">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-09-24<br>è¯‘è€…ï¼š<a href="http://www.dianqk.org/">é›é’K</a>ï¼›æ ¡å¯¹ï¼š<a href="http://www.jianshu.com/users/596f2ba91ce9/latest_articles">pmst</a>ï¼›å®šç¨¿ï¼š<a href="http://www.swiftyper.com/">å°é”…</a></p>
</blockquote>
<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
<p>æœ¬ç³»åˆ—å…¶å®ƒæ–‡ç« ï¼š</p>
<p>(1)<a href="http://oleb.net/blog/2015/09/swift-pattern-matching/">è‡ªå®šä¹‰æ¨¡å¼åŒ¹é…</a></p>
<p>(2)èŒƒå›´å’ŒåŒºé—´(å³æœ¬ç¯‡)</p>
<p>(3)<a href="http://oleb.net/blog/2015/09/more-pattern-matching-examples/">æ›´å¤šæœ‰å…³æ¨¡å¼åŒ¹é…çš„ä¾‹å­</a></p>
<blockquote>
<p>ä¸‹è½½æœ¬ç¯‡æ–‡ç« æ‰€éœ€è¦çš„ <a href="http://oleb.net/media/swift-ranges-and-intervals.playground.zip">playground</a> ï¼ˆXcode7 è¿è¡Œç¯å¢ƒï¼‰</p>
</blockquote>]]>
    
    </summary>
    
      <category term="Ole Begemann" scheme="http://swiftggteam.github.io/tags/Ole-Begemann/"/>
    
      <category term="Swift è¿›é˜¶" scheme="http://swiftggteam.github.io/categories/Swift-%E8%BF%9B%E9%98%B6/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[3D Touchä¹‹æˆ‘è§]]></title>
    <link href="http://swiftggteam.github.io/2015/10/23/3d-touch-impressions-and-thoughts/"/>
    <id>http://swiftggteam.github.io/2015/10/23/3d-touch-impressions-and-thoughts/</id>
    <published>2015-10-23T01:00:00.000Z</published>
    <updated>2015-11-19T02:33:17.287Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>ä½œè€…ï¼šTomasz Szulcï¼Œ<a href="http://szulctomasz.com/3d-touch-impressions-and-thoughts" target="_blank" rel="external">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-09-26<br>è¯‘è€…ï¼š<a href="http://www.brighttj.com" target="_blank" rel="external">saitjr</a>ï¼›æ ¡å¯¹ï¼š<a href="http://www.jianshu.com/users/596f2ba91ce9/latest_articles" target="_blank" rel="external">pmst</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao" target="_blank" rel="external">åƒå¶çŸ¥é£</a></p>
</blockquote>
<p>Heyï¼Œç°åœ¨æœ‰äº†æ”¯æŒ3D Touchçš„iPhoneå’ŒiOS9ï¼Œè¿™æ˜¯ä¸€é¡¹ä¼Ÿå¤§çš„ç§‘æŠ€æ°ä½œã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ºå¼€å‘è€…å’Œç”¨æˆ·éƒ½å¸¦æ¥äº†ä»€ä¹ˆå‘¢ã€‚æœ¬æ–‡ä¸»è¦æ˜¯æˆ‘å¯¹3D Touchçš„ç†è§£ï¼Œç„¶ååˆ—ä¸¾äº†ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹ã€‚</p>
<a id="more"></a>
<h2 id="å‡ºå¸ˆä¸åˆ©">å‡ºå¸ˆä¸åˆ©</h2><p>æœ¬æ¥æˆ‘æƒ³å†™ä¸€ç¯‡å…¥é—¨çº§å…³äº3D Touchçš„å¯¼è¯»æ–‡ç« ï¼Œä½†æ˜¯é‡åˆ°ä¸€ä¸ªé—®é¢˜â€”â€”Xcode7çš„æ¨¡æ‹Ÿå™¨å¹¶ä¸èƒ½æ¨¡æ‹Ÿ3D Touchã€‚</p>
<p>è‹¹æœå®˜æ–¹çš„è¯´æ³•æ˜¯ï¼š</p>
<blockquote>
<p>Xcode7.0ä¸­ï¼Œä½ å¿…é¡»ä½¿ç”¨æ”¯æŒ3D Touchçš„çœŸæœºè¿›è¡Œå¼€å‘ã€‚å› ä¸ºXcode7.0çš„æ¨¡æ‹Ÿå™¨ä¸æ”¯æŒ3D Touchã€‚</p>
</blockquote>
<p>è¿™æ˜¯ä¸ªæ‚²ä¼¤çš„æ•…äº‹ï¼Œä½†æ˜¯åˆæœ‰ä»€ä¹ˆåŠæ³•å‘¢ã€‚æˆ‘æƒ³ï¼Œè‹¹æœåº”è¯¥ä¼šæƒ³åŠæ³•æ¨¡æ‹Ÿå‡ºæ¥ã€‚å¯èƒ½åœ¨ä¸‹ä¸€ä¸ªXcodeå‘å¸ƒç‰ˆæœ¬ä¸­å°±èƒ½çœ‹åˆ°ã€‚</p>
<p>å¦ä¸€ä¸ªé—®é¢˜åˆ™æ˜¯æ–°çš„iPhoneè¿˜æ²¡æœ‰åœ¨æ³¢å…°å‘å”®ï¼Œå¯èƒ½è¿˜è¦ç­‰2å‘¨ï¼ˆè¯‘è€…æ³¨ï¼šä½œè€…å†™æ–‡åœ¨æ³¢å…°iPhoneå‘å”®ä»¥å‰ï¼‰ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªåŠæ³•ï¼Œæˆ‘10æœˆè¦åœ¨San Franciscoå’ŒPalo Altoå‘†ä¸Šæ•´æ•´ä¸€æœˆï¼Œæ‰€ä»¥æˆ‘å¯èƒ½ä¼šä¹°ä¸€éƒ¨iPhoneï¼Œä½†ä¸ç¡®å®šæ˜¯6sè¿˜æ˜¯6s plusã€‚</p>
<p>å¦‚æœä¹°äº†è®¾å¤‡ï¼Œé‚£æˆ‘è‚¯å®šä¼šå‘å¸ƒä¸€å¤§æ³¢3D Touchçš„æ–‡ç« ã€‚</p>
<h2 id="Peek_and_popæ“ä½œ">Peek and popæ“ä½œ</h2><p>è¿™æ˜¯è‹¹æœä»‹ç»3D Touchçš„ç¬¬ä¸€ä¸ªç‰¹æ€§â€”â€”æˆ–è€…è¯´æ˜¯ä¸¤ä¸ªç‰¹æ€§ã€‚</p>
<ul>
<li>è½»å‹(peek,è½»åº¦æŒ‰å‹)æ“ä½œèƒ½è®©ç”¨æˆ·åœ¨ä¸ç¦»å¼€å½“å‰ç•Œé¢çš„æƒ…å†µä¸‹é¢„è§ˆå†…å®¹ã€‚å¦‚æœè½»æŒ‰æŸä¸ªé€‰é¡¹èƒ½å¤Ÿå¼¹å‡ºä¸€ä¸ªå°çš„çŸ©å½¢è§†å›¾ï¼Œåˆ™è¡¨æ˜å®ƒæ”¯æŒè½»å‹æ“ä½œã€‚</li>
<li>peekæ‰‹åŠ¿å¼¹å‡ºçš„è§†å›¾åº”è¯¥è¶³å¤Ÿå¤§ï¼Œè¿™æ ·å†…å®¹å°±ä¸ä¼šè¢«æ‰‹æŒ‡æŒ¡ä½ï¼Œä»è€Œç”¨æˆ·å¯ä»¥é€‰æ‹©æ˜¯å¦é‡å‹ï¼Œå³popæ“ä½œï¼ˆè¯‘è€…æ³¨ï¼špeekæ“ä½œå³è½»æŒ‰ï¼Œç”¨äºé¢„è§ˆï¼Œpopæ“ä½œåˆ™æ˜¯é‡å‹ï¼Œç”¨äºè¿›ä¸€æ­¥ç¡®è®¤ã€‚popèƒ½æ»¡è¶³åœ¨é¢„è§ˆä¹‹åï¼Œè¿›å…¥ç‰¹å®šé¡µé¢çš„éœ€æ±‚ï¼‰ã€‚</li>
<li>popåˆ™æ˜¯å½“ç”¨æˆ·åœ¨peekå¼¹å‡ºçš„è§†å›¾ä¸ŠåŠ é‡æŒ‰å‹åŠ›åº¦ï¼Œæ˜¾ç¤ºæ›´è¯¦ç»†çš„å†…å®¹ã€‚</li>
<li>å³ä½¿peekèƒ½ç»™ç”¨æˆ·è¶³å¤Ÿå¤šçš„ä¿¡æ¯ï¼Œä½ ä¹Ÿåº”è¯¥è®©ç”¨æˆ·å°†è¯¥æ“ä½œè½¬åŒ–ä¸ºpopã€‚popæ‰€æ˜¾ç¤ºçš„ç•Œé¢åº”è¯¥å’Œç”¨æˆ·ç‚¹å‡»è¿›å…¥ç•Œé¢ç›¸åŒã€‚</li>
<li>è¯·å‹¿åœ¨peeké¢„è§ˆçš„ç•Œé¢ä¸­æ”¾å…¥æŒ‰é’®ï¼Œå› ä¸ºç”¨æˆ·æ‰‹æŒ‡ä¸€ç¦»å¼€é¢„è§ˆç•Œé¢ï¼Œé¢„è§ˆç•Œé¢å°±ä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥æ ¹æœ¬ç‚¹ä¸åˆ°æŒ‰é’®ã€‚</li>
<li>å½“ç”¨æˆ·åœ¨é¢„è§ˆç•Œé¢ä¸­å‘ä¸Šæ»‘åŠ¨æ—¶ï¼Œpeekå¯ä»¥æä¾›ä¸€äº›å¿«æ·æ“ä½œ(quick action)ã€‚ä½ å¯ä»¥åœ¨é¢„è§ˆç•Œé¢ä¸­æ·»åŠ ä¸€äº›å¿«æ·æ“ä½œï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä¸Šæ»‘ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªä½ æ‰€æä¾›çš„æ“ä½œäº†ã€‚</li>
<li>å¦‚æœä½ ä¸ºæŸä¸ªé€‰é¡¹æä¾›äº†é•¿æŒ‰æ‰‹åŠ¿äº‹ä»¶(touch-and-holdï¼Œæˆ–è€…å«long press)ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç”¨peekæ¥ä»£æ›¿é•¿æŒ‰æ‰‹åŠ¿ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å°è¯•ã€‚</li>
<li>å¦‚æœä½ æƒ³ä½¿ç”¨å¿«æ·æ“ä½œã€peekå’Œpopï¼Œé‚£ä¹ˆè®°ä½åœ¨ä½¿ç”¨å‰å…ˆåˆ¤æ–­3D Touchæ˜¯å¦å¯ç”¨ã€‚</li>
<li>ä¸æ˜¯æ¯ä¸ªè®¾å¤‡éƒ½æ”¯æŒpeekå’Œpopæ“ä½œçš„ï¼Œå¹¶ä¸”3D Touchä¹Ÿå¯èƒ½å¤„äºç¦ç”¨çŠ¶æ€ã€‚æ‰€ä»¥ä¸è¦è®©æŸäº›äº‹ä»¶åªèƒ½ç”±peekæ¥è§¦å‘ã€‚æœ€å¥½æœ‰ä¸€ä¸ªå¤‡é€‰æ–¹æ¡ˆï¼Œå³è§†å›¾ä¹Ÿèƒ½é€šè¿‡é•¿æŒ‰æ‰‹åŠ¿æ¥å±•ç¤ºã€‚</li>
</ul>
<h2 id="å¿«æ·æ“ä½œ">å¿«æ·æ“ä½œ</h2><p>æ¥ä¸‹æ¥ï¼Œä»‹ç»ä¸€äº›ç”¨æˆ·åœ¨é‡å‹åº”ç”¨å›¾æ ‡æ—¶çš„ä¸€äº›å¿«æ·æ“ä½œã€‚</p>
<ul>
<li>å¼¹å‡ºæ¡†åŒ…å«äº†ä¸»æ ‡é¢˜ã€å‰¯æ ‡é¢˜ä¸å›¾æ ‡ã€‚</li>
<li>è¯¥æ“ä½œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºæ›´æ–°æ—¶ï¼Œæ˜¾ç¤ºæ›´æ–°ä¿¡æ¯ã€‚</li>
<li>ä½ çš„åº”ç”¨åœ¨Homeç•Œé¢ä¸­ï¼Œåº”è¯¥è‡³å°‘æä¾›ä¸€ä¸ªå¿«æ·é€‰é¡¹ã€‚è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä½¿ç”¨æ‰‹åŠ¿æ“ä½œä½ çš„åº”ç”¨ï¼Œæ–¹ä¾¿å¿«æ·ã€‚</li>
<li>åŒ»ç”¨æœ€å¤šå¯ä»¥æä¾›å››ä¸ªå¿«æ·æ“ä½œã€‚</li>
<li>ä¸è¦ä½¿ç”¨å¿«æ·æ“ä½œæ¥æé†’ç”¨æˆ·æ›´æ–°ã€å˜æ›´ä¹‹ç±»çš„äº‹ã€‚å¦‚æœ‰éœ€è¦ï¼Œé€šçŸ¥(<em>Notifications</em>)æ›´èƒ½èƒœä»»è¿™äº›ä»»åŠ¡ã€‚</li>
<li>å¿«æ·æ“ä½œçš„å‘½ååº”è¯¥ç®€æ´ï¼Œå¦‚æœ‰éœ€è¦ï¼Œè¿˜åº”è¯¥æœ‰å‰¯æ ‡é¢˜å’Œå›¾æ ‡ã€‚å°½é‡è®©ç”¨æˆ·æ˜ç¡®è¯¥æ“ä½œçš„ä½œç”¨ã€‚å¦‚æœæä¾›äº†å‰¯æ ‡é¢˜ï¼Œé‚£ä¹ˆæ ‡é¢˜æ å°†ä¼šæ›´é•¿ï¼Œå¦‚æœå¤§å°ä¸èƒ½é€‚åº”ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æˆªå–ã€‚å¦‚æœæ²¡æœ‰å‰¯æ ‡é¢˜ï¼Œé‚£ä¹ˆä¸»æ ‡é¢˜è¿‡é•¿ä¼šè‡ªåŠ¨æ¢è¡Œã€‚</li>
</ul>
<h2 id="æ€»ç»“">æ€»ç»“</h2><p>3D Touchæ˜¯ä¸€ä¸ªéå¸¸çˆ½çš„ç‰¹æ€§ï¼Œå®ƒæä¾›äº†å…¨æ–°çš„äº¤äº’æ–¹å¼ã€‚è®¾å¤‡ä¸­åŒ…å«äº†ä¸€ä¸ªçº¿æ€§æŒ¯åŠ¨å™¨(Taptic Engine)ï¼Œæ‰€ä»¥æŒ‰å‹å±å¹•æ—¶ï¼Œè®¾å¤‡èƒ½æœ‰ä¸€å®šå“åº”â€”â€”å¤ªå¥½äº†ï¼Œè¿«ä¸åŠå¾…æƒ³è¦è¯•è¯•ã€‚</p>
<p>éå¸¸é—æ†¾ï¼Œè‹¹æœæ²¡æœ‰åœ¨æœ€æ–°çš„Xcode 7 beta 2ä¸­è§£å†³æ— æ³•æ¨¡æ‹Ÿçš„é—®é¢˜ï¼Œè¿˜æ˜¯å¸Œæœ›ä»–ä»¬å°½å¿«æå®šå§â€”â€”æˆ–è®¸ä»–ä»¬ä¸ä¿®å¤æ˜¯ä¸ºäº†å¢åŠ é”€é‡ï¼Œå› ä¸ºç”¨æˆ·å·²ç»è¿«ä¸åŠå¾…çš„æƒ³è¦è¯•è¯•è¿™ä¸ªæ–°ç‰¹æ€§äº†ï¼Œè€Œæœ€ç®€å•ç²—æš´çš„æ–¹å¼ï¼Œå°±æ˜¯ä¹°ä¸ªæ–°è®¾å¤‡ :Dã€‚</p>
<p>æˆ‘å·²ç»è¿«ä¸åŠå¾…çš„æƒ³è¦å°è¯•åŸºäº3D Touchçš„åº”ç”¨äº†ï¼Œå¦‚æ¸¸æˆå’Œç”»å›¾ï¼Œè¿˜æœ‰ä¸€äº›æˆ‘æƒ³è±¡ä¸åˆ°çš„åº”ç”¨ã€‚æˆ–è®¸è¿˜å¯ä»¥çœ‹åˆ°è®¡é‡é‡é‡çš„åº”ç”¨ï¼Œæ¯”å¦‚ç§°ä¸€ä¸ªæ°´æœçš„é‡é‡ï¼Œæˆ–æ˜¯ä¸€ä¸ªæ”¾ç½®åœ¨å±å¹•ä¸Šçš„ç‰©ä½“çš„é‡é‡ç­‰ç­‰ :&gt;ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç”± SwiftGG ç¿»è¯‘ç»„ç¿»è¯‘ï¼Œå·²ç»è·å¾—ä½œè€…ç¿»è¯‘æˆæƒï¼Œæœ€æ–°æ–‡ç« è¯·è®¿é—® <a href="http://swift.gg" target="_blank" rel="external">http://swift.gg</a>ã€‚</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>ä½œè€…ï¼šTomasz Szulcï¼Œ<a href="http://szulctomasz.com/3d-touch-impressions-and-thoughts">åŸæ–‡é“¾æ¥</a>ï¼ŒåŸæ–‡æ—¥æœŸï¼š2015-09-26<br>è¯‘è€…ï¼š<a href="http://www.brighttj.com">saitjr</a>ï¼›æ ¡å¯¹ï¼š<a href="http://www.jianshu.com/users/596f2ba91ce9/latest_articles">pmst</a>ï¼›å®šç¨¿ï¼š<a href="http://weibo.com/xiaoxxiao">åƒå¶çŸ¥é£</a></p>
</blockquote>
<p>Heyï¼Œç°åœ¨æœ‰äº†æ”¯æŒ3D Touchçš„iPhoneå’ŒiOS9ï¼Œè¿™æ˜¯ä¸€é¡¹ä¼Ÿå¤§çš„ç§‘æŠ€æ°ä½œã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ºå¼€å‘è€…å’Œç”¨æˆ·éƒ½å¸¦æ¥äº†ä»€ä¹ˆå‘¢ã€‚æœ¬æ–‡ä¸»è¦æ˜¯æˆ‘å¯¹3D Touchçš„ç†è§£ï¼Œç„¶ååˆ—ä¸¾äº†ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹ã€‚</p>]]>
    
    </summary>
    
      <category term="Tomasz Szulc" scheme="http://swiftggteam.github.io/tags/Tomasz-Szulc/"/>
    
      <category term="Swift å…¥é—¨" scheme="http://swiftggteam.github.io/categories/Swift-%E5%85%A5%E9%97%A8/"/>
    
      <category term="3D Touch" scheme="http://swiftggteam.github.io/categories/3D-Touch/"/>
    
  </entry>
  
</feed>
