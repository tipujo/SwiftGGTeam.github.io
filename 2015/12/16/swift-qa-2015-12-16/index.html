
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="vqJV77bZM6" />
  
    <title>[原创] 每周 Swift 社区问答 2015-12-16 | SwiftGG 翻译组 - 高质量的 Swift 译文网站</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="SwiftGG">
    
    <meta name="keywords" content="swift语言,swift翻译,swift学习" /> 

    
    <meta name="description" content="本周整理问题如下：

Unwrapping NSNumber works fine in iOS Simulator but unexpectedly found nil on iPhone
Why my code is working in playground but not in my project?
Failable initialisers and unbound instance v">
<meta property="og:type" content="article">
<meta property="og:title" content="[原创] 每周 Swift 社区问答 2015-12-16">
<meta property="og:url" content="http://swiftggteam.github.io/2015/12/16/swift-qa-2015-12-16/index.html">
<meta property="og:site_name" content="SwiftGG">
<meta property="og:description" content="本周整理问题如下：

Unwrapping NSNumber works fine in iOS Simulator but unexpectedly found nil on iPhone
Why my code is working in playground but not in my project?
Failable initialisers and unbound instance v">
<meta property="og:updated_time" content="2015-12-23T09:10:13.904Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[原创] 每周 Swift 社区问答 2015-12-16">
<meta name="twitter:description" content="本周整理问题如下：

Unwrapping NSNumber works fine in iOS Simulator but unexpectedly found nil on iPhone
Why my code is working in playground but not in my project?
Failable initialisers and unbound instance v">

    
    <link rel="alternative" href="/atom.xml" title="SwiftGG" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/logo.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/logo.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.jpg" alt="SwiftGG" title="SwiftGG"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="SwiftGG">SwiftGG</a></h1>
				<h2 class="blog-motto">走心的 Swift 翻译组</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于</a></li>
					
						<li><a href="/stat">统计</a></li>
					
					<li>
 					
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		
  <header class="article-info clearfix">
    <h1 itemprop="name">
      
        <a href="/2015/12/16/swift-qa-2015-12-16/" title="[原创] 每周 Swift 社区问答 2015-12-16" itemprop="url">[原创] 每周 Swift 社区问答 2015-12-16</a>
    </h1>
    <p class="article-time">
      <time datetime="2015-12-15T16:00:00.000Z" itemprop="datePublished"><i class="icon-time"></i> 2015-12-16</time>
      <span style="margin-left: 0.5em;"><i class="icon-eye-open"></i> <span class="viewcount"></span></span>
    </p>
  </header>

	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Q1:_Unwrapping_NSNumber_works_fine_in_iOS_Simulator_but_unexpectedly_found_nil_on_iPhone"><span class="toc-number">1.</span> <span class="toc-text">Q1: Unwrapping NSNumber works fine in iOS Simulator but unexpectedly found nil on iPhone</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述"><span class="toc-number">1.1.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#解答"><span class="toc-number">1.2.</span> <span class="toc-text">解答</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q2:Why_my_code_is_working_in_playground_but_not_in_my_project?"><span class="toc-number">2.</span> <span class="toc-text">Q2:Why my code is working in playground but not in my project?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-1"><span class="toc-number">2.1.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题解答"><span class="toc-number">2.2.</span> <span class="toc-text">问题解答</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q3:Failable_initialisers_and_unbound_instance_vars"><span class="toc-number">3.</span> <span class="toc-text">Q3:Failable initialisers and unbound instance vars</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-2"><span class="toc-number">3.1.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题解答-1"><span class="toc-number">3.2.</span> <span class="toc-text">问题解答</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q4:Read-only_property"><span class="toc-number">4.</span> <span class="toc-text">Q4:Read-only property</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题链接"><span class="toc-number">4.1.</span> <span class="toc-text">问题链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-3"><span class="toc-number">4.2.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#代码实现"><span class="toc-number">4.3.</span> <span class="toc-text">代码实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q5:_Why?_insert_a_new_element_into_array_and_it_always_crash!"><span class="toc-number">5.</span> <span class="toc-text">Q5: Why? insert a new element into array and it always crash!</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题链接-1"><span class="toc-number">5.1.</span> <span class="toc-text">问题链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-4"><span class="toc-number">5.2.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题解答-2"><span class="toc-number">5.3.</span> <span class="toc-text">问题解答</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q6:binary_operator_‘??’_cannot_be_applied_to_functions?"><span class="toc-number">6.</span> <span class="toc-text">Q6:binary operator ‘??’ cannot be applied to functions?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题链接-2"><span class="toc-number">6.1.</span> <span class="toc-text">问题链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-5"><span class="toc-number">6.2.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题解答-3"><span class="toc-number">6.3.</span> <span class="toc-text">问题解答</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q7:_Filter_array_on_type"><span class="toc-number">7.</span> <span class="toc-text">Q7: Filter array on type</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题链接-3"><span class="toc-number">7.1.</span> <span class="toc-text">问题链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-6"><span class="toc-number">7.2.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题解答-4"><span class="toc-number">7.3.</span> <span class="toc-text">问题解答</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#思考"><span class="toc-number">7.4.</span> <span class="toc-text">思考</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q8、Numbers_in_swift"><span class="toc-number">8.</span> <span class="toc-text">Q8、Numbers in swift</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题链接-4"><span class="toc-number">8.1.</span> <span class="toc-text">问题链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-7"><span class="toc-number">8.2.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题解答-5"><span class="toc-number">8.3.</span> <span class="toc-text">问题解答</span></a></li></ol></li></ol>
		
		</div>
		
		<p>本周整理问题如下：</p>
<ul>
<li><a href="#Q1">Unwrapping NSNumber works fine in iOS Simulator but unexpectedly found nil on iPhone</a></li>
<li><a href="#Q2">Why my code is working in playground but not in my project?</a></li>
<li><a href="#Q3">Failable initialisers and unbound instance vars</a></li>
<li><a href="#Q4">Read-only property</a></li>
<li><a href="#Q5">Why? insert a new element into array and it always crash!</a></li>
<li><a href="#Q6">binary operator ‘??’ cannot be applied to functions?</a></li>
<li><a href="#Q7">Filter array on type</a> </li>
<li><a href="#Q8">Numbers in swift</a></li>
</ul>
<p>对应的代码都放到了 github 上，有兴趣的同学可以下载下来研究：<a href="https://github.com/SwiftGGTeam/SwiftCommunityWeeklyQA/tree/master/20151216/%E6%AF%8F%E5%91%A8%20Swift%20%E7%A4%BE%E5%8C%BA%E9%97%AE%E7%AD%9420151216.playground" target="_blank" rel="external">点击下载</a></p>
<a id="more"></a>
<p><a name="Q1"></a></p>
<h2 id="Q1:_Unwrapping_NSNumber_works_fine_in_iOS_Simulator_but_unexpectedly_found_nil_on_iPhone">Q1: Unwrapping NSNumber works fine in iOS Simulator but unexpectedly found nil on iPhone</h2><p><a href="https://forums.developer.apple.com/thread/27726" target="_blank" rel="external">Q1链接地址</a></p>
<h3 id="问题描述">问题描述</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> stack = <span class="type">Array</span>&lt;<span class="type">String</span>&gt;()  </span><br><span class="line">stack.append(<span class="string">"2.3"</span>)  </span><br><span class="line"><span class="keyword">let</span> lastElement = stack.popLast()!  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Popped last element: <span class="subst">\(lastElement)</span>"</span>)  </span><br><span class="line"><span class="keyword">let</span> number = <span class="type">NSNumberFormatter</span>().numberFromString(lastElement)  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">"NSNumber gives us: <span class="subst">\(lastElement)</span>"</span>)  </span><br><span class="line"><span class="keyword">let</span> doubleValue = number!.doubleValue  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Double value of this element is: <span class="subst">\(doubleValue)</span>"</span>)</span><br></pre></td></tr></table></figure>
<p>上述代码在Playground 以及iOS 模拟器中执行结果如下：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Popped</span> last element: <span class="number">2.3</span>  </span><br><span class="line"><span class="type">NSNumber</span> gives us: <span class="number">2.3</span>  </span><br><span class="line"><span class="type">Double</span> value of this element <span class="keyword">is</span>: <span class="number">2.3</span></span><br></pre></td></tr></table></figure>
<p>但是在真机里是这样的：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Popped</span> last element: <span class="number">2.3</span>  </span><br><span class="line"><span class="type">NSNumber</span> gives us: <span class="number">2.3</span>  </span><br><span class="line">fatal error: unexpectedly found <span class="literal">nil</span> <span class="keyword">while</span> unwrapping an <span class="type">Optional</span> value  </span><br><span class="line">(lldb)</span><br></pre></td></tr></table></figure>
<p>所以提问者修改了一行代码</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> doubleValue = number?.doubleValue</span><br></pre></td></tr></table></figure>
<p>再次执行：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">Popped</span> last element: <span class="number">2.3</span>  </span><br><span class="line"><span class="type">NSNumber</span> gives us: <span class="number">2.3</span>  </span><br><span class="line"><span class="type">Double</span> value of this element <span class="keyword">is</span>: <span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<p>发现解包失败，值为 nil，那么问题出在那里呢？</p>
<h3 id="解答">解答</h3><p>由<a href="https://forums.developer.apple.com/people/junkpile" target="_blank" rel="external">junkpile</a>解答：</p>
<p>你的手机所处国家可能对小数分隔符的定义是一个逗号‘,’，而不是句号‘.’ 看到这个回答我也是醉了，最后提问者现身说法，确实他设置的德国是使用逗号作为小数分隔符的，所以解包失败。</p>
<p>junkpile 还给出了一个小建议：</p>
<p>在需要对数字字符串进行格式化的地方，比如输入数字的用户控件，你就需要显式的指定数字格式的本地化属性。反之在接收用户输入的数字时，你应该判断本地化属性，让一切尽在掌握中。</p>
<p><a name="Q2"></a></p>
<h2 id="Q2:Why_my_code_is_working_in_playground_but_not_in_my_project?">Q2:Why my code is working in playground but not in my project?</h2><p><a href="https://forums.developer.apple.com/thread/27764" target="_blank" rel="external">Q2链接地址</a></p>
<h3 id="问题描述-1">问题描述</h3><p>使用 NSDateFormater 解析一个字符串日期，代码如下：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit  </span><br><span class="line"><span class="keyword">let</span> lTs = <span class="type">String</span>(<span class="string">"Mon, 07 Dec 2015 3:58 pm EST"</span>)  </span><br><span class="line"><span class="keyword">let</span> dateFormatter = <span class="type">NSDateFormatter</span>()  </span><br><span class="line">dateFormatter.dateFormat = <span class="string">"EEE, dd MMM yyyy h:mm a zzz"</span>  </span><br><span class="line"><span class="keyword">let</span> lDate = dateFormatter.dateFromString(lTs)  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">"<span class="subst">\(lDate!)</span>"</span>)</span><br><span class="line"><span class="comment">// 输出The result is "2015-12-07 20:58:00 +0000\n"</span></span><br></pre></td></tr></table></figure>
<p>不过当提问者复制这段代码到项目中时（原来在playground）,居然crash掉了，问题出在对<code>lDate!</code>解包过程。</p>
<h3 id="问题解答">问题解答</h3><p>由苹果员工<a href="https://forums.developer.apple.com/people/eskimo" target="_blank" rel="external">eskimo</a>解答：</p>
<p>如果是对固定格式的字符串日期解析，你需要确定用户所在地域的local。</p>
<p>增加一行代码：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">dateFormatter.locale = <span class="type">NSLocale</span>(localeIdentifier: <span class="string">"en_US_POSIX"</span>)</span><br></pre></td></tr></table></figure>
<p>最近 swift.gg 也有一篇文章详解了 NSDate 的正确使用姿势，包含了日期格式的一些知识点，有兴趣的同学可以看看：<a href="http://swift.gg/2015/12/14/a-beginners-guide-to-nsdate-in-swift/" target="_blank" rel="external">Swift 的 NSDate 初学者指南</a></p>
<p><a name="Q3"></a></p>
<h2 id="Q3:Failable_initialisers_and_unbound_instance_vars">Q3:Failable initialisers and unbound instance vars</h2><p><a href="https://forums.developer.apple.com/thread/27743" target="_blank" rel="external">Q3链接地址</a></p>
<h3 id="问题描述-2">问题描述</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">let</span> a :<span class="type">Int</span>  </span><br><span class="line">    <span class="keyword">let</span> b : <span class="type">Int</span>  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>?(name: <span class="type">String</span>, m: <span class="type">Int</span>, n: <span class="type">Int</span>)&#123;  </span><br><span class="line">        <span class="keyword">if</span> name != <span class="string">"fistro"</span> &#123;  </span><br><span class="line">            a = m  </span><br><span class="line">            b = n  </span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;  </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span>  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译器报错在 else{} 内并未对 a,b 进行变量初始化，但是其实提问者是想说，既然是一个可失败的构造器，为什么一定要对 a,b进行赋值才能返回 nil 呢？</p>
<h3 id="问题解答-1">问题解答</h3><p><a href="https://forums.developer.apple.com/people/Jessy" target="_blank" rel="external">Jessy</a>提供了这么一个方法：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> a :<span class="type">Int</span></span><br><span class="line">	<span class="keyword">let</span> b : <span class="type">Int</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">init</span>?(name: <span class="type">String</span>, m: <span class="type">Int</span>, n: <span class="type">Int</span>)&#123;</span><br><span class="line">		a = m</span><br><span class="line">		b = n</span><br><span class="line">		<span class="keyword">guard</span> name == <span class="string">"fistro"</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后<a href="https://forums.developer.apple.com/people/ChrisLattner" target="_blank" rel="external">ChrisLattner</a>大神(swift之父)站出来了，明确说了：</p>
<p>这是 Swift 2.1 版本的限制，在即将发布的 Swift 2.2 中已经修复啦。</p>
<p>这里给个stackoverflow类似的问题链接：<a href="http://stackoverflow.com/questions/26495586/best-practice-to-implement-a-failable-initializer-in-swift" target="_blank" rel="external">http://stackoverflow.com/questions/26495586/best-practice-to-implement-a-failable-initializer-in-swift</a></p>
<p><a name="Q4"></a></p>
<h2 id="Q4:Read-only_property">Q4:Read-only property</h2><h3 id="问题链接">问题链接</h3><p><a href="https://forums.developer.apple.com/thread/27892" target="_blank" rel="external">Q4链接地址</a></p>
<h3 id="问题描述-3">问题描述</h3><p>日常项目开发中，我们会遇到一些 Access Control 的问题。譬如，我想要在类中实现一个属性对外是readonly(可读)，对内是write and read(可读写)。那么如何实现是最好的呢？下面提供一个简单的思路。</p>
<h3 id="代码实现">代码实现</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span>&#123;</span><br><span class="line"><span class="comment">// 对内可修改属性</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">var</span> gip: <span class="type">Bool</span> = <span class="literal">false</span>  </span><br><span class="line"><span class="comment">// 这是一个对外的可读属性</span></span><br><span class="line"><span class="keyword">var</span> gameInProgress: <span class="type">Bool</span> &#123;  </span><br><span class="line">     <span class="keyword">return</span> gip  </span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不过这并不是一个最佳的选择，希望有知道的小伙伴可以私信咱们。</p>
<p><a name="Q5"></a></p>
<h2 id="Q5:_Why?_insert_a_new_element_into_array_and_it_always_crash!">Q5: Why? insert a new element into array and it always crash!</h2><h3 id="问题链接-1">问题链接</h3><p><a href="https://forums.developer.apple.com/thread/27803" target="_blank" rel="external">Q5链接地址</a></p>
<h3 id="问题描述-4">问题描述</h3><p>以下代码会在第三行崩溃：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> oldNums: [<span class="type">Int</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ,<span class="number">6</span> , <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line"><span class="keyword">var</span> newArray = oldNums[<span class="number">1</span>..&lt;<span class="number">4</span>]</span><br><span class="line">newArray.insert(<span class="number">99</span>, atIndex: <span class="number">0</span>) <span class="comment">// &lt;-- crash here</span></span><br><span class="line">newArray.insert(<span class="number">99</span>, atIndex: <span class="number">1</span>) <span class="comment">// &lt;-- work very well</span></span><br></pre></td></tr></table></figure>
<h3 id="问题解答-2">问题解答</h3><p>先看下 newArray 的类型以及其他一些属性。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(newArray.<span class="keyword">dynamicType</span>) <span class="comment">//-&gt;ArraySlice&lt;Int&gt;  </span></span><br><span class="line"><span class="built_in">print</span>(newArray.<span class="built_in">indices</span>) <span class="comment">//-&gt;1..&lt;4</span></span><br></pre></td></tr></table></figure>
<p>显然 newArray 并不是一个数组，而是一个SliceArray，它的 StartIndex 是从 1 开始的，也就是通过 [1..&lt;4] 截取的下标开始的，所以插入下标为 0 的位置，就会报错。</p>
<p>修改如下：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">newArray.insert(<span class="number">99</span>, atIndex: newArray.startIndex)</span><br></pre></td></tr></table></figure>
<p>当然如果你还是偏执地想要从0开始 那么不妨重新搞一个数组喽，要知道 Array 有个sliceArray 的构造方法。所以改动如下：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> oldNums: [<span class="type">Int</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ,<span class="number">6</span> , <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line"><span class="keyword">var</span> sliceArray = oldNums[<span class="number">1</span>..&lt;<span class="number">4</span>]</span><br><span class="line"><span class="keyword">var</span> newArray = <span class="type">Array</span>(oldNums[<span class="number">1</span>..&lt;<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(newArray.<span class="keyword">dynamicType</span>)	<span class="comment">//array</span></span><br><span class="line"><span class="built_in">print</span>(newArray.<span class="built_in">indices</span>)			<span class="comment">//0..&lt;3 数组下标为0 1 2</span></span><br><span class="line">newArray.insert(<span class="number">99</span>, atIndex: <span class="number">0</span>) <span class="comment">//在0位置插入一个元素</span></span><br><span class="line"><span class="built_in">print</span>(newArray.<span class="keyword">dynamicType</span>)          <span class="comment">//array</span></span><br><span class="line"><span class="built_in">print</span>(newArray.<span class="built_in">indices</span>)                  <span class="comment">//0..&lt;4 数组下标为0 1 2 3</span></span><br><span class="line">newArray.insert(<span class="number">99</span>, atIndex: <span class="number">1</span>) <span class="comment">//在1位置插入一个元素</span></span><br><span class="line"><span class="built_in">print</span>(newArray.<span class="keyword">dynamicType</span>)</span><br><span class="line"><span class="built_in">print</span>(newArray.<span class="built_in">indices</span>)                  <span class="comment">//0..&lt;5 数组下标为0 1 2 3 4</span></span><br></pre></td></tr></table></figure>
<p><a name="Q6"></a></p>
<h2 id="Q6:binary_operator_‘??’_cannot_be_applied_to_functions?">Q6:binary operator ‘??’ cannot be applied to functions?</h2><h3 id="问题链接-2">问题链接</h3><p><a href="https://forums.developer.apple.com/thread/28099" target="_blank" rel="external">Q6链接地址</a></p>
<h3 id="问题描述-5">问题描述</h3><p>在 Playground 中运行以下代码：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">f1</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">return</span>  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">var</span> f2:(()-&gt;())?  </span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> f3 = f2 ?? f1</span><br></pre></td></tr></table></figure>
<p>直接报错：binary operator ‘??’ cannot be applied to operands of type ‘(() -&gt; ())?’ and ‘() -&gt; ()’</p>
<h3 id="问题解答-3">问题解答</h3><p>其实Chris Lattner 大神说了：这就是个已知的 BUG ! 处理 autoclosure 和 function 时已经有人 report 过了。</p>
<p>不过呢<a href="https://forums.developer.apple.com/people/OOPer" target="_blank" rel="external">OOPer</a>还是提供了他自己的解决方式。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> f = f1  </span><br><span class="line"><span class="keyword">let</span> f3 = f2 ?? f  <span class="comment">//不再报错</span></span><br></pre></td></tr></table></figure>
<p>注意倘若把 var 变成 let 常量定义的话就报错了!</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> f = f1  </span><br><span class="line"><span class="keyword">let</span> f3 = f2 ?? f  <span class="comment">//报错</span></span><br></pre></td></tr></table></figure>
<p>亲测在 swift2 中依然存在这个BUG！希望大家引起注意。</p>
<p><a name="Q7"></a></p>
<h2 id="Q7:_Filter_array_on_type">Q7: Filter array on type</h2><h3 id="问题链接-3">问题链接</h3><p><a href="https://forums.developer.apple.com/thread/28185" target="_blank" rel="external">Q7链接地址</a></p>
<h3 id="问题描述-6">问题描述</h3><p>请看下面问题：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 声明了一个类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">X</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> v:<span class="type">Int</span></span><br><span class="line">	<span class="keyword">init</span>(<span class="number">_</span> v:<span class="type">Int</span>)&#123;<span class="keyword">self</span>.v = v&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承自X</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">X1</span>:<span class="title">X</span></span>&#123;&#125;</span><br><span class="line"><span class="comment">// 继承自X</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">X2</span>:<span class="title">X</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a :[<span class="type">X</span>]</span><br><span class="line"><span class="keyword">var</span> a1:[<span class="type">X1</span>]</span><br><span class="line"><span class="comment">// 注意这里有些是用X1初始化 有些是用X2初始化</span></span><br><span class="line"><span class="comment">// 但是a数组的类型切记是[X],之所以能这么干的原因在于</span></span><br><span class="line"><span class="comment">// X1 X2都是X的子类，严格意义上来说，说X1 X2是X也是OK的</span></span><br><span class="line">a=[<span class="type">X1</span>(<span class="number">1</span>),<span class="type">X1</span>(<span class="number">2</span>),<span class="type">X2</span>(<span class="number">3</span>),<span class="type">X2</span>(<span class="number">4</span>),<span class="type">X1</span>(<span class="number">5</span>)]</span><br><span class="line">a[<span class="number">0</span>].v  <span class="comment">//输出1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误来了</span></span><br><span class="line">a1 = a.<span class="built_in">filter</span> &#123; $<span class="number">0</span> <span class="keyword">is</span> <span class="type">X1</span> &#125; <span class="comment">// ERROR</span></span><br><span class="line">a1[<span class="number">2</span>].v</span><br></pre></td></tr></table></figure>
<blockquote>
<p>is 关键字就是用来判断某个实例的所属类，注意说的是实例。</p>
</blockquote>
<p>报错：    </p>
<p><code>Playground execution failed: playground78.swift:15:8: error: cannot invoke &#39;filter&#39; with an argument list of type &#39;(@noescape (X) throws -&gt; Bool)&#39;</code></p>
<p>然后提问者就想可能是自己闭包格式没写全，于是又这么改：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">a1 = a.<span class="built_in">filter</span> &#123; (p:<span class="type">X</span>) -&gt; <span class="type">Bool</span> <span class="keyword">in</span> p <span class="keyword">is</span> <span class="type">X1</span> &#125;</span><br></pre></td></tr></table></figure>
<p>不出意外，还是挂了。</p>
<h3 id="问题解答-4">问题解答</h3><p>首先我们要明白 <code>filter</code> 方法的用法，filter 函数接收一个闭包作为筛选数组元素的过滤器，闭包一次处理一个元素，符合返回<code>true</code>，反之<code>false</code>。只有那些<code>true</code>的元素才会被<code>append</code>到结果数组中返回。更多filter函数请点击<a href="http://www.jianshu.com/notebooks/1752038/latest" target="_blank" rel="external">这里</a>。</p>
<p>现在来看看问题代码：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">a1 = a.<span class="built_in">filter</span> &#123; $<span class="number">0</span> <span class="keyword">is</span> <span class="type">X1</span> &#125;</span><br></pre></td></tr></table></figure>
<p>先看式子右边<code>a.filter { $0 is X1 }</code>传入了一个简化版闭包<code>$0 is X1</code>，其实就是作为筛选条件，一旦a中元素的类型为<code>X1</code>，即我们想要的元素，不过这里的元素类型依旧是<code>X</code>，而非<code>X1</code>，不难得出最后返回的是<code>[X]</code>结果数组； 在看式子左边<code>a1</code>，这货的类型是<code>[X1]</code>。原因找到了！就是因为<code>[X1]≠[X]</code>造成的，修改方式嘛，自然就是<code>as</code>喽。所以最后修改代码如下</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">a1 = a.<span class="built_in">filter</span>&#123; $<span class="number">0</span> <span class="keyword">is</span> <span class="type">X1</span>&#125; <span class="keyword">as</span>! [<span class="type">X1</span>]</span><br><span class="line">a1.<span class="built_in">map</span>&#123;<span class="built_in">print</span>(<span class="string">"<span class="subst">\($<span class="number">0</span>.v)</span>"</span>)&#125;</span><br></pre></td></tr></table></figure>
<p>其实吧，我更推荐第二种方式，使用 flatMap 实现：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">a1 = a.flatMap&#123;$<span class="number">0</span> <span class="keyword">as</span>? <span class="type">X1</span>&#125;</span><br></pre></td></tr></table></figure>
<p>我们对a数组中的元素进行遍历，每个都执行<code>$0 as? X1</code>类型转换，倘若成功就将元素转换为<code>X1</code>类型，失败则返回<code>nil</code>，最后<code>flapMap</code>会为我们剔除<code>nil</code>值。</p>
<h3 id="思考">思考</h3><p>现在有个问题:倘若我们使用面向对象编程呢？上述两种方法还适用吗？</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">X</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> v:<span class="type">Int</span>&#123;<span class="keyword">get</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承自X</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">X1</span>:<span class="title">X</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> v:<span class="type">Int</span></span><br><span class="line">	<span class="keyword">init</span>(<span class="number">_</span> v:<span class="type">Int</span>)&#123;<span class="keyword">self</span>.v = v&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 继承自X</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">X2</span>:<span class="title">X</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> v:<span class="type">Int</span></span><br><span class="line">	<span class="keyword">init</span>(<span class="number">_</span> v:<span class="type">Int</span>)&#123;<span class="keyword">self</span>.v = v&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a :[<span class="type">X</span>]</span><br><span class="line"><span class="keyword">var</span> a1:[<span class="type">X1</span>]</span><br><span class="line"><span class="comment">// 注意这里有些是用X1初始化 有些是用X2初始化</span></span><br><span class="line">a=[<span class="type">X1</span>(<span class="number">1</span>),<span class="type">X1</span>(<span class="number">2</span>),<span class="type">X2</span>(<span class="number">3</span>),<span class="type">X2</span>(<span class="number">4</span>),<span class="type">X1</span>(<span class="number">5</span>)]</span><br><span class="line">a[<span class="number">0</span>].v</span><br><span class="line">a1 = a.<span class="built_in">filter</span>&#123; $<span class="number">0</span> <span class="keyword">is</span> <span class="type">X1</span>&#125; <span class="keyword">as</span>! [<span class="type">X1</span>] <span class="comment">//报错：fatal error: array element cannot be bridged to Objective-C</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a2 = a.flatMap&#123; $<span class="number">0</span> <span class="keyword">as</span>? <span class="type">X1</span>&#125;</span><br></pre></td></tr></table></figure>
<p>看来只有<code>flatMap</code>依旧坚挺！如果想要使用<code>filter</code>的话，可以这么实现：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">(a.<span class="built_in">filter</span> &#123; $<span class="number">0</span> <span class="keyword">is</span> <span class="type">XValue</span> &#125;).<span class="built_in">map</span> &#123; $<span class="number">0</span> <span class="keyword">as</span>! <span class="type">XValue</span> &#125;</span><br></pre></td></tr></table></figure>
<p>画蛇添足的赶脚。有木有更好的方法呢？报错说我们没有桥接到OC,让我想到了<code>@objc</code>，于是我尝试了下：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="preprocessor">@objc</span> <span class="class"><span class="keyword">protocol</span> <span class="title">X</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> v:<span class="type">Int</span>&#123;<span class="keyword">get</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承自X</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">X1</span>:<span class="title">X</span></span>&#123;</span><br><span class="line">	<span class="preprocessor">@objc</span> <span class="keyword">var</span> v:<span class="type">Int</span></span><br><span class="line">	<span class="keyword">init</span>(<span class="number">_</span> v:<span class="type">Int</span>)&#123;<span class="keyword">self</span>.v = v&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 继承自X</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">X2</span>:<span class="title">X</span></span>&#123;</span><br><span class="line">	<span class="preprocessor">@objc</span> <span class="keyword">var</span> v:<span class="type">Int</span></span><br><span class="line">	<span class="keyword">init</span>(<span class="number">_</span> v:<span class="type">Int</span>)&#123;<span class="keyword">self</span>.v = v&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a :[<span class="type">X</span>]</span><br><span class="line"><span class="keyword">var</span> a1:[<span class="type">X1</span>]</span><br><span class="line"><span class="comment">// 注意这里有些是用X1初始化 有些是用X2初始化</span></span><br><span class="line">a=[<span class="type">X1</span>(<span class="number">1</span>),<span class="type">X1</span>(<span class="number">2</span>),<span class="type">X2</span>(<span class="number">3</span>),<span class="type">X2</span>(<span class="number">4</span>),<span class="type">X1</span>(<span class="number">5</span>)]</span><br><span class="line">a[<span class="number">0</span>].v</span><br><span class="line"><span class="keyword">var</span> a2 = a.<span class="built_in">filter</span>&#123; $<span class="number">0</span> <span class="keyword">is</span> <span class="type">X1</span>&#125; <span class="keyword">as</span>! [<span class="type">X1</span>]</span><br></pre></td></tr></table></figure>
<p>这样是ok的。</p>
<h2 id="Q8、Numbers_in_swift">Q8、Numbers in swift</h2><h3 id="问题链接-4">问题链接</h3><p><a href="https://forums.developer.apple.com/thread/28056" target="_blank" rel="external">Q8链接地址</a></p>
<h3 id="问题描述-7">问题描述</h3><p>提问者吐槽，以下代码会出现编译错误：</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="variable"><span class="keyword">var</span> x</span>: <span class="typename">Int</span> = <span class="number">2</span></span><br><span class="line"><span class="variable"><span class="keyword">var</span> y</span>: <span class="typename">Double</span> = <span class="number">2.0</span></span><br><span class="line"><span class="variable"><span class="keyword">var</span> z</span>: <span class="typename">Double</span> = y / x</span><br></pre></td></tr></table></figure>
<p>然后又表示，下面代码也是错的，让人难以接受这是 Swift 干的事情：</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="tag">var</span> k: Double</span><br><span class="line">k = <span class="function"><span class="title">Double</span><span class="params">(x)</span></span></span><br><span class="line">k = <span class="function"><span class="title">Double</span><span class="params">(x.value)</span></span></span><br><span class="line">k = (Double) x</span><br><span class="line">k = (Double) x.value</span><br></pre></td></tr></table></figure>
<h3 id="问题解答-5">问题解答</h3><p><a href="https://forums.developer.apple.com/people/OOPer" target="_blank" rel="external">OOPer</a> 大神在回帖中写到，其实<code>k = Double(x)</code> 是可以执行的， Swift 是强调强类型的语言，不过也提供了不同类型的转换方式。对不同类型进行运算, Swift 是不允许的。以下代码是可以运行的：</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="variable"><span class="keyword">var</span> x</span>: <span class="typename">Int</span> = <span class="number">2</span></span><br><span class="line"><span class="variable"><span class="keyword">var</span> y</span>: <span class="typename">Double</span> = <span class="number">2.0</span></span><br><span class="line"><span class="variable"><span class="keyword">var</span> z</span>: <span class="typename">Double</span> = y / <span class="typename">Double</span>(x)</span><br></pre></td></tr></table></figure>
<p>另外，回帖中还提供了一种使用协议和代码的方式来解决这个问题：</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">protocol DoubleBOWEMOJI &#123;  </span><br><span class="line">  <span class="variable"><span class="keyword">var</span> Double</span>: Swift.<span class="typename">Double</span> &#123;<span class="keyword">get</span>&#125;  </span><br><span class="line">&#125;  </span><br><span class="line">extension <span class="typename">Int</span>: DoubleBOWEMOJI &#123;  </span><br><span class="line">   <span class="variable"><span class="keyword">var</span> Double</span>: Swift.<span class="typename">Double</span> &#123;<span class="keyword">return</span> Swift.<span class="typename">Double</span>(self)&#125;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="variable"><span class="keyword">var</span> z</span> = y / x.<span class="typename">Double</span></span><br></pre></td></tr></table></figure>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Swift-进阶/">Swift 进阶</a>,<a class="article-category-link" href="/categories/iOS开发/">iOS开发</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Swift/">Swift</a><a href="/tags/原创/">原创</a><a href="/tags/社区问答/">社区问答</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://swiftggteam.github.io/2015/12/16/swift-qa-2015-12-16/" data-title="[原创] 每周 Swift 社区问答 2015-12-16 | SwiftGG" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/12/17/per-view-auto-rotation-locking-made-easy-for-ios-8-and-9/" title="在 iOS8 和 iOS9 中锁定视图自动旋转">
  <strong>上一篇：</strong><br/>
  <span>
  在 iOS8 和 iOS9 中锁定视图自动旋转</span>
</a>
</div>


<div class="next">
<a href="/2015/12/16/new-to-beta-2-swift-2-1-playground-value-drops-swiftlang/"  title="Beta 2 更新：Swift 2.1 Playground 使用值放置方法">
 <strong>下一篇：</strong><br/> 
 <span>Beta 2 更新：Swift 2.1 Playground 使用值放置方法
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2015/12/16/swift-qa-2015-12-16/" data-title="[原创] 每周 Swift 社区问答 2015-12-16" data-url="http://swiftggteam.github.io/2015/12/16/swift-qa-2015-12-16/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Q1:_Unwrapping_NSNumber_works_fine_in_iOS_Simulator_but_unexpectedly_found_nil_on_iPhone"><span class="toc-number">1.</span> <span class="toc-text">Q1: Unwrapping NSNumber works fine in iOS Simulator but unexpectedly found nil on iPhone</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述"><span class="toc-number">1.1.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#解答"><span class="toc-number">1.2.</span> <span class="toc-text">解答</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q2:Why_my_code_is_working_in_playground_but_not_in_my_project?"><span class="toc-number">2.</span> <span class="toc-text">Q2:Why my code is working in playground but not in my project?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-1"><span class="toc-number">2.1.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题解答"><span class="toc-number">2.2.</span> <span class="toc-text">问题解答</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q3:Failable_initialisers_and_unbound_instance_vars"><span class="toc-number">3.</span> <span class="toc-text">Q3:Failable initialisers and unbound instance vars</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-2"><span class="toc-number">3.1.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题解答-1"><span class="toc-number">3.2.</span> <span class="toc-text">问题解答</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q4:Read-only_property"><span class="toc-number">4.</span> <span class="toc-text">Q4:Read-only property</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题链接"><span class="toc-number">4.1.</span> <span class="toc-text">问题链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-3"><span class="toc-number">4.2.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#代码实现"><span class="toc-number">4.3.</span> <span class="toc-text">代码实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q5:_Why?_insert_a_new_element_into_array_and_it_always_crash!"><span class="toc-number">5.</span> <span class="toc-text">Q5: Why? insert a new element into array and it always crash!</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题链接-1"><span class="toc-number">5.1.</span> <span class="toc-text">问题链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-4"><span class="toc-number">5.2.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题解答-2"><span class="toc-number">5.3.</span> <span class="toc-text">问题解答</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q6:binary_operator_‘??’_cannot_be_applied_to_functions?"><span class="toc-number">6.</span> <span class="toc-text">Q6:binary operator ‘??’ cannot be applied to functions?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题链接-2"><span class="toc-number">6.1.</span> <span class="toc-text">问题链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-5"><span class="toc-number">6.2.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题解答-3"><span class="toc-number">6.3.</span> <span class="toc-text">问题解答</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q7:_Filter_array_on_type"><span class="toc-number">7.</span> <span class="toc-text">Q7: Filter array on type</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题链接-3"><span class="toc-number">7.1.</span> <span class="toc-text">问题链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-6"><span class="toc-number">7.2.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题解答-4"><span class="toc-number">7.3.</span> <span class="toc-text">问题解答</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#思考"><span class="toc-number">7.4.</span> <span class="toc-text">思考</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q8、Numbers_in_swift"><span class="toc-number">8.</span> <span class="toc-text">Q8、Numbers in swift</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题链接-4"><span class="toc-number">8.1.</span> <span class="toc-text">问题链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题描述-7"><span class="toc-number">8.2.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题解答-5"><span class="toc-number">8.3.</span> <span class="toc-text">问题解答</span></a></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/3D-Touch/" title="3D Touch">3D Touch<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Apple-TV-开发/" title="Apple TV 开发">Apple TV 开发<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/" title="Swift">Swift<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift-入门/" title="Swift 入门">Swift 入门<sup>58</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift-开源信息/" title="Swift 开源信息">Swift 开源信息<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift-进阶/" title="Swift 进阶">Swift 进阶<sup>39</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift2-0/" title="Swift2.0">Swift2.0<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/WatchOS-2/" title="WatchOS 2">WatchOS 2<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Xcode/" title="Xcode">Xcode<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/alloc-init/" title="alloc-init">alloc-init<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS9/" title="iOS9">iOS9<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS开发/" title="iOS开发">iOS开发<sup>5</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Natasha-The-Robot/" title="Natasha The Robot">Natasha The Robot<sup>14</sup></a></li>
			
		
			
				<li><a href="/tags/Thomas-Hanning/" title="Thomas Hanning">Thomas Hanning<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/Erica-Sadun/" title="Erica Sadun">Erica Sadun<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/AppCoda/" title="AppCoda">AppCoda<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/Crunchy-Development/" title="Crunchy Development">Crunchy Development<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/Tomasz-Szulc/" title="Tomasz Szulc">Tomasz Szulc<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/IOSCREATOR/" title="IOSCREATOR">IOSCREATOR<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/Mike-Ash/" title="Mike Ash">Mike Ash<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/Swift-and-Painless/" title="Swift and Painless">Swift and Painless<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/Open-Source-Swift/" title="Open Source Swift">Open Source Swift<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Jameson-Quave/" title="Jameson Quave">Jameson Quave<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Ole-Begemann/" title="Ole Begemann">Ole Begemann<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/APPVENTURE/" title="APPVENTURE">APPVENTURE<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Raj-Kandathi/" title="Raj Kandathi">Raj Kandathi<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/社区问答/" title="社区问答">社区问答<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Swift/" title="Swift">Swift<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Benedikt-Terhechte/" title="Benedikt Terhechte">Benedikt Terhechte<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/原创/" title="原创">原创<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/JamesonQuave-com/" title="JamesonQuave.com">JamesonQuave.com<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Jacob-Bandes-Storch/" title="Jacob Bandes-Storch">Jacob Bandes-Storch<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://codebuild.me" target="_blank" title="Code Build Me">Code Build Me</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.saitjr.com" target="_blank" title="//TODO:">//TODO:</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.cee.moe" target="_blank" title="Perfect Freeze">Perfect Freeze</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.swiftyper.com" target="_blank" title="小锅的swift之路">小锅的swift之路</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.futantan.com/" target="_blank" title="Prayer的博客">Prayer的博客</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.csdn.net/mmoaay" target="_blank" title="画渣程序猿mmoaay">画渣程序猿mmoaay</a>
            
          </li>
        
          <li>
            
            	<a href="http://blogoflinus.sinaapp.com" target="_blank" title="小铁匠的swift之路">小铁匠的swift之路</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.jianshu.com/users/596f2ba91ce9/latest_articles" target="_blank" title="ppppppmst的简书博客">ppppppmst的简书博客</a>
            
          </li>
        
          <li>
            
            	<a href="http://wxgbridgeq.github.io/" target="_blank" title="BridgeQ">BridgeQ</a>
            
          </li>
        
          <li>
            
            	<a href="https://bearychat.com/" target="_blank" title="BearyChat">BearyChat</a>
            
          </li>
        
          <li>
            
            	<a href="http://bbs.php-z.com" target="_blank" title="PHP-Z论坛">PHP-Z论坛</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.swiftguide.cn" target="_blank" title="官方文档">官方文档</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="wechatpart">
	<p class="asidetitle">微信公众号</p>
	<img src="/img/wechat.jpg" />
</div>

</aside>
</div>
    </div>
    <footer>


<div id="footer" >
	
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="SwiftGG">SwiftGG</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>
<script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
<script src="/js/mm.js"></script>
<script src="/js/subscribe.js"></script>

<div id="swiftweekly" style="display:none;">
  <span id="sw_slogan">订阅同样走心的<b>『Swift开发者周报』</b>&nbsp;</span>
  <form id="content">
    <input name="email" id="sw_email" placeholder="输入邮箱地址" type="email" /><a class="sw_sub">订阅</a>
  </form>
</div>

<script type="text/javascript">
$(document).ready(function(){

  

  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"swiftgg"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66150920-1', 'auto');
  ga('send', 'pageview');

</script>





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
